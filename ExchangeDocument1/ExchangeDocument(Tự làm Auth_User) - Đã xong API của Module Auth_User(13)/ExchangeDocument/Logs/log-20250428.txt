2025-04-28 00:37:13.139 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 00:37:13.348 +07:00 [DBG] Hosting starting
2025-04-28 00:37:13.391 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 00:37:13.394 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 00:37:13.395 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 00:37:13.396 +07:00 [INF] Hosting environment: Development
2025-04-28 00:37:13.397 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-28 00:37:13.398 +07:00 [DBG] Hosting started
2025-04-28 00:37:21.431 +07:00 [DBG] Connection id "0HNC5M8L2CFRJ" accepted.
2025-04-28 00:37:21.435 +07:00 [DBG] Connection id "0HNC5M8L2CFRJ" started.
2025-04-28 00:37:21.436 +07:00 [DBG] Connection id "0HNC5M8L2CFRK" accepted.
2025-04-28 00:37:21.438 +07:00 [DBG] Connection id "0HNC5M8L2CFRK" started.
2025-04-28 00:37:22.346 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-28 00:37:22.355 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 00:37:22.369 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 00:37:22.388 +07:00 [DBG] Request did not match any endpoints
2025-04-28 00:37:22.518 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 111.9361 ms
2025-04-28 00:37:22.521 +07:00 [DBG] Connection id "0HNC5M8L2CFRJ" completed keep alive response.
2025-04-28 00:37:22.524 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 178.5179ms
2025-04-28 00:39:12.213 +07:00 [DBG] Connection id "0HNC5M8L2CFRK" received FIN.
2025-04-28 00:39:12.218 +07:00 [DBG] Connection id "0HNC5M8L2CFRK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 00:39:12.222 +07:00 [DBG] Connection id "0HNC5M8L2CFRK" disconnecting.
2025-04-28 00:39:12.224 +07:00 [DBG] Connection id "0HNC5M8L2CFRK" stopped.
2025-04-28 00:39:34.272 +07:00 [DBG] Connection id "0HNC5M8L2CFRJ" disconnecting.
2025-04-28 00:39:34.276 +07:00 [DBG] Connection id "0HNC5M8L2CFRJ" stopped.
2025-04-28 00:39:34.277 +07:00 [DBG] Connection id "0HNC5M8L2CFRJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 00:40:35.965 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" accepted.
2025-04-28 00:40:35.967 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" started.
2025-04-28 00:40:35.970 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/7 - application/json 230
2025-04-28 00:40:36.002 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/7'
2025-04-28 00:40:36.014 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/7'
2025-04-28 00:40:36.020 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:40:36.025 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 00:40:36.027 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-28 00:40:36.028 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:40:36.054 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 00:40:36.059 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 00:40:36.061 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 00:40:36.063 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 00:40:36.065 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 00:40:36.066 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 00:40:36.068 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:40:36.328 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 00:40:36.346 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:40:36.350 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 00:40:36.352 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 00:40:36.354 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:40:36.355 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:40:36.357 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 00:40:36.359 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 00:40:36.361 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:40:36.364 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 00:40:36.366 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 00:40:36.408 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000001": started reading request body.
2025-04-28 00:40:36.411 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000001": done reading request body.
2025-04-28 00:40:36.427 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 00:40:36.429 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:40:36.430 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:40:36.432 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:40:36.440 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:40:36.443 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-28 00:40:36.445 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-28 00:40:36.447 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 00:40:36.450 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-28 00:40:36.453 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 00:40:36.454 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 00:40:36.458 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 00:40:36.459 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-28 00:40:36.493 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 422.8371ms
2025-04-28 00:40:36.496 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:40:36.497 +07:00 [INF] HTTP PUT /api/Documents/7 responded 400 in 474.1739 ms
2025-04-28 00:40:36.498 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" completed keep alive response.
2025-04-28 00:40:36.501 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/7 - 400 null application/problem+json; charset=utf-8 530.7185ms
2025-04-28 00:42:08.601 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/7 - application/json 386
2025-04-28 00:42:08.607 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/7'
2025-04-28 00:42:08.609 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/7'
2025-04-28 00:42:08.611 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:42:08.614 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 00:42:08.615 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:42:08.616 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 00:42:08.620 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 00:42:08.621 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 00:42:08.623 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 00:42:08.626 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 00:42:08.628 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 00:42:08.630 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:42:08.638 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:42:08.640 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 00:42:08.641 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 00:42:08.642 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:42:08.642 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:42:08.643 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 00:42:08.645 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 00:42:08.646 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:42:08.648 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 00:42:08.649 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 00:42:08.651 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000002": started reading request body.
2025-04-28 00:42:08.652 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000002": done reading request body.
2025-04-28 00:42:08.653 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 00:42:08.654 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:42:08.654 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:42:08.655 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:42:08.656 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:42:09.138 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 00:42:09.329 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-28 00:42:09.498 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 00:42:09.534 +07:00 [DBG] Creating DbConnection.
2025-04-28 00:42:09.549 +07:00 [DBG] Created DbConnection. (13ms).
2025-04-28 00:42:09.553 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:09.925 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:09.931 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:42:09.936 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-28 00:42:09.942 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-04-28 00:42:09.949 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:42:10.025 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:42:10.037 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:10.046 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-04-28 00:42:10.049 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:10.053 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-28 00:42:10.056 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 00:42:10.058 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 00:42:10.059 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 00:42:10.061 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 00:42:10.062 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 00:42:10.063 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 00:42:10.064 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 00:42:10.073 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 1442.4526ms
2025-04-28 00:42:10.074 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:42:10.076 +07:00 [INF] HTTP PUT /api/Documents/7 responded 400 in 1462.7394 ms
2025-04-28 00:42:10.078 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" completed keep alive response.
2025-04-28 00:42:10.081 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 00:42:10.084 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:10.087 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-28 00:42:10.088 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/7 - 400 null application/json; charset=utf-8 1486.9429ms
2025-04-28 00:42:18.480 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/7 - application/json 377
2025-04-28 00:42:18.484 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/7'
2025-04-28 00:42:18.485 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/7'
2025-04-28 00:42:18.487 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:42:18.488 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 00:42:18.489 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:42:18.490 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 00:42:18.492 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 00:42:18.494 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 00:42:18.496 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 00:42:18.499 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 00:42:18.501 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 00:42:18.503 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:42:18.507 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:42:18.509 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 00:42:18.511 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 00:42:18.513 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:42:18.514 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:42:18.515 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 00:42:18.516 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 00:42:18.518 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:42:18.519 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 00:42:18.520 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 00:42:18.521 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000003": started reading request body.
2025-04-28 00:42:18.522 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000003": done reading request body.
2025-04-28 00:42:18.523 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 00:42:18.523 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:42:18.524 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:42:18.525 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:42:18.527 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:42:18.538 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 00:42:18.544 +07:00 [DBG] Creating DbConnection.
2025-04-28 00:42:18.547 +07:00 [DBG] Created DbConnection. (3ms).
2025-04-28 00:42:18.548 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.550 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.551 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:42:18.552 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 00:42:18.553 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 00:42:18.554 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:42:18.558 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:42:18.586 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 00:42:18.600 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.603 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 40ms reading results.
2025-04-28 00:42:18.604 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.605 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 00:42:18.608 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .FirstOrDefault(e => EF.Property<int>(e, "DocumentId") == __p_0)'
2025-04-28 00:42:18.619 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId
            FROM document AS d
            WHERE d.documentId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId
            FROM document AS d
            WHERE d.documentId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 00:42:18.633 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.634 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.635 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:42:18.636 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 00:42:18.637 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 00:42:18.638 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:42:18.642 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:42:18.646 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.647 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 00:42:18.649 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.650 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 00:42:18.652 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 00:42:18.653 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 00:42:18.654 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 00:42:18.655 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 00:42:18.656 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 00:42:18.656 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 00:42:18.657 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 00:42:18.659 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 156.9158ms
2025-04-28 00:42:18.663 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:42:18.664 +07:00 [INF] HTTP PUT /api/Documents/7 responded 404 in 176.0910 ms
2025-04-28 00:42:18.666 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" completed keep alive response.
2025-04-28 00:42:18.666 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 00:42:18.667 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:42:18.668 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 00:42:18.669 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/7 - 404 null application/json; charset=utf-8 188.9804ms
2025-04-28 00:43:03.716 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 377
2025-04-28 00:43:03.720 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 00:43:03.723 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 00:43:03.725 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:43:03.726 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 00:43:03.727 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:43:03.750 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 00:43:03.755 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 00:43:03.761 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 00:43:03.765 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 00:43:03.770 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 00:43:03.772 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 00:43:03.775 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:43:03.777 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:43:03.778 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 00:43:03.779 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 00:43:03.780 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:43:03.781 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:43:03.781 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 00:43:03.782 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 00:43:03.783 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:43:03.784 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 00:43:03.785 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 00:43:03.786 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000004": started reading request body.
2025-04-28 00:43:03.787 +07:00 [DBG] Connection id "0HNC5M8L2CFRL", Request id "0HNC5M8L2CFRL:00000004": done reading request body.
2025-04-28 00:43:03.790 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 00:43:03.791 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:43:03.791 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:43:03.792 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:43:03.793 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:43:03.838 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 00:43:03.843 +07:00 [DBG] Creating DbConnection.
2025-04-28 00:43:03.844 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 00:43:03.844 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.846 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.847 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:43:03.847 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 00:43:03.848 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 00:43:03.849 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:43:03.851 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:43:03.854 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 00:43:03.856 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.858 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-28 00:43:03.859 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.860 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 00:43:03.861 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.862 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.863 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:43:03.864 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 00:43:03.865 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 00:43:03.865 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:43:03.867 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:43:03.889 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 00:43:03.907 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.909 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 39ms reading results.
2025-04-28 00:43:03.910 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.912 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 00:43:03.916 +07:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-28 00:43:03.919 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 143.754ms
2025-04-28 00:43:03.921 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:43:03.923 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultForbidScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ForbidAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ForbidResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-28 00:43:03.941 +07:00 [ERR] HTTP PUT /api/Documents/9 responded 500 in 214.6863 ms
2025-04-28 00:43:03.942 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" completed keep alive response.
2025-04-28 00:43:03.943 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 00:43:03.944 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:43:03.945 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 00:43:03.946 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 500 null text/plain; charset=utf-8 230.1535ms
2025-04-28 00:45:15.497 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" disconnecting.
2025-04-28 00:45:15.503 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" stopped.
2025-04-28 00:45:15.504 +07:00 [DBG] Connection id "0HNC5M8L2CFRL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 00:54:35.692 +07:00 [INF] Application is shutting down...
2025-04-28 00:54:35.693 +07:00 [DBG] Hosting stopping
2025-04-28 00:54:35.699 +07:00 [DBG] Hosting stopped
2025-04-28 00:55:06.252 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 00:55:06.337 +07:00 [DBG] Hosting starting
2025-04-28 00:55:06.370 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 00:55:06.372 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 00:55:06.373 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 00:55:06.374 +07:00 [INF] Hosting environment: Production
2025-04-28 00:55:06.376 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-28 00:55:06.377 +07:00 [DBG] Hosting started
2025-04-28 00:55:13.206 +07:00 [DBG] Connection id "0HNC5MIKFKGS0" received FIN.
2025-04-28 00:55:13.215 +07:00 [DBG] Connection id "0HNC5MIKFKGS0" accepted.
2025-04-28 00:55:13.218 +07:00 [DBG] Connection id "0HNC5MIKFKGS0" started.
2025-04-28 00:55:13.220 +07:00 [DBG] Connection id "0HNC5MIKFKGS1" accepted.
2025-04-28 00:55:13.222 +07:00 [DBG] Connection id "0HNC5MIKFKGS1" started.
2025-04-28 00:55:13.227 +07:00 [DBG] Connection id "0HNC5MIKFKGS0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 00:55:13.232 +07:00 [DBG] Connection id "0HNC5MIKFKGS0" disconnecting.
2025-04-28 00:55:13.236 +07:00 [DBG] Connection id "0HNC5MIKFKGS0" stopped.
2025-04-28 00:55:13.246 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 388
2025-04-28 00:55:13.252 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 00:55:13.266 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 00:55:13.271 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 00:55:13.274 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:55:13.281 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 00:55:13.283 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-28 00:55:13.285 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:55:13.325 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 00:55:13.329 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 00:55:13.331 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 00:55:13.335 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 00:55:13.336 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 00:55:13.337 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 00:55:13.340 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:55:13.406 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 00:55:13.425 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:55:13.431 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 00:55:13.434 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 00:55:13.436 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:55:13.437 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:55:13.438 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 00:55:13.439 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 00:55:13.441 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:55:13.442 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 00:55:13.446 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 00:55:13.486 +07:00 [DBG] Connection id "0HNC5MIKFKGS1", Request id "0HNC5MIKFKGS1:00000001": started reading request body.
2025-04-28 00:55:13.488 +07:00 [DBG] Connection id "0HNC5MIKFKGS1", Request id "0HNC5MIKFKGS1:00000001": done reading request body.
2025-04-28 00:55:13.506 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 00:55:13.508 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:55:13.509 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:55:13.510 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:55:13.519 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:55:13.917 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 00:55:13.974 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-28 00:55:14.155 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 00:55:14.196 +07:00 [DBG] Creating DbConnection.
2025-04-28 00:55:14.208 +07:00 [DBG] Created DbConnection. (11ms).
2025-04-28 00:55:14.213 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.319 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.322 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:55:14.328 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-28 00:55:14.334 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-28 00:55:14.341 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:55:14.373 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:55:14.403 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 00:55:14.418 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.424 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 46ms reading results.
2025-04-28 00:55:14.429 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.434 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-04-28 00:55:14.438 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .FirstOrDefault(e => EF.Property<int>(e, "DocumentId") == __p_0)'
2025-04-28 00:55:14.448 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId
            FROM document AS d
            WHERE d.documentId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId
            FROM document AS d
            WHERE d.documentId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 00:55:14.464 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.467 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.468 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:55:14.469 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 00:55:14.470 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 00:55:14.472 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:55:14.480 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:55:14.501 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 00:55:14.520 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.521 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 38ms reading results.
2025-04-28 00:55:14.523 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.524 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 00:55:14.532 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 00:55:14.535 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 00:55:14.536 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 00:55:14.540 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 00:55:14.541 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-28 00:55:14.578 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 1236.4026ms
2025-04-28 00:55:14.583 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:55:14.587 +07:00 [INF] HTTP PUT /api/Documents/9 responded 403 in 1304.7414 ms
2025-04-28 00:55:14.590 +07:00 [DBG] Connection id "0HNC5MIKFKGS1" completed keep alive response.
2025-04-28 00:55:14.594 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 00:55:14.598 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:55:14.602 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-28 00:55:14.608 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 403 null application/problem+json; charset=utf-8 1361.6413ms
2025-04-28 00:57:01.811 +07:00 [DBG] Connection id "0HNC5MIKFKGS2" accepted.
2025-04-28 00:57:01.813 +07:00 [DBG] Connection id "0HNC5MIKFKGS2" started.
2025-04-28 00:57:01.816 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 377
2025-04-28 00:57:01.821 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 00:57:01.845 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 00:57:01.853 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:57:01.856 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 00:57:01.857 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:57:01.858 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 00:57:01.862 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 00:57:01.864 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 00:57:01.866 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 00:57:01.868 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 00:57:01.870 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 00:57:01.871 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:57:01.874 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 00:57:01.875 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 00:57:01.876 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 00:57:01.878 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:57:01.878 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 00:57:01.880 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 00:57:01.881 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 00:57:01.882 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:57:01.884 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 00:57:01.886 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 00:57:01.888 +07:00 [DBG] Connection id "0HNC5MIKFKGS2", Request id "0HNC5MIKFKGS2:00000001": started reading request body.
2025-04-28 00:57:01.889 +07:00 [DBG] Connection id "0HNC5MIKFKGS2", Request id "0HNC5MIKFKGS2:00000001": done reading request body.
2025-04-28 00:57:01.890 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 00:57:01.891 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:57:01.892 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:57:01.893 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 00:57:01.895 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 00:57:01.908 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 00:57:01.913 +07:00 [DBG] Creating DbConnection.
2025-04-28 00:57:01.915 +07:00 [DBG] Created DbConnection. (2ms).
2025-04-28 00:57:01.916 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.918 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.919 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:57:01.920 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 00:57:01.921 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 00:57:01.922 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:57:01.925 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 00:57:01.928 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 00:57:01.930 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.932 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 00:57:01.933 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.934 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 00:57:01.936 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.937 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.938 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 00:57:01.939 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 00:57:01.940 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 00:57:01.941 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:57:01.948 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 00:57:01.951 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 00:57:01.952 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.953 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 00:57:01.954 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.956 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 00:57:01.957 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 00:57:01.960 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-28 00:57:01.964 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 00:57:01.965 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 00:57:01.968 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 00:57:01.969 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-28 00:57:01.970 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 99.1389ms
2025-04-28 00:57:01.972 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 00:57:01.972 +07:00 [INF] HTTP PUT /api/Documents/9 responded 403 in 116.8262 ms
2025-04-28 00:57:01.974 +07:00 [DBG] Connection id "0HNC5MIKFKGS2" completed keep alive response.
2025-04-28 00:57:01.975 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 00:57:01.975 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 00:57:01.976 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 00:57:01.978 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 403 null application/problem+json; charset=utf-8 161.1183ms
2025-04-28 00:57:26.255 +07:00 [DBG] Connection id "0HNC5MIKFKGS1" disconnecting.
2025-04-28 00:57:26.258 +07:00 [DBG] Connection id "0HNC5MIKFKGS1" stopped.
2025-04-28 00:57:26.260 +07:00 [DBG] Connection id "0HNC5MIKFKGS1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 00:59:13.058 +07:00 [DBG] Connection id "0HNC5MIKFKGS2" disconnecting.
2025-04-28 00:59:13.061 +07:00 [DBG] Connection id "0HNC5MIKFKGS2" stopped.
2025-04-28 00:59:13.063 +07:00 [DBG] Connection id "0HNC5MIKFKGS2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 01:28:57.500 +07:00 [DBG] Connection id "0HNC5MIKFKGS3" accepted.
2025-04-28 01:28:57.502 +07:00 [DBG] Connection id "0HNC5MIKFKGS3" started.
2025-04-28 01:28:57.505 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-28 01:28:57.508 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 01:28:57.510 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 01:28:57.514 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 01:28:57.517 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 01:28:57.519 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 01:28:57.526 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 01:28:57.527 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 01:28:57.529 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 01:28:57.530 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 01:28:57.531 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 01:28:57.532 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 01:28:57.534 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:28:57.540 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:28:57.543 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 01:28:57.544 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 01:28:57.546 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:28:57.547 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:28:57.548 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 01:28:57.550 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 01:28:57.605 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 01:28:57.612 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.Status == "Listed")'
2025-04-28 01:28:57.626 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-28 01:28:57.630 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-28 01:28:57.666 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(13) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(13);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<Email>k__BackingField = dataReader.GetString(16);
                                    instance.<FullName>k__BackingField = dataReader.GetString(17);
                                    instance.<Password>k__BackingField = dataReader.GetString(18);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(20);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 01:28:57.694 +07:00 [DBG] Creating DbConnection.
2025-04-28 01:28:57.694 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 01:28:57.695 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:28:57.699 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:28:57.700 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 01:28:57.701 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 01:28:57.703 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 01:28:57.704 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 01:28:57.711 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 01:28:57.713 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:28:57.714 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-28 01:28:57.715 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:28:57.716 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 01:28:57.719 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 01:28:57.721 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 01:28:57.722 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 01:28:57.723 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 01:28:57.724 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 01:28:57.725 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 01:28:57.725 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 01:28:57.732 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 197.755ms
2025-04-28 01:28:57.733 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 01:28:57.734 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 217.2343 ms
2025-04-28 01:28:57.736 +07:00 [DBG] Connection id "0HNC5MIKFKGS3" completed keep alive response.
2025-04-28 01:28:57.737 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 01:28:57.738 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:28:57.740 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 01:28:57.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 235.6037ms
2025-04-28 01:29:08.480 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-28 01:29:08.484 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 01:29:08.485 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 01:29:08.486 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 01:29:08.493 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 01:29:08.507 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 01:29:08.511 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 01:29:08.517 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 01:29:08.521 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 01:29:08.522 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 01:29:08.523 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 01:29:08.524 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 01:29:08.526 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:29:08.527 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:29:08.528 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 01:29:08.529 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 01:29:08.530 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:29:08.531 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:29:08.531 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 01:29:08.532 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 01:29:08.535 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 01:29:08.537 +07:00 [DBG] Creating DbConnection.
2025-04-28 01:29:08.537 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 01:29:08.538 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:29:08.539 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:29:08.540 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 01:29:08.540 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 01:29:08.541 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 01:29:08.542 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 01:29:08.547 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 01:29:08.550 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:29:08.555 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:29:08.556 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:29:08.562 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:29:08.565 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:29:08.572 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:29:08.573 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 23ms reading results.
2025-04-28 01:29:08.574 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:29:08.575 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 01:29:08.577 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 01:29:08.578 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 01:29:08.579 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 01:29:08.580 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 01:29:08.580 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 01:29:08.581 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 01:29:08.582 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-28 01:29:08.590 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 64.2703ms
2025-04-28 01:29:08.591 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 01:29:08.592 +07:00 [INF] HTTP GET /api/Documents/8 responded 200 in 99.4284 ms
2025-04-28 01:29:08.593 +07:00 [DBG] Connection id "0HNC5MIKFKGS3" completed keep alive response.
2025-04-28 01:29:08.594 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 01:29:08.595 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:29:08.595 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 01:29:08.597 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 116.4056ms
2025-04-28 01:31:19.523 +07:00 [DBG] Connection id "0HNC5MIKFKGS3" disconnecting.
2025-04-28 01:31:19.530 +07:00 [DBG] Connection id "0HNC5MIKFKGS3" stopped.
2025-04-28 01:31:19.534 +07:00 [DBG] Connection id "0HNC5MIKFKGS3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 01:49:08.840 +07:00 [DBG] Connection id "0HNC5MIKFKGS4" accepted.
2025-04-28 01:49:08.842 +07:00 [DBG] Connection id "0HNC5MIKFKGS4" started.
2025-04-28 01:49:08.844 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 377
2025-04-28 01:49:08.848 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 01:49:08.849 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 01:49:08.851 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 01:49:08.852 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 01:49:08.852 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 01:49:08.853 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 01:49:08.855 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 01:49:08.857 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 01:49:08.860 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 01:49:08.862 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 01:49:08.864 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 01:49:08.866 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:49:08.867 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:49:08.868 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 01:49:08.869 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 01:49:08.871 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:49:08.872 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:49:08.873 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 01:49:08.874 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 01:49:08.875 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 01:49:08.876 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 01:49:08.877 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 01:49:08.879 +07:00 [DBG] Connection id "0HNC5MIKFKGS4", Request id "0HNC5MIKFKGS4:00000001": started reading request body.
2025-04-28 01:49:08.881 +07:00 [DBG] Connection id "0HNC5MIKFKGS4", Request id "0HNC5MIKFKGS4:00000001": done reading request body.
2025-04-28 01:49:08.882 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 01:49:08.883 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 01:49:08.884 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 01:49:08.885 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 01:49:08.887 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 01:49:08.889 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 01:49:08.891 +07:00 [DBG] Creating DbConnection.
2025-04-28 01:49:08.892 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 01:49:08.893 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.898 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.899 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 01:49:08.900 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 01:49:08.901 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 01:49:08.902 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 01:49:08.906 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 01:49:08.908 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:49:08.909 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.910 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 01:49:08.912 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.913 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 01:49:08.915 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.916 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.917 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 01:49:08.918 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 01:49:08.919 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 01:49:08.920 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 01:49:08.924 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 01:49:08.926 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:49:08.927 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.928 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 01:49:08.930 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.931 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 01:49:08.933 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 01:49:08.934 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-28 01:49:08.936 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 01:49:08.937 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 01:49:08.939 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 01:49:08.940 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-28 01:49:08.941 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 75.4283ms
2025-04-28 01:49:08.942 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 01:49:08.943 +07:00 [INF] HTTP PUT /api/Documents/9 responded 403 in 91.0225 ms
2025-04-28 01:49:08.944 +07:00 [DBG] Connection id "0HNC5MIKFKGS4" completed keep alive response.
2025-04-28 01:49:08.945 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 01:49:08.946 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:08.948 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 01:49:08.948 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 403 null application/problem+json; charset=utf-8 104.9037ms
2025-04-28 01:49:22.644 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - application/json 377
2025-04-28 01:49:22.647 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 01:49:22.649 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 01:49:22.651 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 01:49:22.652 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 01:49:22.654 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 01:49:22.656 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 01:49:22.659 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 01:49:22.662 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 01:49:22.664 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 01:49:22.667 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 01:49:22.671 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 01:49:22.674 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:49:22.675 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 01:49:22.678 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 01:49:22.680 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 01:49:22.682 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:49:22.683 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 01:49:22.685 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 01:49:22.686 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 01:49:22.687 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 01:49:22.689 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 01:49:22.690 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 01:49:22.692 +07:00 [DBG] Connection id "0HNC5MIKFKGS4", Request id "0HNC5MIKFKGS4:00000002": started reading request body.
2025-04-28 01:49:22.693 +07:00 [DBG] Connection id "0HNC5MIKFKGS4", Request id "0HNC5MIKFKGS4:00000002": done reading request body.
2025-04-28 01:49:22.694 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 01:49:22.696 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 01:49:22.697 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 01:49:22.697 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 01:49:22.699 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 01:49:22.700 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 01:49:22.702 +07:00 [DBG] Creating DbConnection.
2025-04-28 01:49:22.703 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 01:49:22.703 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.704 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.705 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 01:49:22.706 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 01:49:22.707 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 01:49:22.708 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 01:49:22.711 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 01:49:22.714 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:49:22.715 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.716 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 01:49:22.717 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.718 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 01:49:22.720 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.722 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.723 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 01:49:22.724 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 01:49:22.725 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 01:49:22.727 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 01:49:22.730 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 01:49:22.733 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:49:22.734 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.735 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 01:49:22.736 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.738 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 01:49:22.746 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:49:22.750 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 01:49:22.754 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 01:49:22.765 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 01:49:22.809 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.811 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.814 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 01:49:22.815 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 01:49:22.817 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 01:49:22.818 +07:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Size = 255), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [description] = @p3, [edition] = @p4, [imageUrl] = @p5, [ISBN] = @p6, [price] = @p7, [publicationYear] = @p8, [status] = @p9, [title] = @p10, [userId] = @p11
OUTPUT 1
WHERE [documentId] = @p12;
2025-04-28 01:49:22.829 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Size = 255), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [description] = @p3, [edition] = @p4, [imageUrl] = @p5, [ISBN] = @p6, [price] = @p7, [publicationYear] = @p8, [status] = @p9, [title] = @p10, [userId] = @p11
OUTPUT 1
WHERE [documentId] = @p12;
2025-04-28 01:49:22.836 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.837 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-28 01:49:22.839 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.841 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-28 01:49:22.846 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 01:49:22.850 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 01:49:22.851 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 01:49:22.853 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 01:49:22.854 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 01:49:22.855 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 01:49:22.856 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 01:49:22.857 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 01:49:22.858 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-28 01:49:22.859 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 185.1632ms
2025-04-28 01:49:22.860 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 01:49:22.862 +07:00 [INF] HTTP PUT /api/Documents/8 responded 200 in 209.6550 ms
2025-04-28 01:49:22.864 +07:00 [DBG] Connection id "0HNC5MIKFKGS4" completed keep alive response.
2025-04-28 01:49:22.865 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 01:49:22.866 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 01:49:22.867 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 01:49:22.868 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 223.9731ms
2025-04-28 01:51:34.755 +07:00 [DBG] Connection id "0HNC5MIKFKGS4" disconnecting.
2025-04-28 01:51:34.760 +07:00 [DBG] Connection id "0HNC5MIKFKGS4" stopped.
2025-04-28 01:51:34.762 +07:00 [DBG] Connection id "0HNC5MIKFKGS4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:06:09.934 +07:00 [DBG] Connection id "0HNC5MIKFKGS5" accepted.
2025-04-28 02:06:09.937 +07:00 [DBG] Connection id "0HNC5MIKFKGS5" started.
2025-04-28 02:06:09.940 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - application/json 377
2025-04-28 02:06:09.943 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 02:06:09.970 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 02:06:09.973 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 02:06:09.974 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:06:09.978 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 02:06:09.979 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 02:06:09.983 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 02:06:09.986 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 02:06:09.987 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 02:06:09.990 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 02:06:09.992 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 02:06:09.995 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 02:06:09.997 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 02:06:10.000 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 02:06:10.003 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 02:06:10.005 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 02:06:10.006 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 02:06:10.007 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 02:06:10.008 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 02:06:10.009 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 02:06:10.010 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 02:06:10.012 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 02:06:10.013 +07:00 [DBG] Connection id "0HNC5MIKFKGS5", Request id "0HNC5MIKFKGS5:00000001": started reading request body.
2025-04-28 02:06:10.014 +07:00 [DBG] Connection id "0HNC5MIKFKGS5", Request id "0HNC5MIKFKGS5:00000001": done reading request body.
2025-04-28 02:06:10.016 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 02:06:10.017 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 02:06:10.018 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 02:06:10.020 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 02:06:10.021 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 02:06:10.023 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 02:06:10.025 +07:00 [DBG] Creating DbConnection.
2025-04-28 02:06:10.026 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 02:06:10.027 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.032 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.034 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 02:06:10.036 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-28 02:06:10.038 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 02:06:10.039 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 02:06:10.044 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 02:06:10.046 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:10.046 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.048 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 02:06:10.050 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.051 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 02:06:10.053 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.054 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.055 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 02:06:10.056 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 02:06:10.057 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 02:06:10.058 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 02:06:10.063 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId]
FROM [document] AS [d]
WHERE [d].[documentId] = @__p_0
2025-04-28 02:06:10.066 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:10.068 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.070 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 02:06:10.071 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.072 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 02:06:10.073 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:10.074 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 02:06:10.075 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 02:06:10.076 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 02:06:10.078 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.079 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.080 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 02:06:10.081 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 02:06:10.083 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 02:06:10.085 +07:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Size = 255), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [description] = @p3, [edition] = @p4, [imageUrl] = @p5, [ISBN] = @p6, [price] = @p7, [publicationYear] = @p8, [status] = @p9, [title] = @p10, [userId] = @p11
OUTPUT 1
WHERE [documentId] = @p12;
2025-04-28 02:06:10.091 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Size = 255), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [description] = @p3, [edition] = @p4, [imageUrl] = @p5, [ISBN] = @p6, [price] = @p7, [publicationYear] = @p8, [status] = @p9, [title] = @p10, [userId] = @p11
OUTPUT 1
WHERE [documentId] = @p12;
2025-04-28 02:06:10.093 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.094 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 02:06:10.096 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.096 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 02:06:10.099 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:10.101 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 02:06:10.102 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 02:06:10.104 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 02:06:10.105 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 02:06:10.106 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 02:06:10.107 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 02:06:10.108 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 02:06:10.108 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-28 02:06:10.110 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 114.9672ms
2025-04-28 02:06:10.111 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 02:06:10.112 +07:00 [INF] HTTP PUT /api/Documents/8 responded 200 in 137.6259 ms
2025-04-28 02:06:10.113 +07:00 [DBG] Connection id "0HNC5MIKFKGS5" completed keep alive response.
2025-04-28 02:06:10.114 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 02:06:10.115 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:10.118 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-28 02:06:10.119 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 178.8579ms
2025-04-28 02:06:25.634 +07:00 [INF] Application is shutting down...
2025-04-28 02:06:25.635 +07:00 [DBG] Hosting stopping
2025-04-28 02:06:25.643 +07:00 [DBG] Connection id "0HNC5MIKFKGS5" disconnecting.
2025-04-28 02:06:25.646 +07:00 [DBG] Connection id "0HNC5MIKFKGS5" stopped.
2025-04-28 02:06:25.647 +07:00 [DBG] Connection id "0HNC5MIKFKGS5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:06:25.650 +07:00 [DBG] Hosting stopped
2025-04-28 02:06:34.430 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 02:06:34.517 +07:00 [DBG] Hosting starting
2025-04-28 02:06:34.551 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 02:06:34.555 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 02:06:34.556 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 02:06:34.557 +07:00 [INF] Hosting environment: Production
2025-04-28 02:06:34.558 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-28 02:06:34.558 +07:00 [DBG] Hosting started
2025-04-28 02:06:39.912 +07:00 [DBG] Connection id "0HNC5NQI0R00R" accepted.
2025-04-28 02:06:39.917 +07:00 [DBG] Connection id "0HNC5NQI0R00R" started.
2025-04-28 02:06:39.943 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - application/json 377
2025-04-28 02:06:39.954 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 02:06:39.972 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 02:06:39.980 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 02:06:39.983 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 02:06:39.989 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:06:39.990 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-28 02:06:39.992 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 02:06:40.022 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 02:06:40.029 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 02:06:40.032 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 02:06:40.034 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 02:06:40.036 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 02:06:40.037 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 02:06:40.040 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 02:06:40.110 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 02:06:40.128 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 02:06:40.136 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 02:06:40.138 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 02:06:40.140 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 02:06:40.141 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 02:06:40.142 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 02:06:40.144 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 02:06:40.149 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 02:06:40.151 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 02:06:40.152 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 02:06:40.197 +07:00 [DBG] Connection id "0HNC5NQI0R00R", Request id "0HNC5NQI0R00R:00000001": started reading request body.
2025-04-28 02:06:40.201 +07:00 [DBG] Connection id "0HNC5NQI0R00R", Request id "0HNC5NQI0R00R:00000001": done reading request body.
2025-04-28 02:06:40.220 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 02:06:40.223 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 02:06:40.224 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 02:06:40.226 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 02:06:40.237 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 02:06:40.648 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 02:06:40.706 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-28 02:06:40.890 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 02:06:40.932 +07:00 [DBG] Creating DbConnection.
2025-04-28 02:06:40.949 +07:00 [DBG] Created DbConnection. (12ms).
2025-04-28 02:06:40.954 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.065 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.071 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 02:06:41.076 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-28 02:06:41.082 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-28 02:06:41.088 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 02:06:41.124 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 02:06:41.155 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:41.172 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.182 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 50ms reading results.
2025-04-28 02:06:41.186 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.191 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-28 02:06:41.199 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0)'
2025-04-28 02:06:41.208 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-28 02:06:41.213 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-28 02:06:41.254 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE d.documentId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE d.documentId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(13) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(13);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<Email>k__BackingField = dataReader.GetString(16);
                                    instance.<FullName>k__BackingField = dataReader.GetString(17);
                                    instance.<Password>k__BackingField = dataReader.GetString(18);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(20);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 02:06:41.284 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.286 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.287 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 02:06:41.288 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 02:06:41.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 02:06:41.289 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0
2025-04-28 02:06:41.300 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0
2025-04-28 02:06:41.323 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:41.358 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:41.366 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:41.383 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.388 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 85ms reading results.
2025-04-28 02:06:41.389 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.390 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 02:06:41.402 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:41.406 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 02:06:41.409 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 02:06:41.425 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 02:06:41.484 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.490 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.494 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 02:06:41.496 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 02:06:41.499 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-28 02:06:41.501 +07:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Size = 255), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [description] = @p3, [edition] = @p4, [imageUrl] = @p5, [ISBN] = @p6, [price] = @p7, [publicationYear] = @p8, [status] = @p9, [title] = @p10, [userId] = @p11
OUTPUT 1
WHERE [documentId] = @p12;
2025-04-28 02:06:41.510 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Size = 255), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [description] = @p3, [edition] = @p4, [imageUrl] = @p5, [ISBN] = @p6, [price] = @p7, [publicationYear] = @p8, [status] = @p9, [title] = @p10, [userId] = @p11
OUTPUT 1
WHERE [documentId] = @p12;
2025-04-28 02:06:41.520 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.523 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 8ms reading results.
2025-04-28 02:06:41.528 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.530 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-28 02:06:41.534 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 02:06:41.537 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 02:06:41.541 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 02:06:41.547 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 02:06:41.549 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 02:06:41.551 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 02:06:41.552 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 02:06:41.553 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 02:06:41.555 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-28 02:06:41.583 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 1541.9472ms
2025-04-28 02:06:41.586 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 02:06:41.590 +07:00 [INF] HTTP PUT /api/Documents/8 responded 200 in 1599.3359 ms
2025-04-28 02:06:41.594 +07:00 [DBG] Connection id "0HNC5NQI0R00R" completed keep alive response.
2025-04-28 02:06:41.599 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 02:06:41.604 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 02:06:41.609 +07:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-04-28 02:06:41.614 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 1670.7352ms
2025-04-28 02:08:53.500 +07:00 [DBG] Connection id "0HNC5NQI0R00R" disconnecting.
2025-04-28 02:08:53.503 +07:00 [DBG] Connection id "0HNC5NQI0R00R" stopped.
2025-04-28 02:08:53.505 +07:00 [DBG] Connection id "0HNC5NQI0R00R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:21:06.351 +07:00 [DBG] Connection id "0HNC5NQI0R00S" accepted.
2025-04-28 02:21:06.352 +07:00 [DBG] Connection id "0HNC5NQI0R00S" started.
2025-04-28 02:21:06.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:21:06.363 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:21:06.365 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:21:06.368 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:21:06.371 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 2.5872 ms
2025-04-28 02:21:06.374 +07:00 [DBG] Connection id "0HNC5NQI0R00S" completed keep alive response.
2025-04-28 02:21:06.376 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 20.1173ms
2025-04-28 02:21:06.381 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:21:08.887 +07:00 [DBG] Connection id "0HNC5NQI0R00T" accepted.
2025-04-28 02:21:08.888 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:21:08.891 +07:00 [DBG] Connection id "0HNC5NQI0R00T" started.
2025-04-28 02:21:08.895 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:21:08.897 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:21:08.900 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:21:08.901 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.5443 ms
2025-04-28 02:21:08.904 +07:00 [DBG] Connection id "0HNC5NQI0R00S" completed keep alive response.
2025-04-28 02:21:08.907 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 19.2068ms
2025-04-28 02:21:08.912 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:21:22.703 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:21:22.707 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:21:22.709 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:21:22.710 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:21:22.711 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 0.7528 ms
2025-04-28 02:21:22.713 +07:00 [DBG] Connection id "0HNC5NQI0R00S" completed keep alive response.
2025-04-28 02:21:22.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 10.8231ms
2025-04-28 02:21:22.717 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:21:32.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:21:32.793 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:21:32.795 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:21:32.796 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:21:32.797 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.2001 ms
2025-04-28 02:21:32.800 +07:00 [DBG] Connection id "0HNC5NQI0R00S" completed keep alive response.
2025-04-28 02:21:32.801 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 11.4195ms
2025-04-28 02:21:32.805 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:21:33.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:21:33.705 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:21:33.706 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:21:33.707 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:21:33.708 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.2565 ms
2025-04-28 02:21:33.710 +07:00 [DBG] Connection id "0HNC5NQI0R00S" completed keep alive response.
2025-04-28 02:21:33.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 13.6119ms
2025-04-28 02:21:33.718 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:21:43.524 +07:00 [INF] Application is shutting down...
2025-04-28 02:21:43.525 +07:00 [DBG] Hosting stopping
2025-04-28 02:21:43.532 +07:00 [DBG] Connection id "0HNC5NQI0R00S" disconnecting.
2025-04-28 02:21:43.535 +07:00 [DBG] Connection id "0HNC5NQI0R00S" stopped.
2025-04-28 02:21:43.536 +07:00 [DBG] Connection id "0HNC5NQI0R00S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:21:43.533 +07:00 [DBG] Connection id "0HNC5NQI0R00T" disconnecting.
2025-04-28 02:21:43.538 +07:00 [DBG] Connection id "0HNC5NQI0R00T" stopped.
2025-04-28 02:21:43.538 +07:00 [DBG] Connection id "0HNC5NQI0R00T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:21:43.541 +07:00 [DBG] Hosting stopped
2025-04-28 02:21:55.315 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 02:21:55.416 +07:00 [DBG] Hosting starting
2025-04-28 02:21:55.453 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 02:21:55.455 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 02:21:55.456 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 02:21:55.457 +07:00 [INF] Hosting environment: Production
2025-04-28 02:21:55.458 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-28 02:21:55.458 +07:00 [DBG] Hosting started
2025-04-28 02:22:00.370 +07:00 [DBG] Connection id "0HNC5O34B0N48" accepted.
2025-04-28 02:22:00.374 +07:00 [DBG] Connection id "0HNC5O34B0N48" started.
2025-04-28 02:22:00.375 +07:00 [DBG] Connection id "0HNC5O34B0N49" accepted.
2025-04-28 02:22:00.378 +07:00 [DBG] Connection id "0HNC5O34B0N49" started.
2025-04-28 02:22:00.404 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:00.412 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 02:22:00.424 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:00.429 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:00.437 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:22:00.439 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-28 02:22:00.442 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 4.6054 ms
2025-04-28 02:22:00.449 +07:00 [DBG] Connection id "0HNC5O34B0N48" completed keep alive response.
2025-04-28 02:22:00.451 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 47.8749ms
2025-04-28 02:22:00.456 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:22:01.108 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:01.116 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:01.117 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:01.119 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:22:01.120 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.0217 ms
2025-04-28 02:22:01.123 +07:00 [DBG] Connection id "0HNC5O34B0N48" completed keep alive response.
2025-04-28 02:22:01.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 16.5434ms
2025-04-28 02:22:01.130 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:22:01.272 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:01.279 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:01.280 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:01.283 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:22:01.284 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.4998 ms
2025-04-28 02:22:01.287 +07:00 [DBG] Connection id "0HNC5O34B0N48" completed keep alive response.
2025-04-28 02:22:01.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 16.6973ms
2025-04-28 02:22:01.297 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:22:01.464 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:01.468 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:01.473 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:01.474 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:22:01.476 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.8242 ms
2025-04-28 02:22:01.480 +07:00 [DBG] Connection id "0HNC5O34B0N48" completed keep alive response.
2025-04-28 02:22:01.481 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 17.7562ms
2025-04-28 02:22:01.484 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:22:01.640 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:01.646 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:01.648 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:01.650 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:22:01.652 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.9173 ms
2025-04-28 02:22:01.655 +07:00 [DBG] Connection id "0HNC5O34B0N48" completed keep alive response.
2025-04-28 02:22:01.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 16.7002ms
2025-04-28 02:22:01.662 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:22:01.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:01.811 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:01.812 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:01.813 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:22:01.814 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 0.8313 ms
2025-04-28 02:22:01.815 +07:00 [DBG] Connection id "0HNC5O34B0N48" completed keep alive response.
2025-04-28 02:22:01.817 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 10.2276ms
2025-04-28 02:22:01.820 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:22:02.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:02.006 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:02.007 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:02.008 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-28 02:22:02.010 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.9441 ms
2025-04-28 02:22:02.013 +07:00 [DBG] Connection id "0HNC5O34B0N48" completed keep alive response.
2025-04-28 02:22:02.015 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 14.3411ms
2025-04-28 02:22:02.019 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-28 02:22:28.919 +07:00 [INF] Application is shutting down...
2025-04-28 02:22:28.920 +07:00 [DBG] Hosting stopping
2025-04-28 02:22:28.928 +07:00 [DBG] Connection id "0HNC5O34B0N48" disconnecting.
2025-04-28 02:22:28.928 +07:00 [DBG] Connection id "0HNC5O34B0N49" disconnecting.
2025-04-28 02:22:28.930 +07:00 [DBG] Connection id "0HNC5O34B0N48" stopped.
2025-04-28 02:22:28.931 +07:00 [DBG] Connection id "0HNC5O34B0N49" stopped.
2025-04-28 02:22:28.934 +07:00 [DBG] Connection id "0HNC5O34B0N49" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:22:28.934 +07:00 [DBG] Connection id "0HNC5O34B0N48" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:22:28.940 +07:00 [DBG] Hosting stopped
2025-04-28 02:22:34.307 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 02:22:34.410 +07:00 [DBG] Hosting starting
2025-04-28 02:22:34.471 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 02:22:34.474 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 02:22:34.475 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 02:22:34.476 +07:00 [INF] Hosting environment: Development
2025-04-28 02:22:34.477 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-28 02:22:34.478 +07:00 [DBG] Hosting started
2025-04-28 02:22:36.848 +07:00 [DBG] Connection id "0HNC5O3F6SUF7" accepted.
2025-04-28 02:22:36.851 +07:00 [DBG] Connection id "0HNC5O3F6SUF7" started.
2025-04-28 02:22:36.851 +07:00 [DBG] Connection id "0HNC5O3F6SUF8" accepted.
2025-04-28 02:22:36.853 +07:00 [DBG] Connection id "0HNC5O3F6SUF8" started.
2025-04-28 02:22:36.881 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 02:22:36.893 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 02:22:36.911 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 02:22:36.914 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:36.997 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 76.5735 ms
2025-04-28 02:22:37.004 +07:00 [DBG] Connection id "0HNC5O3F6SUF7" completed keep alive response.
2025-04-28 02:22:37.008 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 127.1615ms
2025-04-28 02:22:38.029 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-28 02:22:38.032 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 02:22:38.034 +07:00 [DBG] Request did not match any endpoints
2025-04-28 02:22:38.212 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 176.3365 ms
2025-04-28 02:22:38.215 +07:00 [DBG] Connection id "0HNC5O3F6SUF7" completed keep alive response.
2025-04-28 02:22:38.217 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 187.8851ms
2025-04-28 02:24:12.251 +07:00 [DBG] Connection id "0HNC5O3F6SUF8" received FIN.
2025-04-28 02:24:12.257 +07:00 [DBG] Connection id "0HNC5O3F6SUF8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:24:12.261 +07:00 [DBG] Connection id "0HNC5O3F6SUF8" disconnecting.
2025-04-28 02:24:12.263 +07:00 [DBG] Connection id "0HNC5O3F6SUF8" stopped.
2025-04-28 02:24:49.437 +07:00 [DBG] Connection id "0HNC5O3F6SUF7" disconnecting.
2025-04-28 02:24:49.440 +07:00 [DBG] Connection id "0HNC5O3F6SUF7" stopped.
2025-04-28 02:24:49.441 +07:00 [DBG] Connection id "0HNC5O3F6SUF7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 02:27:03.580 +07:00 [INF] Application is shutting down...
2025-04-28 02:27:03.581 +07:00 [DBG] Hosting stopping
2025-04-28 02:27:03.589 +07:00 [DBG] Hosting stopped
2025-04-28 03:02:48.517 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 03:02:48.981 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:02:50.428 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:03:10.085 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 03:03:10.710 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:03:10.856 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:03:10.900 +07:00 [DBG] Created DbConnection. (45ms).
2025-04-28 03:03:10.904 +07:00 [DBG] Migrating using database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:10.910 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.095 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.099 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-28 03:03:11.104 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-04-28 03:03:11.105 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2025-04-28 03:03:11.109 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-28 03:03:11.131 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-28 03:03:11.133 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.139 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (3ms).
2025-04-28 03:03:11.139 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.140 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.141 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-28 03:03:11.143 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-28 03:03:11.143 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-04-28 03:03:11.143 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-04-28 03:03:11.143 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-28 03:03:11.167 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-28 03:03:11.222 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-28 03:03:11.226 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-28 03:03:11.228 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-28 03:03:11.228 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.229 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-28 03:03:11.234 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-28 03:03:11.235 +07:00 [DBG] Committing transaction.
2025-04-28 03:03:11.237 +07:00 [DBG] Committed transaction.
2025-04-28 03:03:11.238 +07:00 [DBG] Disposing transaction.
2025-04-28 03:03:11.239 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-28 03:03:11.240 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-28 03:03:11.241 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-28 03:03:11.241 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.241 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.241 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-28 03:03:11.242 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-28 03:03:11.242 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-28 03:03:11.242 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-04-28 03:03:11.242 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-04-28 03:03:11.242 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-28 03:03:11.243 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-28 03:03:11.245 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:03:11.245 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 03:03:11.245 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-04-28 03:03:11.245 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-28 03:03:11.253 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-28 03:03:11.256 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.257 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 03:03:11.261 +07:00 [INF] Applying migration '20250427153539_ForceSchemaSync'.
2025-04-28 03:03:11.270 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-28 03:03:11.271 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.271 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.271 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250427153539_ForceSchemaSync', N'9.0.4');
2025-04-28 03:03:11.274 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250427153539_ForceSchemaSync', N'9.0.4');
2025-04-28 03:03:11.274 +07:00 [INF] Applying migration '20250427200250_AddSoftDeleteToDocument'.
2025-04-28 03:03:11.289 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-28 03:03:11.289 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.290 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD [DeletedAt] datetime2 NULL;
2025-04-28 03:03:11.297 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD [DeletedAt] datetime2 NULL;
2025-04-28 03:03:11.297 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-28 03:03:11.297 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.297 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.297 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-04-28 03:03:11.305 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-04-28 03:03:11.305 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-28 03:03:11.305 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.305 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-28 03:03:11.305 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250427200250_AddSoftDeleteToDocument', N'9.0.4');
2025-04-28 03:03:11.306 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250427200250_AddSoftDeleteToDocument', N'9.0.4');
2025-04-28 03:03:11.307 +07:00 [DBG] Committing transaction.
2025-04-28 03:03:11.307 +07:00 [DBG] Committed transaction.
2025-04-28 03:03:11.308 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-28 03:03:11.308 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-04-28 03:03:11.308 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-04-28 03:03:11.308 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-28 03:03:11.312 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-28 03:03:11.312 +07:00 [DBG] Disposing transaction.
2025-04-28 03:03:11.312 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.312 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 03:03:11.314 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:03:11.317 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:03:11.318 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 03:31:05.379 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 03:31:05.476 +07:00 [DBG] Hosting starting
2025-04-28 03:31:05.526 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 03:31:05.529 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 03:31:05.535 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 03:31:05.536 +07:00 [INF] Hosting environment: Development
2025-04-28 03:31:05.537 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-28 03:31:05.537 +07:00 [DBG] Hosting started
2025-04-28 03:31:36.665 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" accepted.
2025-04-28 03:31:36.669 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" started.
2025-04-28 03:31:36.669 +07:00 [DBG] Connection id "0HNC5PA0V8NSH" accepted.
2025-04-28 03:31:36.672 +07:00 [DBG] Connection id "0HNC5PA0V8NSH" started.
2025-04-28 03:31:36.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 03:31:36.711 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 03:31:36.725 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 03:31:36.730 +07:00 [DBG] Request did not match any endpoints
2025-04-28 03:31:36.822 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 85.0303 ms
2025-04-28 03:31:36.829 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" completed keep alive response.
2025-04-28 03:31:36.833 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 132.1826ms
2025-04-28 03:31:37.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-28 03:31:37.316 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 03:31:37.318 +07:00 [DBG] Request did not match any endpoints
2025-04-28 03:31:37.449 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 129.7709 ms
2025-04-28 03:31:37.453 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" completed keep alive response.
2025-04-28 03:31:37.455 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 144.265ms
2025-04-28 03:32:15.810 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/0 - null null
2025-04-28 03:32:15.818 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/0'
2025-04-28 03:32:15.838 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/0'
2025-04-28 03:32:15.841 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:32:15.850 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:32:15.854 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-28 03:32:15.857 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:32:15.882 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:32:15.888 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:32:15.889 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:32:15.891 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:32:15.893 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:32:15.894 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:32:15.896 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:32:15.951 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 03:32:15.966 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:32:15.975 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:32:15.979 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:32:15.982 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:32:15.982 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:32:15.983 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:32:15.985 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:32:15.990 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:32:15.993 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 03:32:15.994 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:32:15.995 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:32:15.996 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:32:15.997 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 03:32:16.032 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 134.761ms
2025-04-28 03:32:16.033 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:32:16.035 +07:00 [INF] HTTP DELETE /api/Documents/0 responded 400 in 186.5831 ms
2025-04-28 03:32:16.038 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" completed keep alive response.
2025-04-28 03:32:16.041 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/0 - 400 null application/json; charset=utf-8 231.4755ms
2025-04-28 03:32:29.118 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/9999 - null null
2025-04-28 03:32:29.124 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9999'
2025-04-28 03:32:29.126 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9999'
2025-04-28 03:32:29.127 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:32:29.129 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:32:29.131 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:32:29.133 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:32:29.136 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:32:29.138 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:32:29.140 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:32:29.142 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:32:29.144 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:32:29.146 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:32:29.156 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:32:29.157 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:32:29.158 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:32:29.159 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:32:29.160 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:32:29.161 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:32:29.162 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:32:29.490 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-28 03:32:29.492 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-28 03:32:29.575 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:32:29.648 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0)'
2025-04-28 03:32:29.708 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-28 03:32:29.711 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-28 03:32:29.930 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(8);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(10) ? default(decimal?) : (decimal?)dataReader.GetDecimal(10);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(11) ? default(int?) : (int?)dataReader.GetInt32(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 03:32:29.995 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:32:30.009 +07:00 [DBG] Created DbConnection. (13ms).
2025-04-28 03:32:30.012 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:32:30.120 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:32:30.123 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:32:30.128 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-28 03:32:30.139 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-04-28 03:32:30.145 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:32:30.187 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:32:30.197 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:32:30.205 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-04-28 03:32:30.208 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:32:30.212 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (3ms).
2025-04-28 03:32:30.214 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:32:30.218 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 03:32:30.219 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:32:30.221 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:32:30.222 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:32:30.224 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 03:32:30.225 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 1079.6527ms
2025-04-28 03:32:30.228 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:32:30.229 +07:00 [INF] HTTP DELETE /api/Documents/9999 responded 404 in 1100.3916 ms
2025-04-28 03:32:30.231 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" completed keep alive response.
2025-04-28 03:32:30.232 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:32:30.239 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:32:30.241 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 03:32:30.243 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/9999 - 404 null application/json; charset=utf-8 1124.7536ms
2025-04-28 03:33:48.657 +07:00 [DBG] Connection id "0HNC5PA0V8NSH" disconnecting.
2025-04-28 03:33:48.659 +07:00 [DBG] Connection id "0HNC5PA0V8NSH" stopped.
2025-04-28 03:33:48.661 +07:00 [DBG] Connection id "0HNC5PA0V8NSH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 03:33:50.529 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/5 - null null
2025-04-28 03:33:50.533 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-28 03:33:50.534 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-28 03:33:50.537 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:33:50.540 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:33:50.542 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:33:50.546 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:33:50.548 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:33:50.549 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:33:50.550 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:33:50.552 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:33:50.553 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:33:50.554 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:33:50.560 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:33:50.562 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:33:50.563 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:33:50.564 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:33:50.565 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:33:50.566 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:33:50.567 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:33:50.582 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:33:50.586 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:33:50.587 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 03:33:50.588 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:33:50.590 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:33:50.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:33:50.594 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-28 03:33:50.595 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 03:33:50.596 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:33:50.614 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:33:50.647 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:33:50.687 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:33:50.696 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:33:50.704 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:33:50.708 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:33:50.716 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:33:50.718 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 101ms reading results.
2025-04-28 03:33:50.719 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:33:50.719 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 03:33:50.721 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:33:50.723 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 03:33:50.724 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:33:50.726 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:33:50.727 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:33:50.728 +07:00 [INF] Executing ConflictObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 03:33:50.729 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 175.4196ms
2025-04-28 03:33:50.730 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:33:50.731 +07:00 [INF] HTTP DELETE /api/Documents/5 responded 409 in 191.0321 ms
2025-04-28 03:33:50.733 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" completed keep alive response.
2025-04-28 03:33:50.733 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:33:50.734 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:33:50.735 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 03:33:50.737 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/5 - 409 null application/json; charset=utf-8 207.9016ms
2025-04-28 03:34:35.655 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/8 - null null
2025-04-28 03:34:35.659 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 03:34:35.661 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 03:34:35.663 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:34:35.664 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:34:35.667 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:34:35.670 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:34:35.675 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:34:35.677 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:34:35.678 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:34:35.680 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:34:35.681 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:34:35.682 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:34:35.684 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:34:35.686 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:34:35.688 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:34:35.690 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:34:35.691 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:34:35.693 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:34:35.695 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:34:35.743 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:34:35.746 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:34:35.747 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 03:34:35.748 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.749 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.750 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:34:35.752 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 03:34:35.754 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 03:34:35.755 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:34:35.775 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:34:35.779 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:34:35.780 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:34:35.782 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:34:35.783 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:34:35.787 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:34:35.790 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.791 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-28 03:34:35.793 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.794 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 03:34:35.804 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:34:35.809 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 03:34:35.811 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 03:34:35.825 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 03:34:35.873 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.874 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.877 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:34:35.878 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 03:34:35.880 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 03:34:35.881 +07:00 [DBG] Executing DbCommand [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [edition] = @p5, [imageUrl] = @p6, [IsDeleted] = @p7, [ISBN] = @p8, [price] = @p9, [publicationYear] = @p10, [status] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-28 03:34:35.891 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [edition] = @p5, [imageUrl] = @p6, [IsDeleted] = @p7, [ISBN] = @p8, [price] = @p9, [publicationYear] = @p10, [status] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-28 03:34:35.897 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.898 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-28 03:34:35.901 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.903 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 03:34:35.907 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:34:35.910 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 03:34:35.912 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-28 03:34:35.913 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 230.4202ms
2025-04-28 03:34:35.914 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:34:35.915 +07:00 [INF] HTTP DELETE /api/Documents/8 responded 204 in 250.4728 ms
2025-04-28 03:34:35.916 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" completed keep alive response.
2025-04-28 03:34:35.917 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:34:35.919 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:34:35.921 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 03:34:35.923 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/8 - 204 null null 267.7908ms
2025-04-28 03:36:06.220 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" received FIN.
2025-04-28 03:36:06.224 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" disconnecting.
2025-04-28 03:36:06.226 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 03:36:06.241 +07:00 [DBG] Connection id "0HNC5PA0V8NSG" stopped.
2025-04-28 03:36:20.196 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" accepted.
2025-04-28 03:36:20.199 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" started.
2025-04-28 03:36:20.201 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-28 03:36:20.204 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 03:36:20.207 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 03:36:20.211 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:20.213 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:36:20.215 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:20.220 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:36:20.225 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:36:20.228 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:36:20.230 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:36:20.233 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:36:20.234 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:36:20.236 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:36:20.238 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:36:20.241 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:36:20.243 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:36:20.245 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:20.246 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:20.248 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:36:20.249 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:20.253 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:36:20.257 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.Status == "Listed")'
2025-04-28 03:36:20.260 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-28 03:36:20.263 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-28 03:36:20.275 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d.status == N'Listed'))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d.status == N'Listed')), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(8);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(10) ? default(decimal?) : (decimal?)dataReader.GetDecimal(10);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(11) ? default(int?) : (int?)dataReader.GetInt32(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 03:36:20.312 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:36:20.314 +07:00 [DBG] Created DbConnection. (2ms).
2025-04-28 03:36:20.315 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:20.317 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:20.318 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:36:20.319 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 03:36:20.321 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 03:36:20.323 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:36:20.343 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:36:20.346 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:20.347 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 03:36:20.348 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:20.349 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 03:36:20.352 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:36:20.357 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 03:36:20.360 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 03:36:20.361 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:36:20.362 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:36:20.363 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:36:20.365 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 03:36:20.367 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 130.4909ms
2025-04-28 03:36:20.369 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:20.370 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 156.8611 ms
2025-04-28 03:36:20.372 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" completed keep alive response.
2025-04-28 03:36:20.373 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:36:20.375 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:20.376 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 03:36:20.379 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 177.5182ms
2025-04-28 03:36:42.756 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-28 03:36:42.759 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 03:36:42.760 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 03:36:42.761 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:42.762 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:36:42.763 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:42.764 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:36:42.768 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:36:42.771 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:36:42.773 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:36:42.775 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:36:42.777 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:36:42.779 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:36:42.781 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:36:42.782 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:36:42.783 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:36:42.787 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:42.788 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:42.791 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:36:42.792 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:42.794 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:36:42.796 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:36:42.797 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-28 03:36:42.798 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:42.799 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:42.800 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:36:42.802 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-28 03:36:42.805 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-28 03:36:42.806 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:36:42.823 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:36:42.825 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:42.826 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 03:36:42.827 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:42.829 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 03:36:42.830 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:36:42.832 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 03:36:42.833 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 03:36:42.835 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:36:42.836 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:36:42.838 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:36:42.839 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 03:36:42.840 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 61.8295ms
2025-04-28 03:36:42.842 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:42.843 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 80.3376 ms
2025-04-28 03:36:42.844 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" completed keep alive response.
2025-04-28 03:36:42.845 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:36:42.846 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:42.847 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 03:36:42.848 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 92.1108ms
2025-04-28 03:36:52.920 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/5 - null null
2025-04-28 03:36:52.925 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-28 03:36:52.927 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-28 03:36:52.928 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:52.930 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:36:52.932 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:52.936 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:36:52.940 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:36:52.941 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:36:52.943 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:36:52.945 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:36:52.947 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:36:52.948 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:36:52.950 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:36:52.954 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:36:52.955 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:36:52.956 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:52.958 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:52.959 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:36:52.960 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:36:52.962 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:36:52.964 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:36:52.965 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 03:36:52.966 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:52.971 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:52.973 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:36:52.974 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 03:36:52.975 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 03:36:52.976 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:36:52.986 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:36:52.991 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:52.993 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 03:36:52.994 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:52.995 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 03:36:52.997 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:36:53.001 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 03:36:53.003 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 03:36:53.005 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:36:53.006 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:36:53.006 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:36:53.008 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 03:36:53.009 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 61.1085ms
2025-04-28 03:36:53.010 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:36:53.011 +07:00 [INF] HTTP GET /api/Documents/5 responded 404 in 81.6467 ms
2025-04-28 03:36:53.013 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" completed keep alive response.
2025-04-28 03:36:53.013 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:36:53.014 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:36:53.015 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 03:36:53.018 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/5 - 404 null application/json; charset=utf-8 97.9182ms
2025-04-28 03:37:16.821 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/5 - null null
2025-04-28 03:37:16.824 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-28 03:37:16.826 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-28 03:37:16.829 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:37:16.832 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:37:16.834 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:37:16.854 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:37:16.861 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:37:16.864 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:37:16.867 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:37:16.870 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:37:16.872 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:37:16.875 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:37:16.876 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:37:16.878 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:37:16.879 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:37:16.880 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:37:16.881 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:37:16.883 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:37:16.884 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:37:16.886 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:37:16.889 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:37:16.890 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 03:37:16.891 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:37:16.892 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:37:16.893 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:37:16.893 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 03:37:16.894 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 03:37:16.895 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:37:16.902 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 03:37:16.905 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:37:16.906 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:37:16.907 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:37:16.908 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:37:16.909 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 03:37:16.911 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:37:16.911 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 6ms reading results.
2025-04-28 03:37:16.912 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:37:16.914 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 03:37:16.916 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:37:16.919 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 03:37:16.920 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 03:37:16.921 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:37:16.922 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:37:16.923 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:37:16.924 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-28 03:37:16.940 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 65.69ms
2025-04-28 03:37:16.942 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 03:37:16.944 +07:00 [INF] HTTP GET /api/Documents/5 responded 200 in 112.0364 ms
2025-04-28 03:37:16.945 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" completed keep alive response.
2025-04-28 03:37:16.946 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:37:16.948 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:37:16.950 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-28 03:37:16.951 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/5 - 200 null application/json; charset=utf-8 129.5954ms
2025-04-28 03:37:27.346 +07:00 [INF] Application is shutting down...
2025-04-28 03:37:27.347 +07:00 [DBG] Hosting stopping
2025-04-28 03:37:27.354 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" disconnecting.
2025-04-28 03:37:27.356 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" stopped.
2025-04-28 03:37:27.359 +07:00 [DBG] Connection id "0HNC5PA0V8NSI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 03:37:27.365 +07:00 [DBG] Hosting stopped
2025-04-28 03:42:18.982 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 03:42:19.072 +07:00 [DBG] Hosting starting
2025-04-28 03:42:19.118 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 03:42:19.121 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 03:42:19.122 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 03:42:19.123 +07:00 [INF] Hosting environment: Development
2025-04-28 03:42:19.124 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-28 03:42:19.125 +07:00 [DBG] Hosting started
2025-04-28 03:42:24.610 +07:00 [DBG] Connection id "0HNC5PG22I3V4" accepted.
2025-04-28 03:42:24.614 +07:00 [DBG] Connection id "0HNC5PG22I3V4" started.
2025-04-28 03:42:24.615 +07:00 [DBG] Connection id "0HNC5PG22I3V5" accepted.
2025-04-28 03:42:24.616 +07:00 [DBG] Connection id "0HNC5PG22I3V5" started.
2025-04-28 03:42:24.638 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 03:42:24.645 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 03:42:24.663 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 03:42:24.668 +07:00 [DBG] Request did not match any endpoints
2025-04-28 03:42:24.746 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 73.3716 ms
2025-04-28 03:42:24.753 +07:00 [DBG] Connection id "0HNC5PG22I3V4" completed keep alive response.
2025-04-28 03:42:24.756 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 118.9303ms
2025-04-28 03:42:25.177 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-28 03:42:25.183 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 03:42:25.186 +07:00 [DBG] Request did not match any endpoints
2025-04-28 03:42:25.334 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 145.7425 ms
2025-04-28 03:42:25.336 +07:00 [DBG] Connection id "0HNC5PG22I3V4" completed keep alive response.
2025-04-28 03:42:25.337 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.6349ms
2025-04-28 03:42:33.980 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/8 - null null
2025-04-28 03:42:33.989 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 03:42:33.997 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 03:42:34.001 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:42:34.005 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 03:42:34.009 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-28 03:42:34.011 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:42:34.033 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 03:42:34.040 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 03:42:34.042 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 03:42:34.044 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 03:42:34.046 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 03:42:34.047 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 03:42:34.049 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:42:34.112 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 03:42:34.130 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 03:42:34.135 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 03:42:34.137 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 03:42:34.139 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:42:34.141 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 03:42:34.142 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 03:42:34.144 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 03:42:34.472 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-28 03:42:34.477 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-28 03:42:34.559 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 03:42:34.601 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0)'
2025-04-28 03:42:34.652 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-28 03:42:34.657 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-28 03:42:34.831 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(8);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(10) ? default(decimal?) : (decimal?)dataReader.GetDecimal(10);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(11) ? default(int?) : (int?)dataReader.GetInt32(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 03:42:34.888 +07:00 [DBG] Creating DbConnection.
2025-04-28 03:42:34.902 +07:00 [DBG] Created DbConnection. (13ms).
2025-04-28 03:42:34.907 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:42:35.034 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:42:35.037 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 03:42:35.044 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-28 03:42:35.051 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-04-28 03:42:35.062 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:42:35.107 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 03:42:35.118 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:42:35.125 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-04-28 03:42:35.129 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:42:35.133 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-28 03:42:35.137 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 03:42:35.141 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 03:42:35.143 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 03:42:35.144 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 03:42:35.146 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 03:42:35.148 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 03:42:35.176 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 1124.5614ms
2025-04-28 03:42:35.178 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 03:42:35.180 +07:00 [INF] HTTP DELETE /api/Documents/8 responded 404 in 1176.4511 ms
2025-04-28 03:42:35.182 +07:00 [DBG] Connection id "0HNC5PG22I3V4" completed keep alive response.
2025-04-28 03:42:35.185 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 03:42:35.189 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 03:42:35.192 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-28 03:42:35.194 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 1213.6205ms
2025-04-28 03:44:12.208 +07:00 [DBG] Connection id "0HNC5PG22I3V5" received FIN.
2025-04-28 03:44:12.211 +07:00 [DBG] Connection id "0HNC5PG22I3V5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 03:44:12.213 +07:00 [DBG] Connection id "0HNC5PG22I3V5" disconnecting.
2025-04-28 03:44:12.216 +07:00 [DBG] Connection id "0HNC5PG22I3V5" stopped.
2025-04-28 03:44:46.074 +07:00 [DBG] Connection id "0HNC5PG22I3V4" disconnecting.
2025-04-28 03:44:46.080 +07:00 [DBG] Connection id "0HNC5PG22I3V4" stopped.
2025-04-28 03:44:46.082 +07:00 [DBG] Connection id "0HNC5PG22I3V4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 03:52:29.788 +07:00 [DBG] Connection id "0HNC5PG22I3V6" accepted.
2025-04-28 03:52:29.791 +07:00 [DBG] Connection id "0HNC5PG22I3V6" started.
2025-04-28 03:52:29.791 +07:00 [DBG] Connection id "0HNC5PG22I3V7" accepted.
2025-04-28 03:52:29.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 03:52:29.793 +07:00 [DBG] Connection id "0HNC5PG22I3V7" started.
2025-04-28 03:52:29.794 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 03:52:29.796 +07:00 [DBG] Request did not match any endpoints
2025-04-28 03:52:29.797 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.8124 ms
2025-04-28 03:52:29.799 +07:00 [DBG] Connection id "0HNC5PG22I3V6" completed keep alive response.
2025-04-28 03:52:29.800 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 7.3907ms
2025-04-28 03:52:30.225 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-28 03:52:30.229 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 03:52:30.231 +07:00 [DBG] Request did not match any endpoints
2025-04-28 03:52:30.256 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 20.6245 ms
2025-04-28 03:52:30.262 +07:00 [DBG] Connection id "0HNC5PG22I3V6" completed keep alive response.
2025-04-28 03:52:30.263 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.2586ms
2025-04-28 03:54:12.205 +07:00 [DBG] Connection id "0HNC5PG22I3V7" received FIN.
2025-04-28 03:54:12.207 +07:00 [DBG] Connection id "0HNC5PG22I3V7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 03:54:12.209 +07:00 [DBG] Connection id "0HNC5PG22I3V7" disconnecting.
2025-04-28 03:54:12.211 +07:00 [DBG] Connection id "0HNC5PG22I3V7" stopped.
2025-04-28 16:35:48.994 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 16:35:49.217 +07:00 [DBG] Hosting starting
2025-04-28 16:35:49.380 +07:00 [INF] Now listening on: https://localhost:7011
2025-04-28 16:35:49.383 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 16:35:49.384 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 16:35:49.385 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-04-28 16:35:49.386 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-04-28 16:35:49.386 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-04-28 16:35:49.462 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 16:35:49.464 +07:00 [INF] Hosting environment: Development
2025-04-28 16:35:49.466 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-28 16:35:49.468 +07:00 [DBG] Hosting started
2025-04-28 16:35:49.753 +07:00 [DBG] Connection id "0HNC6707SFNL5" accepted.
2025-04-28 16:35:49.756 +07:00 [DBG] Connection id "0HNC6707SFNL5" started.
2025-04-28 16:35:49.763 +07:00 [DBG] Connection id "0HNC6707SFNL5" received FIN.
2025-04-28 16:35:49.773 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-04-28 16:35:49.791 +07:00 [DBG] Connection id "0HNC6707SFNL5" stopped.
2025-04-28 16:35:49.797 +07:00 [DBG] Connection id "0HNC6707SFNL5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 16:35:50.714 +07:00 [DBG] Connection id "0HNC6707SFNL6" accepted.
2025-04-28 16:35:50.716 +07:00 [DBG] Connection id "0HNC6707SFNL6" started.
2025-04-28 16:35:50.716 +07:00 [DBG] Connection id "0HNC6707SFNL7" accepted.
2025-04-28 16:35:50.718 +07:00 [DBG] Connection id "0HNC6707SFNL7" started.
2025-04-28 16:35:50.763 +07:00 [DBG] Connection id "0HNC6707SFNL7" received FIN.
2025-04-28 16:35:50.773 +07:00 [DBG] Connection 0HNC6707SFNL6 established using the following protocol: "Tls13"
2025-04-28 16:35:50.773 +07:00 [DBG] Connection 0HNC6707SFNL7 established using the following protocol: "Tls13"
2025-04-28 16:35:50.802 +07:00 [DBG] Connection id "0HNC6707SFNL7" is closed. The last processed stream ID was 0.
2025-04-28 16:35:50.805 +07:00 [DBG] Connection id "0HNC6707SFNL7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 16:35:50.810 +07:00 [DBG] The connection queue processing loop for 0HNC6707SFNL7 completed.
2025-04-28 16:35:50.814 +07:00 [DBG] Connection id "0HNC6707SFNL7" stopped.
2025-04-28 16:35:50.846 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/swagger - null null
2025-04-28 16:35:50.960 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 16:35:50.978 +07:00 [DBG] No candidates found for the request path '/swagger'
2025-04-28 16:35:50.980 +07:00 [DBG] Request did not match any endpoints
2025-04-28 16:35:50.990 +07:00 [INF] HTTP GET /swagger responded 301 in 3.6507 ms
2025-04-28 16:35:50.994 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/swagger - 301 0 null 150.4153ms
2025-04-28 16:35:50.997 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/swagger/index.html - null null
2025-04-28 16:35:51.001 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 16:35:51.002 +07:00 [DBG] Request did not match any endpoints
2025-04-28 16:35:51.041 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-04-28 16:35:51.044 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-04-28 16:35:51.054 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 50.5560 ms
2025-04-28 16:35:51.056 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-04-28 16:35:51.057 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-04-28 16:35:51.059 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/swagger/index.html - 200 null text/html;charset=utf-8 61.4253ms
2025-04-28 16:35:51.061 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/swagger/swagger-ui.css - null null
2025-04-28 16:35:51.061 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/swagger/swagger-ui-bundle.js - null null
2025-04-28 16:35:51.061 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/swagger/swagger-ui-standalone-preset.js - null null
2025-04-28 16:35:51.061 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/_vs/browserLink - null null
2025-04-28 16:35:51.061 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/_framework/aspnetcore-browser-refresh.js - null null
2025-04-28 16:35:51.063 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-04-28 16:35:51.065 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-04-28 16:35:51.066 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-04-28 16:35:51.071 +07:00 [DBG] Request did not match any endpoints
2025-04-28 16:35:51.072 +07:00 [DBG] Request did not match any endpoints
2025-04-28 16:35:51.073 +07:00 [DBG] Request did not match any endpoints
2025-04-28 16:35:51.073 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/_framework/aspnetcore-browser-refresh.js - 200 13768 application/javascript; charset=utf-8 12.5688ms
2025-04-28 16:35:51.092 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-28 16:35:51.094 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-28 16:35:51.094 +07:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 19.2477 ms
2025-04-28 16:35:51.096 +07:00 [INF] HTTP GET /swagger/swagger-ui-standalone-preset.js responded 200 in 20.3339 ms
2025-04-28 16:35:51.099 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/swagger/swagger-ui.css - 200 152034 text/css 38.6883ms
2025-04-28 16:35:51.104 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 43.4454ms
2025-04-28 16:35:51.117 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-28 16:35:51.127 +07:00 [INF] HTTP GET /swagger/swagger-ui-bundle.js responded 200 in 51.3656 ms
2025-04-28 16:35:51.130 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 69.0362ms
2025-04-28 16:35:51.135 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.9763ms
2025-04-28 16:35:51.284 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/swagger/v1/swagger.json - null null
2025-04-28 16:35:51.288 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 16:35:51.289 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7011/swagger/favicon-32x32.png - null null
2025-04-28 16:35:51.289 +07:00 [DBG] Request did not match any endpoints
2025-04-28 16:35:51.291 +07:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-04-28 16:35:51.293 +07:00 [DBG] Request did not match any endpoints
2025-04-28 16:35:51.294 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-28 16:35:51.296 +07:00 [INF] HTTP GET /swagger/favicon-32x32.png responded 200 in 1.8878 ms
2025-04-28 16:35:51.298 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/swagger/favicon-32x32.png - 200 628 image/png 8.6814ms
2025-04-28 16:35:51.312 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 20.0422 ms
2025-04-28 16:35:51.314 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7011/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.7488ms
2025-04-28 16:35:53.001 +07:00 [DBG] Connection id "0HNC6707SFNL6" received FIN.
2025-04-28 16:35:53.003 +07:00 [DBG] Connection id "0HNC6707SFNL6" is closed. The last processed stream ID was 17.
2025-04-28 16:35:53.004 +07:00 [DBG] The connection queue processing loop for 0HNC6707SFNL6 completed.
2025-04-28 16:35:53.005 +07:00 [DBG] Connection id "0HNC6707SFNL6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 16:35:53.018 +07:00 [DBG] Connection id "0HNC6707SFNL6" stopped.
2025-04-28 18:51:06.728 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 18:51:06.848 +07:00 [DBG] Hosting starting
2025-04-28 18:51:06.934 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 18:51:06.936 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 18:51:06.938 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 18:51:06.940 +07:00 [INF] Hosting environment: Development
2025-04-28 18:51:06.942 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-28 18:51:06.943 +07:00 [DBG] Hosting started
2025-04-28 18:52:13.229 +07:00 [DBG] Connection id "0HNC69CEO5VVE" accepted.
2025-04-28 18:52:13.235 +07:00 [DBG] Connection id "0HNC69CEO5VVE" started.
2025-04-28 18:52:13.237 +07:00 [DBG] Connection id "0HNC69CEO5VVF" accepted.
2025-04-28 18:52:13.242 +07:00 [DBG] Connection id "0HNC69CEO5VVF" started.
2025-04-28 18:52:13.319 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 18:52:13.338 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 18:52:13.375 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 18:52:13.380 +07:00 [DBG] Request did not match any endpoints
2025-04-28 18:52:13.595 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 199.7621 ms
2025-04-28 18:52:13.602 +07:00 [DBG] Connection id "0HNC69CEO5VVE" completed keep alive response.
2025-04-28 18:52:13.606 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 290.0664ms
2025-04-28 18:52:14.720 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-28 18:52:14.726 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 18:52:14.728 +07:00 [DBG] Request did not match any endpoints
2025-04-28 18:52:14.954 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 222.6537 ms
2025-04-28 18:52:14.959 +07:00 [DBG] Connection id "0HNC69CEO5VVE" completed keep alive response.
2025-04-28 18:52:14.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 240.9675ms
2025-04-28 18:54:15.591 +07:00 [DBG] Connection id "0HNC69CEO5VVF" received FIN.
2025-04-28 18:54:15.601 +07:00 [DBG] Connection id "0HNC69CEO5VVF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 18:54:15.606 +07:00 [DBG] Connection id "0HNC69CEO5VVF" disconnecting.
2025-04-28 18:54:15.611 +07:00 [DBG] Connection id "0HNC69CEO5VVF" stopped.
2025-04-28 18:54:25.548 +07:00 [DBG] Connection id "0HNC69CEO5VVE" disconnecting.
2025-04-28 18:54:25.551 +07:00 [DBG] Connection id "0HNC69CEO5VVE" stopped.
2025-04-28 18:54:25.554 +07:00 [DBG] Connection id "0HNC69CEO5VVE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 22:07:42.686 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-28 22:07:42.903 +07:00 [DBG] Hosting starting
2025-04-28 22:07:42.953 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-28 22:07:42.956 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-28 22:07:42.959 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-28 22:07:42.962 +07:00 [INF] Hosting environment: Development
2025-04-28 22:07:42.965 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-28 22:07:42.967 +07:00 [DBG] Hosting started
2025-04-28 22:08:08.311 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" accepted.
2025-04-28 22:08:08.316 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" started.
2025-04-28 22:08:08.317 +07:00 [DBG] Connection id "0HNC6CPU1CV4L" accepted.
2025-04-28 22:08:08.319 +07:00 [DBG] Connection id "0HNC6CPU1CV4L" started.
2025-04-28 22:08:08.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-28 22:08:08.355 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-28 22:08:08.369 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-28 22:08:08.373 +07:00 [DBG] Request did not match any endpoints
2025-04-28 22:08:08.451 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 70.0570 ms
2025-04-28 22:08:08.459 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:08:08.463 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 117.4583ms
2025-04-28 22:08:09.278 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-28 22:08:09.286 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-28 22:08:09.291 +07:00 [DBG] Request did not match any endpoints
2025-04-28 22:08:09.449 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 154.8264 ms
2025-04-28 22:08:09.452 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:08:09.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 175.2166ms
2025-04-28 22:09:12.255 +07:00 [DBG] Connection id "0HNC6CPU1CV4L" received FIN.
2025-04-28 22:09:12.261 +07:00 [DBG] Connection id "0HNC6CPU1CV4L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 22:09:12.265 +07:00 [DBG] Connection id "0HNC6CPU1CV4L" disconnecting.
2025-04-28 22:09:12.267 +07:00 [DBG] Connection id "0HNC6CPU1CV4L" stopped.
2025-04-28 22:09:28.077 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 33
2025-04-28 22:09:28.084 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-04-28 22:09:28.092 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-04-28 22:09:28.099 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-28 22:09:28.106 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:09:28.108 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-28 22:09:28.110 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-28 22:09:28.151 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-28 22:09:28.156 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:09:28.157 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:09:28.158 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:09:28.160 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:09:28.162 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:09:28.166 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:09:28.266 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-28 22:09:28.286 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:09:28.291 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-04-28 22:09:28.293 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-04-28 22:09:28.296 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:09:28.320 +07:00 [DBG] Connection id "0HNC6CPU1CV4K", Request id "0HNC6CPU1CV4K:00000003": started reading request body.
2025-04-28 22:09:28.323 +07:00 [DBG] Connection id "0HNC6CPU1CV4K", Request id "0HNC6CPU1CV4K:00000003": done reading request body.
2025-04-28 22:09:28.336 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-04-28 22:09:28.337 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-28 22:09:28.338 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-28 22:09:28.340 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-04-28 22:09:28.351 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-28 22:09:28.775 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-28 22:09:28.777 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-28 22:09:28.878 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:09:29.079 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-04-28 22:09:29.260 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-28 22:09:29.307 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:09:29.330 +07:00 [DBG] Created DbConnection. (21ms).
2025-04-28 22:09:29.338 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.565 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.569 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:09:29.574 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-28 22:09:29.576 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-28 22:09:29.583 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-28 22:09:29.621 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-28 22:09:29.655 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:09:29.672 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:09:29.679 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.687 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 58ms reading results.
2025-04-28 22:09:29.690 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.694 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-28 22:09:29.717 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:09:29.728 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:09:29.734 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:09:29.739 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:09:29.748 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 22:09:29.793 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.798 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.802 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:09:29.804 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:09:29.807 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-28 22:09:29.809 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-04-28 22:09:29.828 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-04-28 22:09:29.840 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-28 22:09:29.848 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.849 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 16ms reading results.
2025-04-28 22:09:29.851 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.853 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:09:29.860 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:09:29.864 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 22:09:29.867 +07:00 [INF] Danh mục tạo: Tra Tấn (ID=5) bởi CategoryService
2025-04-28 22:09:29.871 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:09:29.875 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:09:29.876 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:09:29.877 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:09:29.877 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:09:29.880 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:09:29.882 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-04-28 22:09:29.894 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[5],action=[Create],controller=[AdminCategories])
2025-04-28 22:09:29.899 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=5
2025-04-28 22:09:29.904 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=5
2025-04-28 22:09:29.917 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 1750.2898ms
2025-04-28 22:09:29.918 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-28 22:09:29.921 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 1815.5972 ms
2025-04-28 22:09:29.922 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:09:29.925 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:09:29.932 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:09:29.935 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-28 22:09:29.937 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 1859.7259ms
2025-04-28 22:11:31.053 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/admin/categories/5 - application/json 60
2025-04-28 22:11:31.056 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/5'
2025-04-28 22:11:31.068 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/5'
2025-04-28 22:11:31.079 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-28 22:11:31.088 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:11:31.089 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-28 22:11:31.099 +07:00 [INF] Route matched with {action = "Update", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Update(Int32, ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-28 22:11:31.105 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:11:31.106 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:11:31.108 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:11:31.110 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:11:31.111 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:11:31.112 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:11:31.117 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:11:31.118 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:11:31.120 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:11:31.122 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:11:31.123 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:11:31.125 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:11:31.126 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:11:31.127 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-28 22:11:31.129 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' using the name '' in request data ...
2025-04-28 22:11:31.132 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:11:31.135 +07:00 [DBG] Connection id "0HNC6CPU1CV4K", Request id "0HNC6CPU1CV4K:00000004": started reading request body.
2025-04-28 22:11:31.136 +07:00 [DBG] Connection id "0HNC6CPU1CV4K", Request id "0HNC6CPU1CV4K:00000004": done reading request body.
2025-04-28 22:11:31.139 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'
2025-04-28 22:11:31.140 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-28 22:11:31.141 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-28 22:11:31.143 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-28 22:11:31.145 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-28 22:11:31.149 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:11:31.152 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:11:31.154 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:11:31.155 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:11:31.156 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:11:31.157 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:11:31.158 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 22:11:31.167 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument) in 55.1138ms
2025-04-28 22:11:31.169 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-28 22:11:31.170 +07:00 [INF] HTTP PUT /api/admin/categories/5 responded 400 in 81.8317 ms
2025-04-28 22:11:31.171 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:11:31.172 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/admin/categories/5 - 400 null application/json; charset=utf-8 119.564ms
2025-04-28 22:11:43.243 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/admin/categories/5 - application/json 60
2025-04-28 22:11:43.247 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/5'
2025-04-28 22:11:43.249 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/5'
2025-04-28 22:11:43.251 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-28 22:11:43.253 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:11:43.254 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-28 22:11:43.255 +07:00 [INF] Route matched with {action = "Update", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Update(Int32, ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-28 22:11:43.260 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:11:43.264 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:11:43.268 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:11:43.271 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:11:43.272 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:11:43.273 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:11:43.277 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:11:43.279 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:11:43.282 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:11:43.284 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:11:43.285 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:11:43.286 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:11:43.287 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:11:43.289 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-28 22:11:43.290 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' using the name '' in request data ...
2025-04-28 22:11:43.291 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:11:43.292 +07:00 [DBG] Connection id "0HNC6CPU1CV4K", Request id "0HNC6CPU1CV4K:00000005": started reading request body.
2025-04-28 22:11:43.293 +07:00 [DBG] Connection id "0HNC6CPU1CV4K", Request id "0HNC6CPU1CV4K:00000005": done reading request body.
2025-04-28 22:11:43.297 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'
2025-04-28 22:11:43.299 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-28 22:11:43.301 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-28 22:11:43.302 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-28 22:11:43.303 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-28 22:11:43.317 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:11:43.339 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-28 22:11:43.399 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 22:11:43.420 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:11:43.422 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-28 22:11:43.424 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.425 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.426 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:11:43.428 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:11:43.430 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-28 22:11:43.433 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:11:43.437 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:11:43.439 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:11:43.441 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.443 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 22:11:43.444 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.448 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (3ms).
2025-04-28 22:11:43.451 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.453 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.454 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:11:43.455 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:11:43.456 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:11:43.457 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-28 22:11:43.459 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-28 22:11:43.461 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:11:43.464 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:11:43.466 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.467 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 5ms reading results.
2025-04-28 22:11:43.468 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.469 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:11:43.472 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:11:43.473 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:11:43.474 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:11:43.475 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 22:11:43.484 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.486 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.487 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:11:43.488 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:11:43.489 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:11:43.490 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [categories] SET [categoryName] = @p0
OUTPUT 1
WHERE [categoryId] = @p1;
2025-04-28 22:11:43.498 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [categories] SET [categoryName] = @p0
OUTPUT 1
WHERE [categoryId] = @p1;
2025-04-28 22:11:43.501 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.502 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:11:43.504 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.505 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:11:43.506 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:11:43.508 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 22:11:43.509 +07:00 [INF] Cập nhật danh mục: ID=5, 'Tra Tấn' → 'Tra Tấn Dã Man'
2025-04-28 22:11:43.511 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:11:43.514 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:11:43.516 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:11:43.518 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:11:43.518 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:11:43.519 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:11:43.520 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-04-28 22:11:43.521 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument) in 248.301ms
2025-04-28 22:11:43.523 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-28 22:11:43.524 +07:00 [INF] HTTP PUT /api/admin/categories/5 responded 200 in 271.5630 ms
2025-04-28 22:11:43.526 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:11:43.527 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:11:43.528 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:11:43.531 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-28 22:11:43.532 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/admin/categories/5 - 200 null application/json; charset=utf-8 289.5769ms
2025-04-28 22:12:09.747 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/9 - null null
2025-04-28 22:12:09.751 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/9'
2025-04-28 22:12:09.754 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/9'
2025-04-28 22:12:09.755 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-28 22:12:09.757 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:12:09.758 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-28 22:12:09.764 +07:00 [INF] Route matched with {action = "Delete", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-28 22:12:09.767 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:12:09.768 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:12:09.769 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:12:09.770 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:12:09.771 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:12:09.772 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:12:09.773 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:12:09.774 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:12:09.776 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:12:09.778 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:12:09.779 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:12:09.780 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:12:09.782 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:12:09.829 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:12:09.837 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:12:09.838 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:12:09.841 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:09.843 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:09.846 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:12:09.847 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:12:09.849 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 22:12:09.850 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:12:09.853 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:12:09.856 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:09.857 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:12:09.860 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:09.862 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-28 22:12:09.867 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:12:09.869 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 22:12:09.870 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:12:09.871 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:12:09.872 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:12:09.874 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 22:12:09.876 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument) in 104.092ms
2025-04-28 22:12:09.878 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-28 22:12:09.879 +07:00 [INF] HTTP DELETE /api/admin/categories/9 responded 404 in 122.4491 ms
2025-04-28 22:12:09.881 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:12:09.883 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:12:09.884 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:09.885 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:12:09.887 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/9 - 404 null application/json; charset=utf-8 139.4792ms
2025-04-28 22:12:14.730 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/5 - null null
2025-04-28 22:12:14.735 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/5'
2025-04-28 22:12:14.737 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/5'
2025-04-28 22:12:14.741 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-28 22:12:14.744 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:12:14.748 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-28 22:12:14.750 +07:00 [INF] Route matched with {action = "Delete", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-28 22:12:14.752 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:12:14.754 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:12:14.755 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:12:14.756 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:12:14.757 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:12:14.759 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:12:14.761 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-28 22:12:14.763 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:12:14.764 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:12:14.765 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:12:14.766 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:12:14.767 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:12:14.768 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:12:14.770 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:12:14.771 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:12:14.772 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:12:14.773 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.776 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.778 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:12:14.779 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:12:14.781 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 22:12:14.782 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:12:14.785 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:12:14.787 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:12:14.789 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.791 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 22:12:14.792 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.793 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:12:14.797 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:12:14.801 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:12:14.801 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:12:14.803 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 22:12:14.807 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.810 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.811 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:12:14.812 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:12:14.814 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:12:14.816 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [categoryId] = @p0;
2025-04-28 22:12:14.824 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [categoryId] = @p0;
2025-04-28 22:12:14.828 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.830 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:12:14.831 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.832 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:12:14.836 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:12:14.837 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 22:12:14.839 +07:00 [INF] Xóa danh mục: ID=5, Name=Tra Tấn Dã Man
2025-04-28 22:12:14.841 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-28 22:12:14.842 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument) in 82.7184ms
2025-04-28 22:12:14.843 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-28 22:12:14.845 +07:00 [INF] HTTP DELETE /api/admin/categories/5 responded 204 in 100.8323 ms
2025-04-28 22:12:14.848 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:12:14.849 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:12:14.852 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:14.853 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:12:14.854 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/5 - 204 null null 124.7524ms
2025-04-28 22:12:52.626 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Categories - null null
2025-04-28 22:12:52.631 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-04-28 22:12:52.634 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-04-28 22:12:52.635 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)'
2025-04-28 22:12:52.636 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:12:52.638 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)'
2025-04-28 22:12:52.642 +07:00 [INF] Route matched with {action = "GetAll", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]]] GetAll() on controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument).
2025-04-28 22:12:52.645 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:12:52.647 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:12:52.648 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:12:52.649 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:12:52.651 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:12:52.651 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-28 22:12:52.654 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-28 22:12:52.659 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:12:52.661 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:12:52.662 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:12:52.664 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:52.665 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:52.666 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:12:52.667 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:12:52.668 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:12:52.669 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-28 22:12:52.673 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-28 22:12:52.676 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:12:52.678 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:12:52.679 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:52.679 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 22:12:52.680 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:52.681 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:12:52.683 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:12:52.685 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:12:52.687 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:12:52.688 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:12:52.689 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:12:52.690 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:12:52.691 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ExchangeDocument.DataAccessLayer.Entities.Category, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExchangeDocument.BusinessLayer.DTOs.CategoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-28 22:12:52.696 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument) in 44.2199ms
2025-04-28 22:12:52.697 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)'
2025-04-28 22:12:52.698 +07:00 [INF] HTTP GET /api/Categories responded 200 in 61.4459 ms
2025-04-28 22:12:52.699 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:12:52.700 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:12:52.700 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:12:52.701 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 22:12:52.703 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Categories - 200 null application/json; charset=utf-8 77.2884ms
2025-04-28 22:13:22.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Categories/4 - null null
2025-04-28 22:13:22.295 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Categories/4'
2025-04-28 22:13:22.296 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)' with route pattern 'api/Categories/{id}' is valid for the request path '/api/Categories/4'
2025-04-28 22:13:22.301 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-28 22:13:22.305 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:13:22.306 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-28 22:13:22.310 +07:00 [INF] Route matched with {action = "GetById", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] GetById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument).
2025-04-28 22:13:22.312 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:13:22.313 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:13:22.315 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:13:22.318 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:13:22.320 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:13:22.322 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-28 22:13:22.323 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-28 22:13:22.324 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:13:22.325 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:13:22.326 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:13:22.327 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:13:22.328 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:13:22.329 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:13:22.331 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:13:22.335 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:13:22.337 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-28 22:13:22.338 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:13:22.339 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:13:22.341 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:13:22.342 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:13:22.343 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:13:22.344 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:13:22.346 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:13:22.349 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:13:22.351 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:13:22.353 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-28 22:13:22.355 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:13:22.356 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:13:22.358 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:13:22.360 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:13:22.361 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:13:22.362 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:13:22.363 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:13:22.364 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:13:22.366 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-04-28 22:13:22.368 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument) in 46.6765ms
2025-04-28 22:13:22.370 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-28 22:13:22.371 +07:00 [INF] HTTP GET /api/Categories/4 responded 200 in 66.2899 ms
2025-04-28 22:13:22.372 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" completed keep alive response.
2025-04-28 22:13:22.373 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:13:22.374 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:13:22.375 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:13:22.377 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Categories/4 - 200 null application/json; charset=utf-8 86.2283ms
2025-04-28 22:15:32.678 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" disconnecting.
2025-04-28 22:15:32.682 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" stopped.
2025-04-28 22:15:32.686 +07:00 [DBG] Connection id "0HNC6CPU1CV4K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 22:16:43.518 +07:00 [DBG] Connection id "0HNC6CPU1CV4M" accepted.
2025-04-28 22:16:43.520 +07:00 [DBG] Connection id "0HNC6CPU1CV4M" started.
2025-04-28 22:16:43.522 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-28 22:16:43.525 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-28 22:16:43.527 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-28 22:16:43.532 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:16:43.535 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:16:43.537 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:16:43.544 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:16:43.547 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:16:43.549 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:16:43.550 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:16:43.551 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:16:43.553 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:16:43.554 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:16:43.555 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:16:43.557 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:16:43.559 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:16:43.561 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:16:43.562 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:16:43.563 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:16:43.564 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:16:43.567 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:16:43.572 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.Status == "Listed")'
2025-04-28 22:16:43.585 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-28 22:16:43.587 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-28 22:16:43.633 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d.status == N'Listed'))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d.status == N'Listed')), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(8);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(10) ? default(decimal?) : (decimal?)dataReader.GetDecimal(10);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(11) ? default(int?) : (int?)dataReader.GetInt32(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 22:16:43.675 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:16:43.677 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-28 22:16:43.679 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:16:43.680 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:16:43.681 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:16:43.682 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:16:43.682 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:16:43.683 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 22:16:43.689 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 22:16:43.693 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:16:43.694 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:16:43.695 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:16:43.696 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:16:43.697 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:16:43.699 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:16:43.700 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:16:43.701 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:16:43.702 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:16:43.702 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:16:43.704 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 22:16:43.708 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 154.4071ms
2025-04-28 22:16:43.709 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:16:43.711 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 175.9679 ms
2025-04-28 22:16:43.713 +07:00 [DBG] Connection id "0HNC6CPU1CV4M" completed keep alive response.
2025-04-28 22:16:43.714 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:16:43.715 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:16:43.716 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:16:43.717 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 194.9452ms
2025-04-28 22:18:55.190 +07:00 [DBG] Connection id "0HNC6CPU1CV4M" disconnecting.
2025-04-28 22:18:55.192 +07:00 [DBG] Connection id "0HNC6CPU1CV4M" stopped.
2025-04-28 22:18:55.194 +07:00 [DBG] Connection id "0HNC6CPU1CV4M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 22:19:54.855 +07:00 [DBG] Connection id "0HNC6CPU1CV4N" accepted.
2025-04-28 22:19:54.856 +07:00 [DBG] Connection id "0HNC6CPU1CV4N" started.
2025-04-28 22:19:54.858 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 226
2025-04-28 22:19:54.860 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-28 22:19:54.861 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-28 22:19:54.863 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:19:54.866 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:19:54.867 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:19:54.875 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:19:54.879 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:19:54.880 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:19:54.882 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:19:54.886 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:19:54.887 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:19:54.889 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:19:54.892 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:19:54.894 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:19:54.895 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-28 22:19:54.896 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:19:54.907 +07:00 [DBG] Connection id "0HNC6CPU1CV4N", Request id "0HNC6CPU1CV4N:00000001": started reading request body.
2025-04-28 22:19:54.908 +07:00 [DBG] Connection id "0HNC6CPU1CV4N", Request id "0HNC6CPU1CV4N:00000001": done reading request body.
2025-04-28 22:19:54.913 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-28 22:19:54.915 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:19:54.918 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:19:54.921 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:19:54.927 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:19:54.928 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-28 22:19:54.930 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-28 22:19:54.932 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:19:54.936 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 22:19:54.938 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 22:19:54.940 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 22:19:54.941 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-28 22:19:54.961 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 72.2017ms
2025-04-28 22:19:54.962 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:19:54.964 +07:00 [INF] HTTP POST /api/Documents responded 400 in 98.3752 ms
2025-04-28 22:19:54.967 +07:00 [DBG] Connection id "0HNC6CPU1CV4N" completed keep alive response.
2025-04-28 22:19:54.969 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 111.4743ms
2025-04-28 22:22:06.671 +07:00 [DBG] Connection id "0HNC6CPU1CV4N" disconnecting.
2025-04-28 22:22:06.674 +07:00 [DBG] Connection id "0HNC6CPU1CV4N" stopped.
2025-04-28 22:22:06.677 +07:00 [DBG] Connection id "0HNC6CPU1CV4N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 22:22:19.045 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" accepted.
2025-04-28 22:22:19.047 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" started.
2025-04-28 22:22:19.049 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 218
2025-04-28 22:22:19.052 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-28 22:22:19.054 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-28 22:22:19.055 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:22:19.057 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:22:19.058 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:22:19.059 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:22:19.063 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:22:19.067 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:22:19.069 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:22:19.073 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:22:19.075 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:22:19.077 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:22:19.080 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:22:19.082 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:22:19.083 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-28 22:22:19.085 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:22:19.088 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000001": started reading request body.
2025-04-28 22:22:19.089 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000001": done reading request body.
2025-04-28 22:22:19.097 +07:00 [DBG] JSON input formatter threw an exception: ',' is an invalid start of a value. Path: $.price | LineNumber: 8 | BytePositionInLine: 11.
2025-04-28 22:22:19.099 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:22:19.101 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:22:19.103 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:22:19.105 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:22:19.106 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-28 22:22:19.106 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-28 22:22:19.107 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:22:19.110 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 22:22:19.111 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 22:22:19.113 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 22:22:19.115 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-28 22:22:19.116 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 39.2732ms
2025-04-28 22:22:19.117 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:22:19.119 +07:00 [INF] HTTP POST /api/Documents responded 400 in 62.5573 ms
2025-04-28 22:22:19.121 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:22:19.123 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 73.4707ms
2025-04-28 22:22:30.197 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 220
2025-04-28 22:22:30.201 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-28 22:22:30.202 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-28 22:22:30.204 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:22:30.205 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:22:30.222 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:22:30.224 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:22:30.227 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:22:30.235 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:22:30.236 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:22:30.240 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:22:30.242 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:22:30.245 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:22:30.248 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:22:30.250 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:22:30.253 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-28 22:22:30.254 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:22:30.256 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000002": started reading request body.
2025-04-28 22:22:30.257 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000002": done reading request body.
2025-04-28 22:22:30.259 +07:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Nullable`1[System.Decimal]. Path: $.price | LineNumber: 8 | BytePositionInLine: 13.
2025-04-28 22:22:30.260 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:22:30.261 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:22:30.263 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:22:30.265 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:22:30.266 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-28 22:22:30.268 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-28 22:22:30.269 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:22:30.271 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 22:22:30.272 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 22:22:30.273 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 22:22:30.274 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-28 22:22:30.275 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 29.8957ms
2025-04-28 22:22:30.275 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:22:30.276 +07:00 [INF] HTTP POST /api/Documents responded 400 in 70.8841 ms
2025-04-28 22:22:30.277 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:22:30.278 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 81.3929ms
2025-04-28 22:23:39.147 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 348
2025-04-28 22:23:39.150 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-28 22:23:39.152 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-28 22:23:39.155 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:23:39.157 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:23:39.157 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:23:39.161 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:23:39.164 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:23:39.168 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:23:39.171 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:23:39.175 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:23:39.177 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:23:39.179 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:23:39.181 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:23:39.182 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:23:39.183 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-28 22:23:39.185 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:23:39.187 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000003": started reading request body.
2025-04-28 22:23:39.189 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000003": done reading request body.
2025-04-28 22:23:39.191 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-28 22:23:39.193 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:23:39.195 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:23:39.197 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:23:39.198 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:23:39.202 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:23:39.205 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:23:39.206 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-28 22:23:39.207 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:23:39.212 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:23:39.214 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:23:39.215 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:23:39.217 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:23:39.218 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:23:39.222 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:23:39.226 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:23:39.228 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:23:39.229 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:23:39.231 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:23:39.233 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:23:39.236 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 22:23:39.238 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:23:39.239 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:23:39.241 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:23:39.243 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 22:23:39.245 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 66.0323ms
2025-04-28 22:23:39.247 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:23:39.248 +07:00 [INF] HTTP POST /api/Documents responded 400 in 91.2167 ms
2025-04-28 22:23:39.249 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:23:39.251 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:23:39.251 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:23:39.253 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:23:39.255 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/json; charset=utf-8 107.5127ms
2025-04-28 22:24:01.350 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 348
2025-04-28 22:24:01.353 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-28 22:24:01.354 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-28 22:24:01.356 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:24:01.359 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:24:01.360 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:24:01.361 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:24:01.363 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:24:01.365 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:24:01.367 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:24:01.371 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:24:01.376 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:24:01.380 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:24:01.382 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:24:01.384 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:24:01.387 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-28 22:24:01.389 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:24:01.391 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000004": started reading request body.
2025-04-28 22:24:01.393 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000004": done reading request body.
2025-04-28 22:24:01.394 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-28 22:24:01.395 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:24:01.396 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:24:01.398 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-28 22:24:01.399 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-28 22:24:01.404 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:24:01.408 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:24:01.409 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:24:01.409 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.410 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.411 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:24:01.412 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:24:01.413 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:24:01.414 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:24:01.416 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:24:01.419 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:24:01.420 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.421 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 22:24:01.423 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.424 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:24:01.427 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:24:01.459 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:24:01.469 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:24:01.471 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:24:01.472 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:24:01.481 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 22:24:01.486 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.488 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.490 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:24:01.490 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:24:01.492 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:24:01.493 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [DeletedAt], [description], [edition], [imageUrl], [IsDeleted], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-04-28 22:24:01.506 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [DeletedAt], [description], [edition], [imageUrl], [IsDeleted], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-04-28 22:24:01.510 +07:00 [DBG] The foreign key property 'Document.DocumentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-28 22:24:01.512 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.513 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-28 22:24:01.515 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.515 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:24:01.520 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:24:01.522 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 22:24:01.524 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:24:01.526 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 22:24:01.526 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:24:01.527 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:24:01.528 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:24:01.529 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDto'.
2025-04-28 22:24:01.531 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] for address (id=[10],action=[GetDocumentById],controller=[Documents])
2025-04-28 22:24:01.532 +07:00 [DBG] Successfully processed template api/Documents/{id} for ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) resulting in /api/Documents/10 and 
2025-04-28 22:24:01.534 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] with result /api/Documents/10
2025-04-28 22:24:01.546 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 166.5813ms
2025-04-28 22:24:01.548 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-28 22:24:01.550 +07:00 [INF] HTTP POST /api/Documents responded 201 in 190.5845 ms
2025-04-28 22:24:01.553 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:24:01.554 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:24:01.557 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:01.558 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:24:01.559 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 201 null application/json; charset=utf-8 209.0885ms
2025-04-28 22:24:32.084 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-28 22:24:32.087 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 22:24:32.088 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 22:24:32.091 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:24:32.093 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:24:32.096 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:24:32.098 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:24:32.101 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:24:32.104 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:24:32.105 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:24:32.107 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:24:32.108 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:24:32.109 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:24:32.110 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:24:32.112 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:24:32.114 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:24:32.116 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:24:32.118 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:24:32.119 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:24:32.120 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:24:32.122 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:24:32.124 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:24:32.125 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:24:32.125 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:32.127 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:32.128 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:24:32.129 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:24:32.130 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:24:32.133 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 22:24:32.137 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 22:24:32.140 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:32.141 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:24:32.142 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:32.143 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:24:32.145 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:24:32.149 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:24:32.152 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:24:32.153 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:24:32.154 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:24:32.155 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:24:32.157 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 22:24:32.158 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 49.0401ms
2025-04-28 22:24:32.159 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:24:32.161 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 67.5342 ms
2025-04-28 22:24:32.162 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:24:32.163 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:24:32.166 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:24:32.168 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:24:32.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 85.2359ms
2025-04-28 22:25:26.494 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/5 - null null
2025-04-28 22:25:26.497 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-28 22:25:26.498 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-28 22:25:26.501 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:25:26.502 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:25:26.503 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:25:26.506 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:25:26.510 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:25:26.513 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:25:26.515 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:25:26.517 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:25:26.518 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:25:26.519 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:25:26.520 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:25:26.521 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:25:26.523 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:25:26.525 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:25:26.527 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:25:26.528 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:25:26.529 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:25:26.531 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:25:26.533 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:25:26.533 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:25:26.534 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:25:26.536 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:25:26.537 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:25:26.537 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:25:26.540 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:25:26.543 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 22:25:26.547 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-28 22:25:26.552 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:25:26.556 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:25:26.558 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:25:26.565 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:25:26.568 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:25:26.576 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:25:26.578 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 28ms reading results.
2025-04-28 22:25:26.580 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:25:26.581 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:25:26.583 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:25:26.586 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:25:26.587 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:25:26.588 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:25:26.589 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:25:26.590 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:25:26.593 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-28 22:25:26.598 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 78.8181ms
2025-04-28 22:25:26.599 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-28 22:25:26.600 +07:00 [INF] HTTP GET /api/Documents/5 responded 200 in 97.6497 ms
2025-04-28 22:25:26.601 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:25:26.602 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:25:26.603 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:25:26.604 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 22:25:26.605 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/5 - 200 null application/json; charset=utf-8 110.6092ms
2025-04-28 22:26:46.375 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 230
2025-04-28 22:26:46.380 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 22:26:46.381 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 22:26:46.383 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:26:46.383 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:26:46.384 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:26:46.390 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:26:46.392 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:26:46.393 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:26:46.394 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:26:46.395 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:26:46.398 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:26:46.400 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:26:46.401 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:26:46.402 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:26:46.403 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:26:46.404 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:26:46.405 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:26:46.406 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:26:46.406 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:26:46.407 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:26:46.408 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 22:26:46.409 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:26:46.411 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000007": started reading request body.
2025-04-28 22:26:46.412 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000007": done reading request body.
2025-04-28 22:26:46.416 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 22:26:46.417 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:26:46.417 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:26:46.418 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:26:46.422 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:26:46.422 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-28 22:26:46.423 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-28 22:26:46.424 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:26:46.426 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-28 22:26:46.428 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:26:46.429 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 22:26:46.432 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 22:26:46.433 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-28 22:26:46.434 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 34.2661ms
2025-04-28 22:26:46.435 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:26:46.436 +07:00 [INF] HTTP PUT /api/Documents/9 responded 400 in 52.5198 ms
2025-04-28 22:26:46.437 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:26:46.438 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 400 null application/problem+json; charset=utf-8 63.0066ms
2025-04-28 22:26:58.934 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 352
2025-04-28 22:26:58.938 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 22:26:58.939 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 22:26:58.941 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:26:58.943 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:26:58.945 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:26:58.947 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:26:58.950 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:26:58.951 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:26:58.953 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:26:58.955 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:26:58.957 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:26:58.960 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:26:58.962 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:26:58.965 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:26:58.967 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:26:58.968 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:26:58.969 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:26:58.974 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:26:58.976 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:26:58.977 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:26:58.978 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 22:26:58.981 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:26:58.982 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000008": started reading request body.
2025-04-28 22:26:58.984 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000008": done reading request body.
2025-04-28 22:26:58.985 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 22:26:58.986 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:26:58.987 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:26:58.988 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:26:58.990 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:26:58.994 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:26:59.002 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:26:59.003 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-28 22:26:59.007 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:26:59.013 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:26:59.015 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:26:59.016 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:26:59.019 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 22:26:59.020 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:26:59.025 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:26:59.028 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:26:59.030 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:26:59.032 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:26:59.033 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:26:59.035 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:26:59.036 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:26:59.038 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:26:59.039 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:26:59.039 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:26:59.040 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:26:59.041 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 22:26:59.042 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 82.5529ms
2025-04-28 22:26:59.044 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:26:59.046 +07:00 [INF] HTTP PUT /api/Documents/9 responded 400 in 102.2863 ms
2025-04-28 22:26:59.047 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:26:59.048 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:26:59.051 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:26:59.052 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:26:59.053 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 400 null application/json; charset=utf-8 119.544ms
2025-04-28 22:27:16.760 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 343
2025-04-28 22:27:16.764 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-28 22:27:16.765 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-28 22:27:16.768 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:27:16.769 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:27:16.773 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:27:16.774 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:27:16.777 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:27:16.778 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:27:16.780 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:27:16.782 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:27:16.783 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:27:16.784 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:27:16.786 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:27:16.787 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:27:16.788 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:27:16.789 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:27:16.790 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:27:16.792 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:27:16.794 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:27:16.795 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:27:16.797 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 22:27:16.799 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:27:16.800 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000009": started reading request body.
2025-04-28 22:27:16.801 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:00000009": done reading request body.
2025-04-28 22:27:16.803 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 22:27:16.804 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:27:16.805 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:27:16.807 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:27:16.808 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:27:16.811 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:27:16.814 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:27:16.814 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:27:16.815 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.816 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.817 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:27:16.818 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:27:16.818 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:27:16.819 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:27:16.823 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:27:16.826 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:16.828 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.829 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-28 22:27:16.830 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.831 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:27:16.833 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0)'
2025-04-28 22:27:16.836 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-28 22:27:16.837 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-28 22:27:16.846 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.Edition (string) MaxLength(100), 6], [Property: Document.ImageUrl (string) MaxLength(500), 7], [Property: Document.IsDeleted (bool) Required, 8], [Property: Document.Isbn (string) MaxLength(20), 9], [Property: Document.Price (decimal?), 10], [Property: Document.PublicationYear (int?), 11], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(8);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(10) ? default(decimal?) : (decimal?)dataReader.GetDecimal(10);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(11) ? default(int?) : (int?)dataReader.GetInt32(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-28 22:27:16.877 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.878 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.879 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:27:16.880 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:27:16.881 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:27:16.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:27:16.887 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:27:16.890 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:16.891 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:16.893 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:16.895 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.896 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 6ms reading results.
2025-04-28 22:27:16.898 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.899 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:27:16.900 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:27:16.902 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-28 22:27:16.904 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:27:16.906 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-28 22:27:16.908 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-28 22:27:16.909 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-28 22:27:16.913 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 128.7974ms
2025-04-28 22:27:16.914 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:27:16.915 +07:00 [INF] HTTP PUT /api/Documents/9 responded 403 in 145.9511 ms
2025-04-28 22:27:16.916 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:27:16.917 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:27:16.918 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:16.919 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-28 22:27:16.920 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 403 null application/problem+json; charset=utf-8 160.0458ms
2025-04-28 22:27:33.587 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/10 - application/json 343
2025-04-28 22:27:33.590 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/10'
2025-04-28 22:27:33.593 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/10'
2025-04-28 22:27:33.596 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:27:33.597 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:27:33.599 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:27:33.600 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:27:33.621 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:27:33.624 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:27:33.631 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:27:33.635 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:27:33.637 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:27:33.639 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:27:33.643 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:27:33.645 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:27:33.648 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:27:33.649 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:27:33.650 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:27:33.651 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:27:33.652 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:27:33.653 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:27:33.654 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-28 22:27:33.655 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-28 22:27:33.657 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:0000000A": started reading request body.
2025-04-28 22:27:33.659 +07:00 [DBG] Connection id "0HNC6CPU1CV4O", Request id "0HNC6CPU1CV4O:0000000A": done reading request body.
2025-04-28 22:27:33.660 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-28 22:27:33.661 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:27:33.662 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:27:33.663 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-28 22:27:33.665 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-28 22:27:33.667 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:27:33.669 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:27:33.669 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:27:33.670 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.671 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.672 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:27:33.673 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:27:33.676 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-28 22:27:33.677 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:27:33.679 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-28 22:27:33.681 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.682 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.683 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-28 22:27:33.684 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.685 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:27:33.687 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.688 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.689 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:27:33.690 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:27:33.691 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:27:33.692 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:27:33.695 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:27:33.697 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.699 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.700 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.701 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.702 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.703 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.704 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 6ms reading results.
2025-04-28 22:27:33.705 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.706 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-28 22:27:33.709 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.710 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:27:33.711 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:27:33.712 +07:00 [DBG] The foreign key property 'Document.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-28 22:27:33.714 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.719 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 22:27:33.720 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.721 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.722 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:27:33.723 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:27:33.725 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-28 22:27:33.726 +07:00 [DBG] Executing DbCommand [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [edition] = @p5, [imageUrl] = @p6, [IsDeleted] = @p7, [ISBN] = @p8, [price] = @p9, [publicationYear] = @p10, [status] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-28 22:27:33.732 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [edition] = @p5, [imageUrl] = @p6, [IsDeleted] = @p7, [ISBN] = @p8, [price] = @p9, [publicationYear] = @p10, [status] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-28 22:27:33.734 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.735 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-28 22:27:33.736 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.737 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:27:33.738 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:27:33.740 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 22:27:33.742 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:27:33.743 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-28 22:27:33.744 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-28 22:27:33.745 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:27:33.746 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:27:33.746 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:27:33.747 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-28 22:27:33.748 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 109.7659ms
2025-04-28 22:27:33.749 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-28 22:27:33.750 +07:00 [INF] HTTP PUT /api/Documents/10 responded 200 in 152.6436 ms
2025-04-28 22:27:33.751 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" completed keep alive response.
2025-04-28 22:27:33.752 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:27:33.753 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:27:33.753 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 22:27:33.754 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/10 - 200 null application/json; charset=utf-8 167.2407ms
2025-04-28 22:27:59.593 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" received FIN.
2025-04-28 22:27:59.595 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" disconnecting.
2025-04-28 22:27:59.597 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 22:27:59.609 +07:00 [DBG] Connection id "0HNC6CPU1CV4O" stopped.
2025-04-28 22:29:47.644 +07:00 [DBG] Connection id "0HNC6CPU1CV4P" accepted.
2025-04-28 22:29:47.648 +07:00 [DBG] Connection id "0HNC6CPU1CV4P" started.
2025-04-28 22:29:47.649 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/10 - null null
2025-04-28 22:29:47.651 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/10'
2025-04-28 22:29:47.652 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/10'
2025-04-28 22:29:47.671 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 22:29:47.673 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:29:47.675 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 22:29:47.683 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:29:47.686 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:29:47.688 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:29:47.689 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:29:47.691 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:29:47.693 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:29:47.694 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:29:47.695 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:29:47.696 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:29:47.697 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:29:47.698 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:29:47.699 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:29:47.700 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:29:47.700 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:29:47.703 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:29:47.704 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:29:47.705 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:29:47.706 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.707 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.708 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:29:47.709 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:29:47.710 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:29:47.711 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:29:47.717 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:29:47.719 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:29:47.720 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:29:47.721 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:29:47.722 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:29:47.723 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:29:47.724 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.725 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 6ms reading results.
2025-04-28 22:29:47.726 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.727 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:29:47.729 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:29:47.730 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:29:47.731 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-28 22:29:47.731 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-28 22:29:47.732 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.733 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.734 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:29:47.735 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:29:47.736 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:29:47.736 +07:00 [DBG] Executing DbCommand [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [edition] = @p5, [imageUrl] = @p6, [IsDeleted] = @p7, [ISBN] = @p8, [price] = @p9, [publicationYear] = @p10, [status] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-28 22:29:47.744 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 500), @p7='?' (DbType = Boolean), @p8='?' (Size = 20), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [edition] = @p5, [imageUrl] = @p6, [IsDeleted] = @p7, [ISBN] = @p8, [price] = @p9, [publicationYear] = @p10, [status] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-28 22:29:47.746 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.747 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-28 22:29:47.748 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.749 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:29:47.751 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:29:47.752 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-28 22:29:47.753 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-28 22:29:47.754 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 60.0669ms
2025-04-28 22:29:47.755 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 22:29:47.756 +07:00 [INF] HTTP DELETE /api/Documents/10 responded 204 in 83.1764 ms
2025-04-28 22:29:47.758 +07:00 [DBG] Connection id "0HNC6CPU1CV4P" completed keep alive response.
2025-04-28 22:29:47.759 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:29:47.760 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:29:47.760 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 22:29:47.762 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/10 - 204 null null 112.3476ms
2025-04-28 22:31:58.970 +07:00 [DBG] Connection id "0HNC6CPU1CV4P" disconnecting.
2025-04-28 22:31:58.973 +07:00 [DBG] Connection id "0HNC6CPU1CV4P" stopped.
2025-04-28 22:31:58.975 +07:00 [DBG] Connection id "0HNC6CPU1CV4P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-28 22:35:41.188 +07:00 [DBG] Connection id "0HNC6CPU1CV4Q" accepted.
2025-04-28 22:35:41.192 +07:00 [DBG] Connection id "0HNC6CPU1CV4Q" started.
2025-04-28 22:35:41.193 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/5 - null null
2025-04-28 22:35:41.196 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-28 22:35:41.198 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-28 22:35:41.217 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 22:35:41.220 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-28 22:35:41.222 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 22:35:41.225 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-28 22:35:41.228 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-28 22:35:41.231 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-28 22:35:41.234 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-28 22:35:41.236 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-28 22:35:41.237 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-28 22:35:41.238 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:35:41.239 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-28 22:35:41.240 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-28 22:35:41.241 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-28 22:35:41.242 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:35:41.242 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-28 22:35:41.243 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-28 22:35:41.244 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-28 22:35:41.247 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-28 22:35:41.249 +07:00 [DBG] Creating DbConnection.
2025-04-28 22:35:41.249 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-28 22:35:41.250 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:35:41.254 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:35:41.255 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-28 22:35:41.256 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-28 22:35:41.257 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-28 22:35:41.257 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:35:41.264 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-28 22:35:41.266 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:35:41.267 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:35:41.268 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:35:41.269 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:35:41.270 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-28 22:35:41.271 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:35:41.272 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 5ms reading results.
2025-04-28 22:35:41.273 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:35:41.274 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-28 22:35:41.275 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-28 22:35:41.277 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-28 22:35:41.278 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-28 22:35:41.279 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-28 22:35:41.280 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-28 22:35:41.280 +07:00 [INF] Executing ConflictObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-28 22:35:41.282 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 43.881ms
2025-04-28 22:35:41.283 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-28 22:35:41.284 +07:00 [INF] HTTP DELETE /api/Documents/5 responded 409 in 63.6766 ms
2025-04-28 22:35:41.285 +07:00 [DBG] Connection id "0HNC6CPU1CV4Q" completed keep alive response.
2025-04-28 22:35:41.286 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-28 22:35:41.287 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-28 22:35:41.288 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-28 22:35:41.289 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/5 - 409 null application/json; charset=utf-8 95.5875ms
2025-04-28 22:37:52.615 +07:00 [DBG] Connection id "0HNC6CPU1CV4Q" disconnecting.
2025-04-28 22:37:52.617 +07:00 [DBG] Connection id "0HNC6CPU1CV4Q" stopped.
2025-04-28 22:37:52.618 +07:00 [DBG] Connection id "0HNC6CPU1CV4Q" sending FIN because: "The Socket transport's send loop completed gracefully."
