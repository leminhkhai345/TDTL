2025-04-29 15:02:35.680 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 15:02:36.075 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:02:36.079 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:02:36.182 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:02:36.798 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:03:20.957 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 15:03:21.476 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:03:21.481 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:03:21.607 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:03:21.737 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:03:21.782 +07:00 [DBG] Created DbConnection. (43ms).
2025-04-29 15:03:21.787 +07:00 [DBG] Migrating using database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:21.796 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.015 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.022 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.031 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (8ms).
2025-04-29 15:03:22.036 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (15ms).
2025-04-29 15:03:22.042 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-29 15:03:22.065 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-29 15:03:22.071 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.082 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (7ms).
2025-04-29 15:03:22.085 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.088 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.091 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-29 15:03:22.097 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-29 15:03:22.098 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-04-29 15:03:22.099 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-04-29 15:03:22.101 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-29 15:03:22.129 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-29 15:03:22.188 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-29 15:03:22.196 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-29 15:03:22.199 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.201 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.203 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-04-29 15:03:22.204 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-29 15:03:22.208 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-29 15:03:22.213 +07:00 [DBG] Committing transaction.
2025-04-29 15:03:22.218 +07:00 [DBG] Committed transaction.
2025-04-29 15:03:22.220 +07:00 [DBG] Disposing transaction.
2025-04-29 15:03:22.224 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-29 15:03:22.226 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-29 15:03:22.229 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.231 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.232 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-04-29 15:03:22.233 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-29 15:03:22.235 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-29 15:03:22.238 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-29 15:03:22.239 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-04-29 15:03:22.240 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-04-29 15:03:22.242 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-29 15:03:22.245 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-29 15:03:22.248 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:03:22.249 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:03:22.251 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:03:22.253 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-29 15:03:22.264 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-29 15:03:22.268 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.271 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-29 15:03:22.279 +07:00 [INF] Applying migration '20250429080236_SplitStatusToDocumentStatus'.
2025-04-29 15:03:22.317 +07:00 [DBG] Executing 5 update commands as a batch.
2025-04-29 15:03:22.328 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.331 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.334 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (5ms).
2025-04-29 15:03:22.335 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[document]') AND [c].[name] = N'status');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [document] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [document] DROP COLUMN [status];
2025-04-29 15:03:22.412 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[document]') AND [c].[name] = N'status');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [document] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [document] DROP COLUMN [status];
2025-04-29 15:03:22.417 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.419 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.420 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.421 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD [statusId] int NOT NULL DEFAULT 1;
2025-04-29 15:03:22.430 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD [statusId] int NOT NULL DEFAULT 1;
2025-04-29 15:03:22.432 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.434 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.436 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-04-29 15:03:22.438 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [documentStatus] (
    [documentStatusId] int NOT NULL IDENTITY,
    [statusCode] nvarchar(50) NOT NULL,
    [statusName] nvarchar(50) NOT NULL,
    CONSTRAINT [PK_DocumentStatus] PRIMARY KEY ([documentStatusId])
);
2025-04-29 15:03:22.442 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [documentStatus] (
    [documentStatusId] int NOT NULL IDENTITY,
    [statusCode] nvarchar(50) NOT NULL,
    [statusName] nvarchar(50) NOT NULL,
    CONSTRAINT [PK_DocumentStatus] PRIMARY KEY ([documentStatusId])
);
2025-04-29 15:03:22.446 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.447 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-04-29 15:03:22.448 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.449 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'documentStatusId', N'statusCode', N'statusName') AND [object_id] = OBJECT_ID(N'[documentStatus]'))
    SET IDENTITY_INSERT [documentStatus] ON;
INSERT INTO [documentStatus] ([documentStatusId], [statusCode], [statusName])
VALUES (1, N'InStock', N'In Stock'),
(2, N'Listed', N'Listed'),
(3, N'PendingSale', N'Pending Sale'),
(4, N'Sold', N'Sold'),
(5, N'Cancelled', N'Cancelled');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'documentStatusId', N'statusCode', N'statusName') AND [object_id] = OBJECT_ID(N'[documentStatus]'))
    SET IDENTITY_INSERT [documentStatus] OFF;
2025-04-29 15:03:22.469 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'documentStatusId', N'statusCode', N'statusName') AND [object_id] = OBJECT_ID(N'[documentStatus]'))
    SET IDENTITY_INSERT [documentStatus] ON;
INSERT INTO [documentStatus] ([documentStatusId], [statusCode], [statusName])
VALUES (1, N'InStock', N'In Stock'),
(2, N'Listed', N'Listed'),
(3, N'PendingSale', N'Pending Sale'),
(4, N'Sold', N'Sold'),
(5, N'Cancelled', N'Cancelled');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'documentStatusId', N'statusCode', N'statusName') AND [object_id] = OBJECT_ID(N'[documentStatus]'))
    SET IDENTITY_INSERT [documentStatus] OFF;
2025-04-29 15:03:22.472 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.473 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-04-29 15:03:22.475 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-04-29 15:03:22.476 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_document_statusId] ON [document] ([statusId]);
2025-04-29 15:03:22.498 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_document_statusId] ON [document] ([statusId]);
2025-04-29 15:03:22.501 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.502 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-04-29 15:03:22.504 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-04-29 15:03:22.506 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD CONSTRAINT [FK_Document_DocumentStatus] FOREIGN KEY ([statusId]) REFERENCES [documentStatus] ([documentStatusId]);
2025-04-29 15:03:22.516 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [document] ADD CONSTRAINT [FK_Document_DocumentStatus] FOREIGN KEY ([statusId]) REFERENCES [documentStatus] ([documentStatusId]);
2025-04-29 15:03:22.518 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-29 15:03:22.518 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-29 15:03:22.519 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-04-29 15:03:22.520 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250429080236_SplitStatusToDocumentStatus', N'9.0.4');
2025-04-29 15:03:22.523 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250429080236_SplitStatusToDocumentStatus', N'9.0.4');
2025-04-29 15:03:22.525 +07:00 [DBG] Committing transaction.
2025-04-29 15:03:22.529 +07:00 [DBG] Committed transaction.
2025-04-29 15:03:22.531 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-29 15:03:22.532 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-04-29 15:03:22.534 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-04-29 15:03:22.534 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-29 15:03:22.539 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-29 15:03:22.542 +07:00 [DBG] Disposing transaction.
2025-04-29 15:03:22.542 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.545 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (3ms).
2025-04-29 15:03:22.549 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:03:22.552 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:03:22.555 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 15:06:58.024 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 15:06:58.110 +07:00 [DBG] Hosting starting
2025-04-29 15:06:58.156 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 15:06:58.159 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 15:06:58.161 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 15:06:58.162 +07:00 [INF] Hosting environment: Development
2025-04-29 15:06:58.162 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 15:06:58.163 +07:00 [DBG] Hosting started
2025-04-29 15:07:28.338 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" accepted.
2025-04-29 15:07:28.340 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" started.
2025-04-29 15:07:28.341 +07:00 [DBG] Connection id "0HNC6UJH4RFHP" accepted.
2025-04-29 15:07:28.346 +07:00 [DBG] Connection id "0HNC6UJH4RFHP" started.
2025-04-29 15:07:28.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 15:07:28.396 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 15:07:28.412 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 15:07:28.415 +07:00 [DBG] Request did not match any endpoints
2025-04-29 15:07:28.509 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 84.9734 ms
2025-04-29 15:07:28.514 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:07:28.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 129.8386ms
2025-04-29 15:07:29.440 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 15:07:29.445 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 15:07:29.447 +07:00 [DBG] Request did not match any endpoints
2025-04-29 15:07:29.603 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 154.0966 ms
2025-04-29 15:07:29.605 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:07:29.607 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 166.3417ms
2025-04-29 15:08:39.310 +07:00 [DBG] Connection id "0HNC6UJH4RFHP" received FIN.
2025-04-29 15:08:39.313 +07:00 [DBG] Connection id "0HNC6UJH4RFHP" disconnecting.
2025-04-29 15:08:39.318 +07:00 [DBG] Connection id "0HNC6UJH4RFHP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 15:08:39.335 +07:00 [DBG] Connection id "0HNC6UJH4RFHP" stopped.
2025-04-29 15:08:49.367 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 28
2025-04-29 15:08:49.377 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-04-29 15:08:49.392 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-04-29 15:08:49.397 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-29 15:08:49.406 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:08:49.410 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 15:08:49.413 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-29 15:08:49.439 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-29 15:08:49.443 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:08:49.445 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:08:49.447 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:08:49.450 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:08:49.452 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:08:49.455 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:08:49.516 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 15:08:49.530 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:08:49.538 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-04-29 15:08:49.542 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-04-29 15:08:49.546 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:08:49.571 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000003": started reading request body.
2025-04-29 15:08:49.575 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000003": done reading request body.
2025-04-29 15:08:49.591 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-04-29 15:08:49.593 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-29 15:08:49.595 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-29 15:08:49.597 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-04-29 15:08:49.608 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-29 15:08:49.613 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-29 15:08:49.616 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-29 15:08:49.619 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:08:49.626 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-29 15:08:49.631 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:08:49.633 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-29 15:08:49.638 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-29 15:08:49.641 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-29 15:08:49.673 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 214.7886ms
2025-04-29 15:08:49.676 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-29 15:08:49.678 +07:00 [INF] HTTP POST /api/admin/categories responded 400 in 275.1068 ms
2025-04-29 15:08:49.680 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:08:49.684 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 400 null application/problem+json; charset=utf-8 316.9726ms
2025-04-29 15:09:02.950 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 28
2025-04-29 15:09:02.954 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-04-29 15:09:02.957 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-04-29 15:09:02.960 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-29 15:09:02.963 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:09:02.964 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-29 15:09:02.968 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-29 15:09:02.971 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:09:02.973 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:09:02.974 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:09:02.977 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:09:02.980 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:09:02.982 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:09:02.993 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:09:02.995 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-04-29 15:09:02.998 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-04-29 15:09:03.000 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:09:03.002 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000004": started reading request body.
2025-04-29 15:09:03.004 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000004": done reading request body.
2025-04-29 15:09:03.006 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-04-29 15:09:03.008 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-29 15:09:03.009 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-29 15:09:03.010 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-04-29 15:09:03.012 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-04-29 15:09:03.347 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:09:03.352 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:09:03.489 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:09:03.519 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-04-29 15:09:03.715 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 15:09:03.758 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:09:03.774 +07:00 [DBG] Created DbConnection. (14ms).
2025-04-29 15:09:03.777 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:03.899 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:03.903 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:09:03.910 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-29 15:09:03.912 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-29 15:09:03.920 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-29 15:09:03.949 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-29 15:09:03.978 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:09:03.995 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:09:04.004 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:04.010 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 53ms reading results.
2025-04-29 15:09:04.012 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:04.019 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-04-29 15:09:04.040 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:09:04.052 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:09:04.059 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:09:04.061 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:09:04.070 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-29 15:09:04.113 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:04.117 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:04.123 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:09:04.125 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:09:04.128 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-29 15:09:04.130 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-04-29 15:09:04.148 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-04-29 15:09:04.160 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 15:09:04.166 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:04.169 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-04-29 15:09:04.171 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:04.172 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:09:04.181 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:09:04.185 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-29 15:09:04.188 +07:00 [INF] Danh mục tạo: 2005 (ID=6) bởi CategoryService
2025-04-29 15:09:04.191 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:09:04.194 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:09:04.195 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:09:04.196 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:09:04.196 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:09:04.197 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:09:04.198 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-04-29 15:09:04.210 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[6],action=[Create],controller=[AdminCategories])
2025-04-29 15:09:04.213 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=6
2025-04-29 15:09:04.215 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=6
2025-04-29 15:09:04.221 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 1239.5479ms
2025-04-29 15:09:04.223 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-04-29 15:09:04.226 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 1263.3577 ms
2025-04-29 15:09:04.228 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:09:04.229 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:09:04.232 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:09:04.235 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 15:09:04.237 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 1287.669ms
2025-04-29 15:10:16.322 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/admin/categories/4 - application/json 55
2025-04-29 15:10:16.328 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/4'
2025-04-29 15:10:16.329 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/4'
2025-04-29 15:10:16.345 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-29 15:10:16.354 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:10:16.359 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-29 15:10:16.368 +07:00 [INF] Route matched with {action = "Update", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Update(Int32, ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-29 15:10:16.370 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:10:16.372 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:10:16.373 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:10:16.376 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:10:16.378 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:10:16.380 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:10:16.384 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:10:16.387 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:10:16.389 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:10:16.392 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:16.394 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:16.396 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:10:16.397 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:16.399 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-29 15:10:16.401 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' using the name '' in request data ...
2025-04-29 15:10:16.402 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:10:16.404 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000005": started reading request body.
2025-04-29 15:10:16.405 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000005": done reading request body.
2025-04-29 15:10:16.409 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'
2025-04-29 15:10:16.411 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-29 15:10:16.413 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-29 15:10:16.413 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-29 15:10:16.416 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-29 15:10:16.418 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:10:16.420 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:10:16.421 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:10:16.422 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:10:16.423 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:10:16.424 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:10:16.426 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:10:16.433 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument) in 53.1921ms
2025-04-29 15:10:16.435 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-29 15:10:16.436 +07:00 [INF] HTTP PUT /api/admin/categories/4 responded 400 in 82.2504 ms
2025-04-29 15:10:16.437 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:10:16.438 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/admin/categories/4 - 400 null application/json; charset=utf-8 116.1173ms
2025-04-29 15:10:29.139 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/admin/categories/4 - application/json 55
2025-04-29 15:10:29.143 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/4'
2025-04-29 15:10:29.144 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/4'
2025-04-29 15:10:29.148 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-29 15:10:29.150 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:10:29.152 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-29 15:10:29.154 +07:00 [INF] Route matched with {action = "Update", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Update(Int32, ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-29 15:10:29.159 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:10:29.161 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:10:29.163 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:10:29.167 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:10:29.170 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:10:29.173 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:10:29.177 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:10:29.179 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:10:29.181 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:10:29.183 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:29.185 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:29.186 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:10:29.188 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:29.190 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-29 15:10:29.192 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' using the name '' in request data ...
2025-04-29 15:10:29.195 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:10:29.197 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000006": started reading request body.
2025-04-29 15:10:29.200 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:00000006": done reading request body.
2025-04-29 15:10:29.201 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'
2025-04-29 15:10:29.203 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-29 15:10:29.205 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-29 15:10:29.207 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto' ...
2025-04-29 15:10:29.209 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryUpdateDto'.
2025-04-29 15:10:29.225 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:10:29.245 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-29 15:10:29.302 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 15:10:29.319 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:10:29.321 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:10:29.323 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.325 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.328 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:10:29.329 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:10:29.330 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:10:29.332 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:10:29.337 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:10:29.339 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:10:29.342 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.344 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 5ms reading results.
2025-04-29 15:10:29.346 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.348 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 15:10:29.350 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.351 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:10:29.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:10:29.354 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:10:29.355 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-29 15:10:29.359 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-29 15:10:29.363 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:10:29.365 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:10:29.367 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.369 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 5ms reading results.
2025-04-29 15:10:29.370 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.372 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 15:10:29.376 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:10:29.379 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:10:29.380 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:10:29.382 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-29 15:10:29.390 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.392 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.394 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:10:29.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:10:29.397 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:10:29.399 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [categories] SET [categoryName] = @p0
OUTPUT 1
WHERE [categoryId] = @p1;
2025-04-29 15:10:29.406 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [categories] SET [categoryName] = @p0
OUTPUT 1
WHERE [categoryId] = @p1;
2025-04-29 15:10:29.410 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.412 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-04-29 15:10:29.480 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.482 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 15:10:29.484 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:10:29.485 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-29 15:10:29.487 +07:00 [INF] Cập nhật danh mục: ID=4, 'Ngôn Tình' → 'Thành Công'
2025-04-29 15:10:29.488 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:10:29.493 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:10:29.499 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:10:29.502 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:10:29.503 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:10:29.504 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:10:29.506 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-04-29 15:10:29.508 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument) in 334.435ms
2025-04-29 15:10:29.509 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Update (ExchangeDocument)'
2025-04-29 15:10:29.511 +07:00 [INF] HTTP PUT /api/admin/categories/4 responded 200 in 361.1727 ms
2025-04-29 15:10:29.513 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:10:29.516 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:10:29.517 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:29.519 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:10:29.520 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/admin/categories/4 - 200 null application/json; charset=utf-8 381.9777ms
2025-04-29 15:10:59.249 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/9 - null null
2025-04-29 15:10:59.253 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/9'
2025-04-29 15:10:59.255 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/9'
2025-04-29 15:10:59.258 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:10:59.260 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:10:59.262 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:10:59.267 +07:00 [INF] Route matched with {action = "Delete", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-29 15:10:59.271 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:10:59.273 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:10:59.276 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:10:59.278 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:10:59.279 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:10:59.280 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:10:59.282 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:10:59.283 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:10:59.285 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:10:59.287 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:59.289 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:59.291 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:10:59.293 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:10:59.340 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:10:59.348 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:10:59.348 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:10:59.350 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:59.352 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:59.354 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:10:59.356 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:10:59.358 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 15:10:59.360 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:10:59.362 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:10:59.365 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:59.366 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:10:59.368 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:59.369 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:10:59.373 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:10:59.376 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:10:59.377 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:10:59.378 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:10:59.379 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:10:59.380 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:10:59.382 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument) in 101.1894ms
2025-04-29 15:10:59.383 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:10:59.384 +07:00 [INF] HTTP DELETE /api/admin/categories/9 responded 404 in 124.2329 ms
2025-04-29 15:10:59.386 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:10:59.388 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:10:59.389 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:10:59.391 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:10:59.393 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/9 - 404 null application/json; charset=utf-8 143.9058ms
2025-04-29 15:11:20.876 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/5 - null null
2025-04-29 15:11:20.881 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/5'
2025-04-29 15:11:20.883 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/5'
2025-04-29 15:11:20.886 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:11:20.891 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:11:20.894 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:11:20.895 +07:00 [INF] Route matched with {action = "Delete", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-29 15:11:20.898 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:11:20.900 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:11:20.903 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:11:20.905 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:11:20.906 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:11:20.908 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:11:20.909 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:11:20.911 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:11:20.912 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:11:20.914 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:11:20.915 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:11:20.916 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:11:20.918 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:11:20.922 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:11:20.925 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:11:20.926 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:11:20.927 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:20.928 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:20.929 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:11:20.930 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:11:20.931 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:11:20.932 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:11:20.938 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:11:20.941 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:20.943 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:11:20.944 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:20.946 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:11:20.947 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:11:20.949 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:11:20.950 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:11:20.952 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:11:20.954 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:11:20.956 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:11:20.957 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument) in 49.531ms
2025-04-29 15:11:20.958 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:11:20.959 +07:00 [INF] HTTP DELETE /api/admin/categories/5 responded 404 in 68.4872 ms
2025-04-29 15:11:20.961 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:11:20.962 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:11:20.963 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:20.964 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:11:20.966 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/5 - 404 null application/json; charset=utf-8 89.455ms
2025-04-29 15:11:33.585 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/4 - null null
2025-04-29 15:11:33.590 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories/4'
2025-04-29 15:11:33.591 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)' with route pattern 'api/admin/categories/{id}' is valid for the request path '/api/admin/categories/4'
2025-04-29 15:11:33.608 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:11:33.610 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:11:33.619 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:11:33.623 +07:00 [INF] Route matched with {action = "Delete", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-04-29 15:11:33.625 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:11:33.626 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:11:33.627 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:11:33.629 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:11:33.631 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:11:33.633 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:11:33.634 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-04-29 15:11:33.636 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:11:33.637 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:11:33.639 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:11:33.640 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:11:33.641 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:11:33.642 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:11:33.643 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:11:33.645 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:11:33.646 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:11:33.647 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.648 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.649 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:11:33.651 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:11:33.652 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:11:33.653 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:11:33.656 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:11:33.658 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:11:33.660 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.661 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-29 15:11:33.662 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.662 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:11:33.665 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:11:33.670 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:11:33.671 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:11:33.672 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-29 15:11:33.676 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.677 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.678 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:11:33.679 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:11:33.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:11:33.682 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [categoryId] = @p0;
2025-04-29 15:11:33.690 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [categoryId] = @p0;
2025-04-29 15:11:33.692 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.693 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:11:33.694 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.695 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:11:33.699 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:11:33.702 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-29 15:11:33.703 +07:00 [INF] Xóa danh mục: ID=4, Name=Thành Công
2025-04-29 15:11:33.705 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-29 15:11:33.705 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument) in 72.6131ms
2025-04-29 15:11:33.706 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Delete (ExchangeDocument)'
2025-04-29 15:11:33.708 +07:00 [INF] HTTP DELETE /api/admin/categories/4 responded 204 in 97.6843 ms
2025-04-29 15:11:33.709 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:11:33.710 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:11:33.711 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:11:33.712 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:11:33.714 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/admin/categories/4 - 204 null null 128.4408ms
2025-04-29 15:12:00.137 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Categories - null null
2025-04-29 15:12:00.140 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-04-29 15:12:00.142 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-04-29 15:12:00.144 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)'
2025-04-29 15:12:00.147 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:12:00.148 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)'
2025-04-29 15:12:00.157 +07:00 [INF] Route matched with {action = "GetAll", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]]] GetAll() on controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument).
2025-04-29 15:12:00.162 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:12:00.165 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:12:00.166 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:12:00.169 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:12:00.171 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:12:00.173 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-29 15:12:00.176 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-29 15:12:00.182 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:12:00.185 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:12:00.186 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:12:00.188 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:00.189 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:00.191 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:12:00.192 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:12:00.195 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 15:12:00.198 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-29 15:12:00.202 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-04-29 15:12:00.204 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:12:00.205 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:12:00.207 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:00.208 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-29 15:12:00.210 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:00.213 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 15:12:00.216 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:12:00.218 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:12:00.219 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:12:00.221 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:12:00.221 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:12:00.222 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:12:00.224 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[ExchangeDocument.DataAccessLayer.Entities.Category, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExchangeDocument.BusinessLayer.DTOs.CategoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 15:12:00.226 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument) in 53.239ms
2025-04-29 15:12:00.230 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetAll (ExchangeDocument)'
2025-04-29 15:12:00.232 +07:00 [INF] HTTP GET /api/Categories responded 200 in 86.2302 ms
2025-04-29 15:12:00.235 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:12:00.236 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:12:00.237 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:00.238 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:12:00.239 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Categories - 200 null application/json; charset=utf-8 102.4733ms
2025-04-29 15:12:39.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Categories/5 - null null
2025-04-29 15:12:39.733 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Categories/5'
2025-04-29 15:12:39.734 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)' with route pattern 'api/Categories/{id}' is valid for the request path '/api/Categories/5'
2025-04-29 15:12:39.736 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-29 15:12:39.739 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:12:39.740 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-29 15:12:39.746 +07:00 [INF] Route matched with {action = "GetById", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] GetById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument).
2025-04-29 15:12:39.750 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:12:39.753 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:12:39.755 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:12:39.757 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:12:39.760 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:12:39.762 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-29 15:12:39.765 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-29 15:12:39.767 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:12:39.768 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:12:39.769 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:12:39.770 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:12:39.771 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:12:39.773 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:12:39.778 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:12:39.781 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:12:39.783 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:12:39.784 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:39.785 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:39.786 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:12:39.787 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:12:39.788 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:12:39.790 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:12:39.796 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:12:39.798 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:39.799 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:12:39.801 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:39.802 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:12:39.804 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:12:39.806 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:12:39.808 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:12:39.810 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:12:39.811 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:12:39.812 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:12:39.813 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:12:39.814 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument) in 52.5914ms
2025-04-29 15:12:39.816 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-29 15:12:39.817 +07:00 [INF] HTTP GET /api/Categories/5 responded 404 in 78.2552 ms
2025-04-29 15:12:39.818 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:12:39.819 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:12:39.820 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:39.821 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 15:12:39.822 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Categories/5 - 404 null application/json; charset=utf-8 91.7671ms
2025-04-29 15:12:45.784 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Categories/6 - null null
2025-04-29 15:12:45.788 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Categories/6'
2025-04-29 15:12:45.791 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)' with route pattern 'api/Categories/{id}' is valid for the request path '/api/Categories/6'
2025-04-29 15:12:45.796 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-29 15:12:45.799 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:12:45.800 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-29 15:12:45.801 +07:00 [INF] Route matched with {action = "GetById", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] GetById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument).
2025-04-29 15:12:45.803 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:12:45.805 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:12:45.806 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:12:45.809 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:12:45.811 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:12:45.812 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-29 15:12:45.813 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.CategoriesController (ExchangeDocument)
2025-04-29 15:12:45.814 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:12:45.815 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:12:45.816 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:12:45.817 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:12:45.818 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:12:45.819 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:12:45.820 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:12:45.823 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:12:45.825 +07:00 [DBG] Created DbConnection. (2ms).
2025-04-29 15:12:45.827 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:45.828 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:45.829 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:12:45.830 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:12:45.831 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:12:45.832 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:12:45.834 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:12:45.836 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:12:45.837 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:45.839 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-29 15:12:45.841 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:45.843 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:12:45.845 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:12:45.847 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:12:45.848 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:12:45.849 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:12:45.850 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:12:45.851 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:12:45.852 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-04-29 15:12:45.853 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument) in 40.9868ms
2025-04-29 15:12:45.854 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.CategoriesController.GetById (ExchangeDocument)'
2025-04-29 15:12:45.855 +07:00 [INF] HTTP GET /api/Categories/6 responded 200 in 56.0604 ms
2025-04-29 15:12:45.857 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:12:45.859 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:12:45.860 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:12:45.862 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:12:45.863 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Categories/6 - 200 null application/json; charset=utf-8 79.7638ms
2025-04-29 15:12:57.673 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 233
2025-04-29 15:12:57.677 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-29 15:12:57.678 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-29 15:12:57.682 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:12:57.685 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:12:57.687 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:12:57.695 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:12:57.697 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:12:57.698 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:12:57.699 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:12:57.701 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:12:57.703 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:12:57.705 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:12:57.708 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:12:57.709 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:12:57.710 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-29 15:12:57.711 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:12:57.716 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:0000000D": started reading request body.
2025-04-29 15:12:57.717 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:0000000D": done reading request body.
2025-04-29 15:12:57.726 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-29 15:12:57.729 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:12:57.730 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:12:57.731 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:12:57.735 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:12:57.737 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-29 15:12:57.738 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-29 15:12:57.740 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:12:57.743 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:12:57.744 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-29 15:12:57.746 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-29 15:12:57.747 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-29 15:12:57.748 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 43.2756ms
2025-04-29 15:12:57.749 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:12:57.750 +07:00 [INF] HTTP POST /api/Documents responded 400 in 64.8752 ms
2025-04-29 15:12:57.751 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:12:57.752 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 78.6855ms
2025-04-29 15:13:45.505 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 370
2025-04-29 15:13:45.509 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-29 15:13:45.511 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-29 15:13:45.529 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:13:45.532 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:13:45.534 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:13:45.541 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:13:45.548 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:13:45.550 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:13:45.552 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:13:45.555 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:13:45.557 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:13:45.559 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:13:45.561 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:13:45.562 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:13:45.565 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-29 15:13:45.568 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:13:45.570 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:0000000E": started reading request body.
2025-04-29 15:13:45.571 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:0000000E": done reading request body.
2025-04-29 15:13:45.572 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-29 15:13:45.573 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:13:45.574 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:13:45.576 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:13:45.578 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:13:45.582 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:13:45.586 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:13:45.587 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:13:45.588 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:45.589 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:45.590 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:13:45.592 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:13:45.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:13:45.594 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:13:45.599 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:13:45.603 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:45.604 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:13:45.605 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:45.607 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:13:45.608 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:13:45.610 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:13:45.611 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:13:45.612 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:13:45.612 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:13:45.614 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:13:45.618 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 58.6785ms
2025-04-29 15:13:45.619 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:13:45.620 +07:00 [INF] HTTP POST /api/Documents responded 400 in 88.9016 ms
2025-04-29 15:13:45.623 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:13:45.623 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:13:45.624 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:45.626 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:13:45.627 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/json; charset=utf-8 122.527ms
2025-04-29 15:13:58.826 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 361
2025-04-29 15:13:58.830 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-29 15:13:58.832 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-29 15:13:58.834 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:13:58.854 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:13:58.855 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:13:58.857 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:13:58.860 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:13:58.864 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:13:58.867 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:13:58.870 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:13:58.871 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:13:58.874 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:13:58.876 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:13:58.877 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:13:58.879 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-29 15:13:58.882 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:13:58.884 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:0000000F": started reading request body.
2025-04-29 15:13:58.885 +07:00 [DBG] Connection id "0HNC6UJH4RFHO", Request id "0HNC6UJH4RFHO:0000000F": done reading request body.
2025-04-29 15:13:58.887 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-29 15:13:58.888 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:13:58.889 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:13:58.890 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:13:58.891 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:13:58.893 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:13:58.896 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:13:58.897 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:13:58.899 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:58.902 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:58.903 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:13:58.904 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:13:58.905 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:13:58.906 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:13:58.908 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:13:58.911 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:13:58.914 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:58.916 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 5ms reading results.
2025-04-29 15:13:58.918 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:58.919 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:13:58.923 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:13:58.969 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:13:58.981 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:13:58.984 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:13:58.986 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:13:59.000 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-29 15:13:59.003 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:59.004 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:59.006 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:13:59.006 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:13:59.008 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:13:59.010 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [DeletedAt], [description], [statusId], [edition], [imageUrl], [IsDeleted], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-04-29 15:13:59.021 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [DeletedAt], [description], [statusId], [edition], [imageUrl], [IsDeleted], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-04-29 15:13:59.027 +07:00 [DBG] The foreign key property 'Document.DocumentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 15:13:59.032 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:59.036 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-04-29 15:13:59.037 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:59.038 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:13:59.040 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:13:59.042 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-29 15:13:59.046 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 172.0877ms
2025-04-29 15:13:59.049 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:13:59.052 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ExchangeDocument.BusinessLayer.Services.DocumentService.AddDocumentAsync(DocumentCreateDto documentDto, Int32 userId) in D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument\BusinessLayer\Services\DocumentService.cs:line 55
   at ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument(DocumentCreateDto documentDto) in D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument\PresentationLayer\Controllers\DocumentsController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-29 15:13:59.087 +07:00 [ERR] HTTP POST /api/Documents responded 500 in 233.2265 ms
2025-04-29 15:13:59.091 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" completed keep alive response.
2025-04-29 15:13:59.092 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:13:59.093 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:13:59.094 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:13:59.098 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 500 null text/plain; charset=utf-8 272.4165ms
2025-04-29 15:16:10.812 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" disconnecting.
2025-04-29 15:16:10.813 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" stopped.
2025-04-29 15:16:10.814 +07:00 [DBG] Connection id "0HNC6UJH4RFHO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 15:30:11.220 +07:00 [INF] Application is shutting down...
2025-04-29 15:30:11.221 +07:00 [DBG] Hosting stopping
2025-04-29 15:30:11.230 +07:00 [DBG] Hosting stopped
2025-04-29 15:31:35.763 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 15:31:35.854 +07:00 [DBG] Hosting starting
2025-04-29 15:31:35.897 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 15:31:35.901 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 15:31:35.902 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 15:31:35.903 +07:00 [INF] Hosting environment: Development
2025-04-29 15:31:35.903 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 15:31:35.904 +07:00 [DBG] Hosting started
2025-04-29 15:31:39.975 +07:00 [DBG] Connection id "0HNC6V11OOBFU" accepted.
2025-04-29 15:31:39.980 +07:00 [DBG] Connection id "0HNC6V11OOBFU" started.
2025-04-29 15:31:39.980 +07:00 [DBG] Connection id "0HNC6V11OOBFV" accepted.
2025-04-29 15:31:39.982 +07:00 [DBG] Connection id "0HNC6V11OOBFV" started.
2025-04-29 15:31:40.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 15:31:40.017 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 15:31:40.033 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 15:31:40.036 +07:00 [DBG] Request did not match any endpoints
2025-04-29 15:31:40.111 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 70.3251 ms
2025-04-29 15:31:40.120 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:31:40.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 119.427ms
2025-04-29 15:31:40.570 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 15:31:40.577 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 15:31:40.579 +07:00 [DBG] Request did not match any endpoints
2025-04-29 15:31:40.736 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 153.6590 ms
2025-04-29 15:31:40.738 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:31:40.739 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 168.9988ms
2025-04-29 15:31:47.545 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 233
2025-04-29 15:31:47.551 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-29 15:31:47.558 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-29 15:31:47.562 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:31:47.570 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:31:47.572 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 15:31:47.573 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:31:47.595 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:31:47.601 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:31:47.603 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:31:47.605 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:31:47.607 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:31:47.608 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:31:47.614 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:31:47.674 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 15:31:47.690 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:31:47.696 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:31:47.700 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-29 15:31:47.702 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:31:47.732 +07:00 [DBG] Connection id "0HNC6V11OOBFU", Request id "0HNC6V11OOBFU:00000003": started reading request body.
2025-04-29 15:31:47.734 +07:00 [DBG] Connection id "0HNC6V11OOBFU", Request id "0HNC6V11OOBFU:00000003": done reading request body.
2025-04-29 15:31:47.750 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-29 15:31:47.751 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:31:47.753 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:31:47.754 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:31:47.765 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:31:47.768 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-29 15:31:47.770 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-29 15:31:47.772 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:31:47.778 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:31:47.781 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-29 15:31:47.784 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-29 15:31:47.785 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-29 15:31:47.809 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 194.2126ms
2025-04-29 15:31:47.813 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:31:47.814 +07:00 [INF] HTTP POST /api/Documents responded 400 in 245.7338 ms
2025-04-29 15:31:47.816 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:31:47.820 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 274.9565ms
2025-04-29 15:32:01.702 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 370
2025-04-29 15:32:01.707 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-29 15:32:01.709 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-29 15:32:01.711 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:32:01.713 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:32:01.714 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:32:01.716 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:32:01.720 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:32:01.723 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:32:01.727 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:32:01.731 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:32:01.732 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:32:01.735 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:32:01.742 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:32:01.746 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:32:01.748 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-29 15:32:01.750 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:32:01.751 +07:00 [DBG] Connection id "0HNC6V11OOBFU", Request id "0HNC6V11OOBFU:00000004": started reading request body.
2025-04-29 15:32:01.752 +07:00 [DBG] Connection id "0HNC6V11OOBFU", Request id "0HNC6V11OOBFU:00000004": done reading request body.
2025-04-29 15:32:01.753 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-29 15:32:01.754 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:32:01.755 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:32:01.756 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:32:01.758 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:32:02.083 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:32:02.085 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:32:02.197 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:32:02.258 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-29 15:32:02.499 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 15:32:02.537 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:32:02.553 +07:00 [DBG] Created DbConnection. (14ms).
2025-04-29 15:32:02.556 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:02.664 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:02.667 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:32:02.672 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:32:02.678 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-29 15:32:02.685 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:32:02.718 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:32:02.733 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:02.739 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 14ms reading results.
2025-04-29 15:32:02.745 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:02.749 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-29 15:32:02.752 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:32:02.754 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:32:02.755 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:32:02.756 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:32:02.757 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:32:02.760 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:32:02.769 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 1034.1447ms
2025-04-29 15:32:02.771 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:32:02.773 +07:00 [INF] HTTP POST /api/Documents responded 400 in 1060.0305 ms
2025-04-29 15:32:02.777 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:32:02.780 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:32:02.783 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:02.785 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 15:32:02.788 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/json; charset=utf-8 1085.9111ms
2025-04-29 15:32:09.036 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 361
2025-04-29 15:32:09.041 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-29 15:32:09.042 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-29 15:32:09.046 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:32:09.051 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:32:09.053 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:32:09.056 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:32:09.060 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:32:09.063 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:32:09.066 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:32:09.068 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:32:09.069 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:32:09.071 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:32:09.081 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:32:09.082 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:32:09.084 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-29 15:32:09.085 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:32:09.086 +07:00 [DBG] Connection id "0HNC6V11OOBFU", Request id "0HNC6V11OOBFU:00000005": started reading request body.
2025-04-29 15:32:09.088 +07:00 [DBG] Connection id "0HNC6V11OOBFU", Request id "0HNC6V11OOBFU:00000005": done reading request body.
2025-04-29 15:32:09.089 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-29 15:32:09.091 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:32:09.093 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:32:09.095 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-29 15:32:09.096 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-29 15:32:09.105 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:32:09.113 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:32:09.114 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:32:09.115 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.116 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.117 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:32:09.118 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:32:09.119 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:32:09.120 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:32:09.127 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:32:09.145 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:32:09.155 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.156 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 26ms reading results.
2025-04-29 15:32:09.158 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.160 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:32:09.180 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:32:09.218 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:32:09.230 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:32:09.233 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:32:09.235 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:32:09.251 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-29 15:32:09.292 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.295 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.298 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:32:09.299 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:32:09.302 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 15:32:09.303 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [DeletedAt], [description], [statusId], [edition], [imageUrl], [IsDeleted], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-04-29 15:32:09.315 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [DeletedAt], [description], [statusId], [edition], [imageUrl], [IsDeleted], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-04-29 15:32:09.327 +07:00 [DBG] The foreign key property 'Document.DocumentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 15:32:09.333 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.335 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 16ms reading results.
2025-04-29 15:32:09.338 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.340 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:32:09.351 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:32:09.354 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-29 15:32:09.359 +07:00 [DBG] Compiling query expression: 
'DbSet<DocumentStatus>()
    .FirstOrDefault(e => EF.Property<int>(e, "DocumentStatusId") == __p_0)'
2025-04-29 15:32:09.366 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<DocumentStatus>(
    asyncEnumerable: SingleQueryingEnumerable.Create<DocumentStatus>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DocumentStatus.Code (string) Required MaxLength(50), 1], [Property: DocumentStatus.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) d.documentStatusId, d.statusCode, d.statusName
            FROM documentStatus AS d
            WHERE d.documentStatusId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DocumentStatus.Code (string) Required MaxLength(50), 1], [Property: DocumentStatus.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) d.documentStatusId, d.statusCode, d.statusName
            FROM documentStatus AS d
            WHERE d.documentStatusId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            DocumentStatus entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                DocumentStatus instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(DocumentStatus);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (DocumentStatus)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                            {
                                return 
                                {
                                    DocumentStatus instance;
                                    instance = new DocumentStatus();
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Code>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(DocumentStatus)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 15:32:09.381 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.383 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.385 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:32:09.386 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:32:09.387 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:32:09.388 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentStatusId], [d].[statusCode], [d].[statusName]
FROM [documentStatus] AS [d]
WHERE [d].[documentStatusId] = @__p_0
2025-04-29 15:32:09.393 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentStatusId], [d].[statusCode], [d].[statusName]
FROM [documentStatus] AS [d]
WHERE [d].[documentStatusId] = @__p_0
2025-04-29 15:32:09.399 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:32:09.401 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:32:09.405 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.406 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-04-29 15:32:09.409 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.412 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 15:32:09.415 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:32:09.418 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:32:09.419 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:32:09.419 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:32:09.420 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:32:09.421 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDto'.
2025-04-29 15:32:09.433 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] for address (id=[12],action=[GetDocumentById],controller=[Documents])
2025-04-29 15:32:09.436 +07:00 [DBG] Successfully processed template api/Documents/{id} for ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) resulting in /api/Documents/12 and 
2025-04-29 15:32:09.438 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] with result /api/Documents/12
2025-04-29 15:32:09.449 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 378.0782ms
2025-04-29 15:32:09.451 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-29 15:32:09.454 +07:00 [INF] HTTP POST /api/Documents responded 201 in 402.7640 ms
2025-04-29 15:32:09.455 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:32:09.457 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:32:09.459 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:32:09.462 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 15:32:09.463 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 201 null application/json; charset=utf-8 427.4714ms
2025-04-29 15:33:14.310 +07:00 [DBG] Connection id "0HNC6V11OOBFV" received FIN.
2025-04-29 15:33:14.312 +07:00 [DBG] Connection id "0HNC6V11OOBFV" disconnecting.
2025-04-29 15:33:14.313 +07:00 [DBG] Connection id "0HNC6V11OOBFV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 15:33:14.321 +07:00 [DBG] Connection id "0HNC6V11OOBFV" stopped.
2025-04-29 15:33:56.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/100 - null null
2025-04-29 15:33:56.587 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/100'
2025-04-29 15:33:56.588 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/100'
2025-04-29 15:33:56.591 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:33:56.595 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:33:56.597 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:33:56.602 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:33:56.606 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:33:56.607 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:33:56.608 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:33:56.611 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:33:56.613 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:33:56.615 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:33:56.618 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:33:56.620 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:33:56.621 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:33:56.623 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:33:56.624 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:33:56.626 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:33:56.629 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:33:56.684 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:33:56.691 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.DocumentStatus.Code == "Listed")'
2025-04-29 15:33:56.704 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 15:33:56.707 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 15:33:56.710 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 15:33:56.753 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d0.statusCode == N'Listed'))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d0.statusCode == N'Listed')), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            DocumentStatus entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            entity = 
            {
                MaterializationContext materializationContext4;
                IEntityType entityType4;
                DocumentStatus instance4;
                InternalEntityEntry entry4;
                bool hasNullKey4;
                materializationContext4 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance4 = default(DocumentStatus);
                entry4 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey4);
                !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
                {
                    entityType4 = entry4.EntityType;
                    return instance4 = (DocumentStatus)entry4.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot4;
                    shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                    instance4 = switch (entityType4)
                    {
                        case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                            {
                                return 
                                {
                                    DocumentStatus instance;
                                    instance = new DocumentStatus();
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                    instance.<Code>k__BackingField = dataReader.GetString(24);
                                    instance.<Name>k__BackingField = dataReader.GetString(25);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext4.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(DocumentStatus)
                    }
                    ;
                    entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType4, 
                        entity: instance4, 
                        snapshot: shadowSnapshot4);
                    return instance4;
                } : default(void);
                return instance4;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{14}, namelessParameter{15}) => 
                {
                    namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{15}, 
                        value: namelessParameter{14}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{19}, namelessParameter{20}) => 
                {
                    namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{20}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
                fixup: (namelessParameter{24}, namelessParameter{25}) => 
                {
                    namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                    return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{25}, 
                        value: namelessParameter{24}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 15:33:56.808 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:33:56.810 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:33:56.812 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:33:56.815 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:33:56.817 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:33:56.818 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:33:56.819 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:33:56.820 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:33:56.833 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:33:56.837 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:33:56.838 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:33:56.839 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:33:56.841 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:33:56.844 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:33:56.847 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:33:56.849 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:33:56.851 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:33:56.852 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:33:56.852 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:33:56.853 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:33:56.854 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 239.5386ms
2025-04-29 15:33:56.855 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:33:56.856 +07:00 [INF] HTTP GET /api/Documents/100 responded 404 in 262.4237 ms
2025-04-29 15:33:56.857 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:33:56.858 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:33:56.859 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:33:56.860 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:33:56.862 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/100 - 404 null application/json; charset=utf-8 278.0571ms
2025-04-29 15:34:24.033 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/5 - null null
2025-04-29 15:34:24.037 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-29 15:34:24.038 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-29 15:34:24.040 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:34:24.057 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:34:24.058 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:34:24.061 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:34:24.069 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:34:24.074 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:34:24.076 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:34:24.079 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:34:24.081 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:34:24.083 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:34:24.086 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:34:24.088 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:34:24.090 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:34:24.092 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:34:24.094 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:34:24.095 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:34:24.096 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:34:24.098 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:34:24.100 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:34:24.101 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:34:24.103 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:34:24.104 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:34:24.106 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:34:24.108 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:34:24.111 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 15:34:24.113 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:34:24.116 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:34:24.120 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:34:24.122 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:34:24.126 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:34:24.128 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:34:24.129 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:34:24.132 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:34:24.134 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:34:24.134 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:34:24.135 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:34:24.136 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:34:24.137 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:34:24.139 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 55.1548ms
2025-04-29 15:34:24.143 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:34:24.144 +07:00 [INF] HTTP GET /api/Documents/5 responded 404 in 87.9742 ms
2025-04-29 15:34:24.146 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:34:24.147 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:34:24.148 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:34:24.149 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:34:24.150 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/5 - 404 null application/json; charset=utf-8 116.8379ms
2025-04-29 15:35:39.409 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-29 15:35:39.413 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:35:39.415 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:35:39.418 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:35:39.421 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:35:39.423 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:35:39.424 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:35:39.425 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:35:39.427 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:35:39.428 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:35:39.431 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:35:39.433 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:35:39.434 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:35:39.436 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:35:39.438 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:35:39.439 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:35:39.441 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:35:39.442 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:35:39.443 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:35:39.444 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:35:39.446 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:35:39.451 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:35:39.452 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:35:39.454 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:35:39.456 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:35:39.457 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:35:39.458 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:35:39.459 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:35:39.461 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:35:39.466 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:35:39.470 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:35:39.472 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-29 15:35:39.473 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:35:39.475 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:35:39.476 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:35:39.478 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:35:39.479 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:35:39.482 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:35:39.483 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:35:39.484 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:35:39.486 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:35:39.488 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 53.5259ms
2025-04-29 15:35:39.489 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:35:39.491 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 69.6035 ms
2025-04-29 15:35:39.493 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:35:39.494 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:35:39.495 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:35:39.497 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:35:39.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 89.7164ms
2025-04-29 15:36:20.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-29 15:36:20.674 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:36:20.677 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:36:20.678 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:36:20.680 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:36:20.694 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:36:20.701 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:36:20.707 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:36:20.710 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:36:20.713 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:36:20.715 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:36:20.717 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:36:20.720 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:36:20.721 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:36:20.722 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:36:20.723 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:36:20.725 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:36:20.727 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:36:20.728 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:36:20.730 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:36:20.731 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:36:20.734 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:36:20.734 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:36:20.735 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:20.736 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:20.737 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:36:20.738 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:36:20.738 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:36:20.739 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:36:20.743 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:36:20.746 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:20.748 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:36:20.749 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:20.750 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:36:20.751 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:36:20.752 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:36:20.753 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:36:20.754 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:36:20.755 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:36:20.755 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:36:20.756 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:36:20.758 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 38.8092ms
2025-04-29 15:36:20.761 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:36:20.762 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 82.5788 ms
2025-04-29 15:36:20.763 +07:00 [DBG] Connection id "0HNC6V11OOBFU" completed keep alive response.
2025-04-29 15:36:20.764 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:36:20.765 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:20.766 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 15:36:20.767 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 96.3557ms
2025-04-29 15:36:23.782 +07:00 [INF] Application is shutting down...
2025-04-29 15:36:23.783 +07:00 [DBG] Hosting stopping
2025-04-29 15:36:23.789 +07:00 [DBG] Connection id "0HNC6V11OOBFU" disconnecting.
2025-04-29 15:36:23.789 +07:00 [DBG] Connection id "0HNC6V11OOBFU" stopped.
2025-04-29 15:36:23.791 +07:00 [DBG] Connection id "0HNC6V11OOBFU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 15:36:23.795 +07:00 [DBG] Hosting stopped
2025-04-29 15:36:34.027 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 15:36:34.114 +07:00 [DBG] Hosting starting
2025-04-29 15:36:34.158 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 15:36:34.159 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 15:36:34.161 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 15:36:34.163 +07:00 [INF] Hosting environment: Development
2025-04-29 15:36:34.164 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 15:36:34.165 +07:00 [DBG] Hosting started
2025-04-29 15:36:37.251 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" accepted.
2025-04-29 15:36:37.254 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" started.
2025-04-29 15:36:37.254 +07:00 [DBG] Connection id "0HNC6V3QBPL9E" accepted.
2025-04-29 15:36:37.258 +07:00 [DBG] Connection id "0HNC6V3QBPL9E" started.
2025-04-29 15:36:37.281 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 15:36:37.289 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 15:36:37.302 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 15:36:37.307 +07:00 [DBG] Request did not match any endpoints
2025-04-29 15:36:37.382 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 67.7907 ms
2025-04-29 15:36:37.390 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" completed keep alive response.
2025-04-29 15:36:37.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 112.9166ms
2025-04-29 15:36:37.795 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 15:36:37.803 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 15:36:37.805 +07:00 [DBG] Request did not match any endpoints
2025-04-29 15:36:37.951 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 142.4366 ms
2025-04-29 15:36:37.953 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" completed keep alive response.
2025-04-29 15:36:37.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.4019ms
2025-04-29 15:36:44.758 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-29 15:36:44.766 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:36:44.771 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:36:44.775 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:36:44.779 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:36:44.780 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 15:36:44.782 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:36:44.802 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:36:44.810 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:36:44.811 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:36:44.813 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:36:44.816 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:36:44.817 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:36:44.820 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:36:44.880 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 15:36:44.896 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:36:44.900 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:36:44.902 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:36:44.904 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:36:44.906 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:36:44.907 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:36:44.910 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:36:45.275 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:36:45.278 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 15:36:45.406 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:36:45.448 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.DocumentStatus.Code == "Listed")'
2025-04-29 15:36:45.500 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 15:36:45.502 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 15:36:45.503 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 15:36:45.679 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d0.statusCode == N'Listed'))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE Not(d.IsDeleted) && ((d.documentId == @__id_0) && (d0.statusCode == N'Listed')), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            DocumentStatus entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            entity = 
            {
                MaterializationContext materializationContext4;
                IEntityType entityType4;
                DocumentStatus instance4;
                InternalEntityEntry entry4;
                bool hasNullKey4;
                materializationContext4 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance4 = default(DocumentStatus);
                entry4 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey4);
                !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
                {
                    entityType4 = entry4.EntityType;
                    return instance4 = (DocumentStatus)entry4.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot4;
                    shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                    instance4 = switch (entityType4)
                    {
                        case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                            {
                                return 
                                {
                                    DocumentStatus instance;
                                    instance = new DocumentStatus();
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                    instance.<Code>k__BackingField = dataReader.GetString(24);
                                    instance.<Name>k__BackingField = dataReader.GetString(25);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext4.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(DocumentStatus)
                    }
                    ;
                    entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType4, 
                        entity: instance4, 
                        snapshot: shadowSnapshot4);
                    return instance4;
                } : default(void);
                return instance4;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{14}, namelessParameter{15}) => 
                {
                    namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{15}, 
                        value: namelessParameter{14}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{19}, namelessParameter{20}) => 
                {
                    namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{20}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
                fixup: (namelessParameter{24}, namelessParameter{25}) => 
                {
                    namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                    return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{25}, 
                        value: namelessParameter{24}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 15:36:45.752 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:36:45.766 +07:00 [DBG] Created DbConnection. (13ms).
2025-04-29 15:36:45.770 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:45.874 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:45.878 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:36:45.883 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:36:45.888 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-29 15:36:45.897 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:36:45.931 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:36:45.944 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:45.949 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-29 15:36:45.953 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:45.959 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (6ms).
2025-04-29 15:36:45.965 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:36:45.970 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:36:45.972 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:36:45.975 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:36:45.977 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:36:45.979 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:36:45.980 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:36:46.011 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 1189.2591ms
2025-04-29 15:36:46.015 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:36:46.017 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 1239.0373 ms
2025-04-29 15:36:46.019 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" completed keep alive response.
2025-04-29 15:36:46.023 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:36:46.028 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:36:46.032 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-29 15:36:46.035 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 1276.4064ms
2025-04-29 15:37:03.844 +07:00 [DBG] Connection id "0HNC6V3QBPL9E" received FIN.
2025-04-29 15:37:03.844 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" received FIN.
2025-04-29 15:37:03.849 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 15:37:03.849 +07:00 [DBG] Connection id "0HNC6V3QBPL9E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 15:37:03.851 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" disconnecting.
2025-04-29 15:37:03.852 +07:00 [DBG] Connection id "0HNC6V3QBPL9E" disconnecting.
2025-04-29 15:37:03.853 +07:00 [DBG] Connection id "0HNC6V3QBPL9D" stopped.
2025-04-29 15:37:03.854 +07:00 [DBG] Connection id "0HNC6V3QBPL9E" stopped.
2025-04-29 15:49:25.616 +07:00 [DBG] Connection id "0HNC6V3QBPL9F" accepted.
2025-04-29 15:49:25.620 +07:00 [DBG] Connection id "0HNC6V3QBPL9F" started.
2025-04-29 15:49:25.624 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-29 15:49:25.629 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:49:25.634 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:49:25.638 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:49:25.639 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:49:25.640 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:49:25.642 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:49:25.644 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:49:25.646 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:49:25.647 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:49:25.648 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:49:25.649 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:49:25.651 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:49:25.653 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:49:25.655 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:49:25.656 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:49:25.658 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:49:25.660 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:49:25.661 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:49:25.662 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:49:25.672 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:49:25.678 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:49:25.679 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:49:25.680 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:49:25.685 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:49:25.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:49:25.687 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:49:25.688 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:49:25.689 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:49:25.698 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:49:25.701 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:49:25.703 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:49:25.704 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:49:25.704 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:49:25.706 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:49:25.708 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:49:25.710 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:49:25.711 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:49:25.711 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:49:25.712 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:49:25.713 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:49:25.714 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 63.4215ms
2025-04-29 15:49:25.715 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:49:25.716 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 76.6508 ms
2025-04-29 15:49:25.717 +07:00 [DBG] Connection id "0HNC6V3QBPL9F" completed keep alive response.
2025-04-29 15:49:25.718 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:49:25.719 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:49:25.720 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 15:49:25.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 97.1993ms
2025-04-29 15:51:37.373 +07:00 [DBG] Connection id "0HNC6V3QBPL9F" disconnecting.
2025-04-29 15:51:37.380 +07:00 [DBG] Connection id "0HNC6V3QBPL9F" stopped.
2025-04-29 15:51:37.384 +07:00 [DBG] Connection id "0HNC6V3QBPL9F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 15:52:02.203 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" accepted.
2025-04-29 15:52:02.204 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" started.
2025-04-29 15:52:02.207 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-29 15:52:02.210 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-29 15:52:02.211 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-29 15:52:02.214 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:52:02.216 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:52:02.217 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:52:02.217 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:52:02.219 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:52:02.220 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:52:02.221 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:52:02.223 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:52:02.225 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:52:02.226 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:52:02.230 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:52:02.232 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:52:02.233 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:52:02.234 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:52:02.234 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:52:02.235 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:52:02.236 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:52:02.282 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:52:02.288 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:52:02.289 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 15:52:02.290 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:02.292 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:02.294 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:52:02.294 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:52:02.295 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:52:02.296 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:52:02.305 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:52:02.308 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:02.309 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:52:02.310 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:02.311 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:52:02.312 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:52:02.313 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:52:02.314 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:52:02.315 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:52:02.315 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:52:02.316 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:52:02.317 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:52:02.318 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 91.9178ms
2025-04-29 15:52:02.319 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:52:02.320 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 103.7676 ms
2025-04-29 15:52:02.321 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:52:02.323 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:52:02.324 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:02.325 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:52:02.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 119.6491ms
2025-04-29 15:52:33.713 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-29 15:52:33.718 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-29 15:52:33.719 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-29 15:52:33.721 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:52:33.723 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:52:33.724 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:52:33.725 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:52:33.727 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:52:33.728 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:52:33.730 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:52:33.731 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:52:33.732 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:52:33.733 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:52:33.734 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:52:33.736 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:52:33.737 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:52:33.738 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:52:33.739 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:52:33.740 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:52:33.741 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:52:33.742 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:52:33.744 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:52:33.744 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:52:33.745 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:33.746 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:33.747 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:52:33.748 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:52:33.749 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:52:33.749 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:52:33.757 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:52:33.779 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:52:33.816 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:52:33.824 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:52:33.832 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:52:33.837 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:52:33.843 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:52:33.845 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:52:33.852 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:33.853 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 94ms reading results.
2025-04-29 15:52:33.854 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:33.856 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:52:33.857 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:52:33.859 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:52:33.860 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:52:33.861 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:52:33.861 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:52:33.862 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:52:33.863 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-29 15:52:33.874 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 141.2442ms
2025-04-29 15:52:33.875 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:52:33.876 +07:00 [INF] HTTP GET /api/Documents/9 responded 200 in 153.0719 ms
2025-04-29 15:52:33.877 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:52:33.878 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:52:33.879 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:52:33.880 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 15:52:33.881 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 200 null application/json; charset=utf-8 167.8186ms
2025-04-29 15:54:26.604 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-29 15:54:26.608 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:54:26.609 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:54:26.611 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:54:26.612 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:54:26.613 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:54:26.614 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:54:26.618 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:54:26.620 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:54:26.623 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:54:26.626 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:54:26.627 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:54:26.628 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:54:26.629 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:54:26.630 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:54:26.631 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:54:26.632 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:26.633 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:26.633 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:54:26.634 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:26.637 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:54:26.640 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:54:26.640 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:54:26.641 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:26.642 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:26.643 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:54:26.643 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:54:26.644 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:54:26.645 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:54:26.652 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 15:54:26.656 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:26.657 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:54:26.658 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:26.659 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:54:26.660 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:54:26.662 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:54:26.663 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:54:26.663 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:54:26.664 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:54:26.665 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:54:26.665 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:54:26.666 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 38.8929ms
2025-04-29 15:54:26.668 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 15:54:26.668 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 56.2031 ms
2025-04-29 15:54:26.671 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:54:26.672 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:54:26.673 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:26.674 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 15:54:26.675 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 71.2302ms
2025-04-29 15:54:37.641 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - application/json 230
2025-04-29 15:54:37.647 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:54:37.649 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:54:37.651 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:54:37.653 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:54:37.655 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:54:37.660 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:54:37.662 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:54:37.663 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:54:37.664 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:54:37.665 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:54:37.666 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:54:37.667 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:54:37.670 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:54:37.671 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:54:37.672 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:54:37.673 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:37.674 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:37.675 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:54:37.676 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:37.677 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:54:37.678 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-29 15:54:37.680 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:54:37.688 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000004": started reading request body.
2025-04-29 15:54:37.689 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000004": done reading request body.
2025-04-29 15:54:37.705 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-29 15:54:37.707 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:54:37.708 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:54:37.709 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:54:37.716 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:54:37.718 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-29 15:54:37.720 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-29 15:54:37.721 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:54:37.723 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-29 15:54:37.725 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:54:37.726 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-29 15:54:37.728 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-29 15:54:37.728 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-29 15:54:37.744 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 76.6786ms
2025-04-29 15:54:37.746 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:54:37.747 +07:00 [INF] HTTP PUT /api/Documents/8 responded 400 in 93.9746 ms
2025-04-29 15:54:37.748 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:54:37.749 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - 400 null application/problem+json; charset=utf-8 108.4989ms
2025-04-29 15:54:54.111 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - application/json 367
2025-04-29 15:54:54.117 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:54:54.119 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:54:54.121 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:54:54.126 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:54:54.128 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:54:54.129 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:54:54.131 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:54:54.133 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:54:54.136 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:54:54.138 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:54:54.139 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:54:54.141 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:54:54.142 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:54:54.143 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:54:54.144 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:54:54.145 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:54.146 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:54.147 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:54:54.147 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:54:54.148 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:54:54.150 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-29 15:54:54.152 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:54:54.153 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000005": started reading request body.
2025-04-29 15:54:54.154 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000005": done reading request body.
2025-04-29 15:54:54.155 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-29 15:54:54.156 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:54:54.157 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:54:54.158 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:54:54.159 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:54:54.163 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:54:54.171 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-29 15:54:54.178 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 15:54:54.187 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:54:54.187 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:54:54.188 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:54.189 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:54.190 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:54:54.191 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:54:54.192 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:54:54.192 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:54:54.196 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:54:54.197 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:54.198 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:54:54.200 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:54.201 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:54:54.203 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:54:54.205 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:54:54.206 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:54:54.207 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:54:54.207 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:54:54.208 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:54:54.209 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:54:54.210 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 69.3369ms
2025-04-29 15:54:54.211 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:54:54.212 +07:00 [INF] HTTP PUT /api/Documents/8 responded 400 in 86.1034 ms
2025-04-29 15:54:54.213 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:54:54.214 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:54:54.215 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:54:54.216 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:54:54.217 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - 400 null application/json; charset=utf-8 106.3831ms
2025-04-29 15:55:06.294 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - application/json 358
2025-04-29 15:55:06.298 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 15:55:06.300 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 15:55:06.302 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:55:06.302 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:55:06.303 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:55:06.304 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:55:06.306 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:55:06.308 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:55:06.310 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:55:06.313 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:55:06.315 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:55:06.318 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:55:06.320 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:55:06.321 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:55:06.321 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:55:06.322 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:55:06.323 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:55:06.324 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:55:06.325 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:55:06.326 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:55:06.327 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-29 15:55:06.328 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:55:06.329 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000006": started reading request body.
2025-04-29 15:55:06.330 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000006": done reading request body.
2025-04-29 15:55:06.331 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-29 15:55:06.333 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:55:06.335 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:55:06.335 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:55:06.336 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:55:06.338 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:55:06.340 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:55:06.340 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:55:06.341 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.342 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.343 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:55:06.343 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:55:06.344 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:55:06.345 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:55:06.347 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:55:06.350 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:55:06.351 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.352 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-29 15:55:06.353 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.354 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:55:06.357 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .FirstOrDefault(d => d.DocumentId == __id_0)'
2025-04-29 15:55:06.358 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 15:55:06.359 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 15:55:06.360 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 15:55:06.372 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (d.documentId == @__id_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            DocumentStatus entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            entity = 
            {
                MaterializationContext materializationContext4;
                IEntityType entityType4;
                DocumentStatus instance4;
                InternalEntityEntry entry4;
                bool hasNullKey4;
                materializationContext4 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance4 = default(DocumentStatus);
                entry4 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey4);
                !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
                {
                    entityType4 = entry4.EntityType;
                    return instance4 = (DocumentStatus)entry4.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot4;
                    shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                    instance4 = switch (entityType4)
                    {
                        case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                            {
                                return 
                                {
                                    DocumentStatus instance;
                                    instance = new DocumentStatus();
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                    instance.<Code>k__BackingField = dataReader.GetString(24);
                                    instance.<Name>k__BackingField = dataReader.GetString(25);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext4.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(DocumentStatus)
                    }
                    ;
                    entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType4, 
                        entity: instance4, 
                        snapshot: shadowSnapshot4);
                    return instance4;
                } : default(void);
                return instance4;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{14}, namelessParameter{15}) => 
                {
                    namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{15}, 
                        value: namelessParameter{14}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{19}, namelessParameter{20}) => 
                {
                    namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{20}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
                fixup: (namelessParameter{24}, namelessParameter{25}) => 
                {
                    namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                    return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{25}, 
                        value: namelessParameter{24}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 15:55:06.402 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.404 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.404 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:55:06.405 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:55:06.406 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:55:06.407 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:55:06.413 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:55:06.416 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.417 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:55:06.418 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.419 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:55:06.420 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:55:06.422 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:55:06.423 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:55:06.424 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:55:06.424 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:55:06.425 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:55:06.426 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:55:06.427 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 108.9755ms
2025-04-29 15:55:06.428 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:55:06.429 +07:00 [INF] HTTP PUT /api/Documents/8 responded 404 in 126.0954 ms
2025-04-29 15:55:06.430 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:55:06.431 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:55:06.432 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:06.433 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:55:06.434 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 140.1621ms
2025-04-29 15:55:21.619 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - application/json 358
2025-04-29 15:55:21.624 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-29 15:55:21.627 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-29 15:55:21.628 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:55:21.630 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:55:21.631 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:55:21.632 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:55:21.633 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:55:21.634 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:55:21.635 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:55:21.637 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:55:21.638 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:55:21.640 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:55:21.642 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:55:21.644 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:55:21.646 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:55:21.647 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:55:21.648 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:55:21.649 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:55:21.650 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:55:21.651 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:55:21.652 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-29 15:55:21.652 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:55:21.653 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000007": started reading request body.
2025-04-29 15:55:21.654 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000007": done reading request body.
2025-04-29 15:55:21.655 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-29 15:55:21.656 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:55:21.657 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:55:21.657 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:55:21.658 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:55:21.660 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:55:21.661 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:55:21.662 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:55:21.664 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.665 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.666 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:55:21.666 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:55:21.667 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:55:21.668 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:55:21.670 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:55:21.672 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:55:21.673 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.674 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:55:21.675 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.675 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:55:21.677 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.677 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.679 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:55:21.681 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:55:21.682 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:55:21.682 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:55:21.685 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:55:21.687 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:55:21.688 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:55:21.689 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:55:21.690 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:55:21.691 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:55:21.693 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.693 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 6ms reading results.
2025-04-29 15:55:21.694 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.696 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:55:21.697 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:55:21.699 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-29 15:55:21.701 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:55:21.702 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-29 15:55:21.703 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-29 15:55:21.704 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-29 15:55:21.706 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 66.8892ms
2025-04-29 15:55:21.708 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:55:21.708 +07:00 [INF] HTTP PUT /api/Documents/9 responded 403 in 78.9369 ms
2025-04-29 15:55:21.710 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:55:21.710 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:55:21.711 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:55:21.712 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:55:21.714 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/9 - 403 null application/problem+json; charset=utf-8 95.235ms
2025-04-29 15:56:06.044 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/10 - application/json 358
2025-04-29 15:56:06.049 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/10'
2025-04-29 15:56:06.051 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/10'
2025-04-29 15:56:06.053 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:56:06.054 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:56:06.056 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:56:06.057 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:56:06.059 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:56:06.061 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:56:06.062 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:56:06.063 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:56:06.067 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:56:06.070 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:56:06.071 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:56:06.072 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:56:06.074 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:56:06.076 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:56:06.077 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:56:06.078 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:56:06.079 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:56:06.080 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:56:06.081 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-29 15:56:06.082 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:56:06.083 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000008": started reading request body.
2025-04-29 15:56:06.084 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000008": done reading request body.
2025-04-29 15:56:06.085 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-29 15:56:06.085 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:56:06.086 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:56:06.087 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:56:06.088 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:56:06.090 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:56:06.093 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:56:06.094 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:56:06.095 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.096 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.097 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:56:06.097 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:56:06.098 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:56:06.099 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:56:06.102 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:56:06.104 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:56:06.105 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.106 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-29 15:56:06.108 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.109 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:56:06.111 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.112 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.113 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:56:06.114 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:56:06.115 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:56:06.116 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:56:06.122 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:56:06.125 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.126 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:56:06.127 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.128 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:56:06.129 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:56:06.130 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:56:06.131 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:56:06.132 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:56:06.132 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:56:06.133 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:56:06.134 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:56:06.135 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 65.2798ms
2025-04-29 15:56:06.136 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:56:06.137 +07:00 [INF] HTTP PUT /api/Documents/10 responded 404 in 82.8716 ms
2025-04-29 15:56:06.138 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:56:06.139 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:56:06.140 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:06.142 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:56:06.143 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/10 - 404 null application/json; charset=utf-8 98.5324ms
2025-04-29 15:56:20.963 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5120/api/Documents/11 - application/json 358
2025-04-29 15:56:20.967 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/11'
2025-04-29 15:56:20.969 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/11'
2025-04-29 15:56:20.970 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:56:20.972 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:56:20.973 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:56:20.975 +07:00 [INF] Route matched with {action = "UpdateDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDocument(Int32, ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:56:20.976 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:56:20.978 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:56:20.979 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:56:20.980 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:56:20.981 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:56:20.983 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:56:20.986 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:56:20.987 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:56:20.988 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:56:20.990 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:56:20.991 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:56:20.993 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:56:20.993 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:56:20.994 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:56:20.995 +07:00 [DBG] Attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' using the name '' in request data ...
2025-04-29 15:56:20.996 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 15:56:20.997 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000009": started reading request body.
2025-04-29 15:56:20.998 +07:00 [DBG] Connection id "0HNC6V3QBPL9G", Request id "0HNC6V3QBPL9G:00000009": done reading request body.
2025-04-29 15:56:20.999 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'
2025-04-29 15:56:21.000 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:56:21.001 +07:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:56:21.002 +07:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto' ...
2025-04-29 15:56:21.003 +07:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentUpdateDto'.
2025-04-29 15:56:21.004 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:56:21.007 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:56:21.008 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:56:21.009 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.010 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.011 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:56:21.011 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:56:21.012 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:56:21.013 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:56:21.016 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-29 15:56:21.018 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:56:21.019 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.020 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 15:56:21.021 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.023 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:56:21.025 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.026 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.027 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:56:21.027 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:56:21.028 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:56:21.029 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:56:21.035 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:56:21.040 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:56:21.042 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:56:21.043 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:56:21.044 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:56:21.045 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:56:21.046 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.047 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-04-29 15:56:21.048 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.049 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:56:21.050 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:56:21.052 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 15:56:21.052 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 15:56:21.053 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:56:21.054 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:56:21.055 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:56:21.056 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:56:21.057 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument) in 74.1833ms
2025-04-29 15:56:21.058 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.UpdateDocument (ExchangeDocument)'
2025-04-29 15:56:21.059 +07:00 [INF] HTTP PUT /api/Documents/11 responded 400 in 86.8651 ms
2025-04-29 15:56:21.060 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:56:21.061 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:56:21.062 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:56:21.063 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 15:56:21.064 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5120/api/Documents/11 - 400 null application/json; charset=utf-8 101.0834ms
2025-04-29 15:57:28.179 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/12 - null null
2025-04-29 15:57:28.183 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/12'
2025-04-29 15:57:28.185 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/12'
2025-04-29 15:57:28.192 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-29 15:57:28.207 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:57:28.211 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-29 15:57:28.220 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:57:28.224 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:57:28.225 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:57:28.226 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:57:28.227 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:57:28.228 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:57:28.230 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:57:28.231 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:57:28.232 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:57:28.233 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:57:28.234 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:57:28.235 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:57:28.236 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:57:28.237 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:57:28.239 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:57:28.240 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:57:28.241 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:57:28.241 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.242 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.243 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:57:28.244 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 15:57:28.244 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:57:28.245 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:57:28.253 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:57:28.255 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.256 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.257 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.258 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.258 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.259 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.260 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.261 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.262 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 7ms reading results.
2025-04-29 15:57:28.263 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.265 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 15:57:28.272 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.275 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:57:28.277 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-29 15:57:28.289 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-29 15:57:28.334 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.338 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.341 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:57:28.342 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:57:28.344 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 15:57:28.345 +07:00 [DBG] Executing DbCommand [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [statusId] = @p5, [edition] = @p6, [imageUrl] = @p7, [IsDeleted] = @p8, [ISBN] = @p9, [price] = @p10, [publicationYear] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-29 15:57:28.354 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [document] SET [author] = @p0, [categoryId] = @p1, [condition] = @p2, [DeletedAt] = @p3, [description] = @p4, [statusId] = @p5, [edition] = @p6, [imageUrl] = @p7, [IsDeleted] = @p8, [ISBN] = @p9, [price] = @p10, [publicationYear] = @p11, [title] = @p12, [userId] = @p13
OUTPUT 1
WHERE [documentId] = @p14;
2025-04-29 15:57:28.360 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.361 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-04-29 15:57:28.363 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.366 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 15:57:28.369 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:57:28.372 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-29 15:57:28.374 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-29 15:57:28.374 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 144.744ms
2025-04-29 15:57:28.375 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-29 15:57:28.376 +07:00 [INF] HTTP DELETE /api/Documents/12 responded 204 in 169.4011 ms
2025-04-29 15:57:28.377 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:57:28.378 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:57:28.379 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:57:28.381 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:57:28.382 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/12 - 204 null null 203.2251ms
2025-04-29 15:58:04.689 +07:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5120/api/Documents/11 - null null
2025-04-29 15:58:04.694 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/11'
2025-04-29 15:58:04.695 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/11'
2025-04-29 15:58:04.697 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-29 15:58:04.699 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 15:58:04.700 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-29 15:58:04.702 +07:00 [INF] Route matched with {action = "DeleteDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDocument(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 15:58:04.704 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 15:58:04.706 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 15:58:04.707 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 15:58:04.708 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 15:58:04.710 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 15:58:04.711 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:58:04.713 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 15:58:04.714 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 15:58:04.714 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 15:58:04.715 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:58:04.716 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 15:58:04.717 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 15:58:04.718 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 15:58:04.719 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 15:58:04.721 +07:00 [DBG] Creating DbConnection.
2025-04-29 15:58:04.721 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 15:58:04.722 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:58:04.723 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:58:04.724 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 15:58:04.725 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 15:58:04.726 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 15:58:04.727 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:58:04.734 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0
2025-04-29 15:58:04.736 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:58:04.737 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:58:04.738 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:58:04.739 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:58:04.740 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:58:04.741 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:58:04.743 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 15:58:04.744 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:58:04.745 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-04-29 15:58:04.746 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:58:04.747 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 15:58:04.748 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 15:58:04.750 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 15:58:04.750 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 15:58:04.751 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 15:58:04.752 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 15:58:04.753 +07:00 [INF] Executing ConflictObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 15:58:04.754 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument) in 42.2734ms
2025-04-29 15:58:04.755 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.DeleteDocument (ExchangeDocument)'
2025-04-29 15:58:04.755 +07:00 [INF] HTTP DELETE /api/Documents/11 responded 409 in 56.0756 ms
2025-04-29 15:58:04.756 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" completed keep alive response.
2025-04-29 15:58:04.757 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 15:58:04.759 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 15:58:04.760 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 15:58:04.761 +07:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5120/api/Documents/11 - 409 null application/json; charset=utf-8 71.768ms
2025-04-29 16:00:15.768 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" disconnecting.
2025-04-29 16:00:15.772 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" stopped.
2025-04-29 16:00:15.774 +07:00 [DBG] Connection id "0HNC6V3QBPL9G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 16:54:31.683 +07:00 [DBG] Connection id "0HNC6V3QBPL9H" accepted.
2025-04-29 16:54:31.685 +07:00 [DBG] Connection id "0HNC6V3QBPL9H" started.
2025-04-29 16:54:31.687 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-29 16:54:31.691 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-29 16:54:31.693 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-29 16:54:31.695 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 16:54:31.697 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 16:54:31.698 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 16:54:31.699 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 16:54:31.701 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 16:54:31.702 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 16:54:31.703 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 16:54:31.704 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 16:54:31.705 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 16:54:31.706 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 16:54:31.707 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 16:54:31.708 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 16:54:31.710 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 16:54:31.711 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 16:54:31.713 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 16:54:31.713 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 16:54:31.714 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 16:54:31.716 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 16:54:31.718 +07:00 [DBG] Creating DbConnection.
2025-04-29 16:54:31.719 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 16:54:31.720 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:31.724 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:31.725 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 16:54:31.726 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 16:54:31.728 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 16:54:31.729 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 16:54:31.737 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 16:54:31.739 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:31.740 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 16:54:31.741 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:31.742 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 16:54:31.744 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 16:54:31.746 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 16:54:31.747 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 16:54:31.747 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 16:54:31.748 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 16:54:31.749 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 16:54:31.749 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 16:54:31.751 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 44.7682ms
2025-04-29 16:54:31.752 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 16:54:31.752 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 55.9309 ms
2025-04-29 16:54:31.753 +07:00 [DBG] Connection id "0HNC6V3QBPL9H" completed keep alive response.
2025-04-29 16:54:31.754 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 16:54:31.755 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:31.757 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 16:54:31.758 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 70.9723ms
2025-04-29 16:54:37.118 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-29 16:54:37.123 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-29 16:54:37.124 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-29 16:54:37.126 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 16:54:37.127 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 16:54:37.128 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 16:54:37.129 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 16:54:37.132 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 16:54:37.134 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 16:54:37.135 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 16:54:37.136 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 16:54:37.137 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 16:54:37.138 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 16:54:37.139 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 16:54:37.140 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 16:54:37.141 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 16:54:37.143 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 16:54:37.144 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 16:54:37.145 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 16:54:37.146 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 16:54:37.147 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 16:54:37.149 +07:00 [DBG] Creating DbConnection.
2025-04-29 16:54:37.150 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 16:54:37.150 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:37.151 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:37.152 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 16:54:37.153 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 16:54:37.154 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 16:54:37.154 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 16:54:37.162 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[documentId] = @__id_0 AND [d0].[statusCode] = N'Listed'
2025-04-29 16:54:37.164 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 16:54:37.165 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 16:54:37.166 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 16:54:37.167 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 16:54:37.168 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 16:54:37.169 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 16:54:37.170 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 16:54:37.171 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:37.172 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 7ms reading results.
2025-04-29 16:54:37.173 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:37.174 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 16:54:37.175 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 16:54:37.178 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 16:54:37.179 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 16:54:37.180 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 16:54:37.181 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 16:54:37.182 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 16:54:37.182 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-29 16:54:37.184 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 45.3738ms
2025-04-29 16:54:37.185 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-29 16:54:37.186 +07:00 [INF] HTTP GET /api/Documents/9 responded 200 in 58.8952 ms
2025-04-29 16:54:37.187 +07:00 [DBG] Connection id "0HNC6V3QBPL9H" completed keep alive response.
2025-04-29 16:54:37.188 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 16:54:37.188 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 16:54:37.189 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 16:54:37.191 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 200 null application/json; charset=utf-8 72.5752ms
2025-04-29 16:56:48.693 +07:00 [DBG] Connection id "0HNC6V3QBPL9H" disconnecting.
2025-04-29 16:56:48.695 +07:00 [DBG] Connection id "0HNC6V3QBPL9H" stopped.
2025-04-29 16:56:48.696 +07:00 [DBG] Connection id "0HNC6V3QBPL9H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 17:25:14.928 +07:00 [INF] Application is shutting down...
2025-04-29 17:25:14.929 +07:00 [DBG] Hosting stopping
2025-04-29 17:25:14.937 +07:00 [DBG] Hosting stopped
2025-04-29 17:29:01.117 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 17:29:01.205 +07:00 [DBG] Hosting starting
2025-04-29 17:29:01.254 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 17:29:01.257 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 17:29:01.260 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 17:29:01.261 +07:00 [INF] Hosting environment: Development
2025-04-29 17:29:01.263 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 17:29:01.265 +07:00 [DBG] Hosting started
2025-04-29 17:29:04.616 +07:00 [DBG] Connection id "0HNC712L7M6SK" accepted.
2025-04-29 17:29:04.620 +07:00 [DBG] Connection id "0HNC712L7M6SK" started.
2025-04-29 17:29:04.621 +07:00 [DBG] Connection id "0HNC712L7M6SL" accepted.
2025-04-29 17:29:04.622 +07:00 [DBG] Connection id "0HNC712L7M6SL" started.
2025-04-29 17:29:04.650 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 17:29:04.658 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 17:29:04.672 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 17:29:04.674 +07:00 [DBG] Request did not match any endpoints
2025-04-29 17:29:04.758 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 79.6428 ms
2025-04-29 17:29:04.765 +07:00 [DBG] Connection id "0HNC712L7M6SK" completed keep alive response.
2025-04-29 17:29:04.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 120.295ms
2025-04-29 17:29:05.264 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 17:29:05.269 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 17:29:05.271 +07:00 [DBG] Request did not match any endpoints
2025-04-29 17:29:05.424 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 150.8363 ms
2025-04-29 17:29:05.426 +07:00 [DBG] Connection id "0HNC712L7M6SK" completed keep alive response.
2025-04-29 17:29:05.428 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 163.7185ms
2025-04-29 17:29:32.146 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine - null null
2025-04-29 17:29:32.152 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:29:32.165 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:29:32.169 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:29:32.173 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:29:32.181 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:29:32.184 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 17:29:32.186 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:29:32.215 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:29:32.222 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:29:32.223 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:29:32.229 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:29:32.231 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:29:32.233 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:29:32.235 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:29:32.315 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 17:29:32.332 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:29:32.337 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:29:32.339 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:29:32.344 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:29:32.346 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:29:32.349 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:29:32.352 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:29:32.353 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:29:32.354 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:29:32.355 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:29:32.357 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:29:32.359 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:29:32.361 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:29:32.363 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:29:32.364 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:29:32.365 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:29:32.366 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:29:32.367 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:29:32.369 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:29:32.370 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:29:32.371 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:29:32.372 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:29:32.373 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:29:32.375 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:29:32.377 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:29:32.379 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:29:32.380 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:29:32.384 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:29:32.728 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 17:29:32.731 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 17:29:32.829 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:29:32.876 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Count()'
2025-04-29 17:29:33.067 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 17:29:33.101 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:29:33.117 +07:00 [DBG] Created DbConnection. (14ms).
2025-04-29 17:29:33.121 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.229 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.234 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:29:33.239 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:29:33.245 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-29 17:29:33.251 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:29:33.288 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:29:33.302 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.310 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-29 17:29:33.317 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.321 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-29 17:29:33.328 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_1)
    .Take(__p_2)'
2025-04-29 17:29:33.335 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 17:29:33.336 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 17:29:33.338 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 17:29:33.387 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 17:29:33.430 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.433 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.435 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:29:33.436 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:29:33.437 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:29:33.438 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:29:33.450 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:29:33.470 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:29:33.512 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:29:33.516 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:29:33.528 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:29:33.532 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:29:33.543 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:29:33.549 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:29:33.554 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.555 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 101ms reading results.
2025-04-29 17:29:33.558 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.561 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 17:29:33.566 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:29:33.570 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:29:33.570 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:29:33.571 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:29:33.573 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:29:33.576 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:29:33.610 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 1372.3253ms
2025-04-29 17:29:33.614 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:29:33.616 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 1437.4601 ms
2025-04-29 17:29:33.618 +07:00 [DBG] Connection id "0HNC712L7M6SK" completed keep alive response.
2025-04-29 17:29:33.621 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:29:33.626 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:29:33.631 +07:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-04-29 17:29:33.635 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine - 200 null application/json; charset=utf-8 1489.0562ms
2025-04-29 17:30:17.445 +07:00 [DBG] Connection id "0HNC712L7M6SL" received FIN.
2025-04-29 17:30:17.448 +07:00 [DBG] Connection id "0HNC712L7M6SL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 17:30:17.450 +07:00 [DBG] Connection id "0HNC712L7M6SL" disconnecting.
2025-04-29 17:30:17.451 +07:00 [DBG] Connection id "0HNC712L7M6SL" stopped.
2025-04-29 17:31:45.201 +07:00 [DBG] Connection id "0HNC712L7M6SK" disconnecting.
2025-04-29 17:31:45.203 +07:00 [DBG] Connection id "0HNC712L7M6SK" stopped.
2025-04-29 17:31:45.204 +07:00 [DBG] Connection id "0HNC712L7M6SK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 17:32:33.859 +07:00 [DBG] Connection id "0HNC712L7M6SM" accepted.
2025-04-29 17:32:33.861 +07:00 [DBG] Connection id "0HNC712L7M6SM" started.
2025-04-29 17:32:33.863 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine - null null
2025-04-29 17:32:33.868 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:32:33.870 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:32:33.892 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:32:33.894 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:32:33.896 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:32:33.901 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:32:33.903 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:32:33.907 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:32:33.909 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:32:33.910 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:32:33.912 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:32:33.913 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:32:33.914 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:32:33.916 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:32:33.919 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:32:33.921 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:32:33.923 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:32:33.925 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:32:33.926 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:32:33.927 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:32:33.929 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:32:33.931 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:32:33.932 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:32:33.933 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:32:33.936 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:32:33.937 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:32:33.939 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:32:33.941 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:32:33.944 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:32:33.945 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:32:33.947 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:32:33.948 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:32:33.949 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:32:33.952 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:32:33.954 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:32:33.956 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:32:33.958 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:32:33.959 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:32:33.960 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:32:33.961 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:32:33.962 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:32:33.976 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:32:33.981 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:32:33.982 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:32:33.983 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:33.985 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:33.987 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:32:33.989 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:32:33.991 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 17:32:33.993 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:32:33.997 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:32:34.000 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:34.002 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-29 17:32:34.005 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:34.007 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 17:32:34.009 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:34.010 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:34.011 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:32:34.012 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:32:34.013 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:32:34.013 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:32:34.024 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:32:34.029 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.030 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.031 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.033 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.035 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.037 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.039 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.042 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.043 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.045 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.046 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:32:34.047 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:34.048 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 19ms reading results.
2025-04-29 17:32:34.049 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:34.051 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:32:34.053 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:32:34.057 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:32:34.057 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:32:34.058 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:32:34.059 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:32:34.060 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:32:34.061 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 147.4886ms
2025-04-29 17:32:34.063 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:32:34.064 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 167.7191 ms
2025-04-29 17:32:34.065 +07:00 [DBG] Connection id "0HNC712L7M6SM" completed keep alive response.
2025-04-29 17:32:34.066 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:32:34.067 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:32:34.070 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 17:32:34.072 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine - 200 null application/json; charset=utf-8 208.911ms
2025-04-29 17:34:29.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine - null null
2025-04-29 17:34:29.252 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:34:29.254 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:34:29.257 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:34:29.278 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:34:29.280 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:34:29.281 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:34:29.284 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:34:29.288 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:34:29.290 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:34:29.292 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:34:29.294 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:34:29.297 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:34:29.299 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:34:29.305 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:34:29.307 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:34:29.309 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:34:29.311 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:34:29.313 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:34:29.314 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:34:29.315 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:34:29.316 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:34:29.318 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:34:29.319 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:34:29.322 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:34:29.324 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:34:29.325 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:34:29.328 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:34:29.330 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:34:29.331 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:34:29.332 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:34:29.333 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:34:29.334 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:34:29.335 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:34:29.337 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:34:29.339 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:34:29.341 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:34:29.342 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:34:29.344 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:34:29.344 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:34:29.345 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:34:29.346 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:34:29.392 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:34:29.395 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:34:29.396 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:34:29.397 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.398 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.399 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:34:29.399 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:34:29.400 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:34:29.401 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:34:29.409 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:34:29.412 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.413 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:34:29.414 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.415 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:34:29.417 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.418 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.420 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:34:29.421 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:34:29.422 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:34:29.423 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:34:29.433 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:34:29.439 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.442 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.443 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.444 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.445 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.447 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.448 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.450 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.451 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.453 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.454 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:34:29.458 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.459 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 21ms reading results.
2025-04-29 17:34:29.460 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.461 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:34:29.464 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:34:29.466 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:34:29.467 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:34:29.468 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:34:29.469 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:34:29.471 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:34:29.474 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 175.0694ms
2025-04-29 17:34:29.476 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:34:29.477 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 197.6003 ms
2025-04-29 17:34:29.479 +07:00 [DBG] Connection id "0HNC712L7M6SM" completed keep alive response.
2025-04-29 17:34:29.480 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:34:29.481 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:34:29.484 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 17:34:29.485 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine - 200 null application/json; charset=utf-8 235.1953ms
2025-04-29 17:34:34.612 +07:00 [DBG] Connection id "0HNC712L7M6SM" received FIN.
2025-04-29 17:34:34.617 +07:00 [DBG] Connection id "0HNC712L7M6SM" disconnecting.
2025-04-29 17:34:34.619 +07:00 [DBG] Connection id "0HNC712L7M6SM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 17:34:34.627 +07:00 [DBG] Connection id "0HNC712L7M6SM" stopped.
2025-04-29 17:34:37.358 +07:00 [INF] Application is shutting down...
2025-04-29 17:34:37.359 +07:00 [DBG] Hosting stopping
2025-04-29 17:34:37.366 +07:00 [DBG] Hosting stopped
2025-04-29 17:36:02.960 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 17:36:03.044 +07:00 [DBG] Hosting starting
2025-04-29 17:36:03.085 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 17:36:03.089 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 17:36:03.090 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 17:36:03.092 +07:00 [INF] Hosting environment: Development
2025-04-29 17:36:03.093 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 17:36:03.095 +07:00 [DBG] Hosting started
2025-04-29 17:36:13.947 +07:00 [DBG] Connection id "0HNC716L63KQM" accepted.
2025-04-29 17:36:13.951 +07:00 [DBG] Connection id "0HNC716L63KQM" started.
2025-04-29 17:36:13.952 +07:00 [DBG] Connection id "0HNC716L63KQN" accepted.
2025-04-29 17:36:13.955 +07:00 [DBG] Connection id "0HNC716L63KQN" started.
2025-04-29 17:36:14.944 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 17:36:14.953 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 17:36:14.979 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 17:36:14.981 +07:00 [DBG] Request did not match any endpoints
2025-04-29 17:36:15.165 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 174.3971 ms
2025-04-29 17:36:15.168 +07:00 [DBG] Connection id "0HNC716L63KQM" completed keep alive response.
2025-04-29 17:36:15.172 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 228.1773ms
2025-04-29 17:36:28.819 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine - null null
2025-04-29 17:36:28.830 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:36:28.869 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:36:28.875 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:36:28.879 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:36:28.886 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:36:28.889 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 17:36:28.893 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:36:28.920 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:36:28.928 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:36:28.929 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:36:28.931 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:36:28.933 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:36:28.935 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:36:28.940 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:36:29.008 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 17:36:29.026 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:36:29.032 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:36:29.036 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:36:29.041 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:36:29.045 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:36:29.049 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:36:29.052 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:36:29.054 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:36:29.056 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:36:29.057 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:36:29.059 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:36:29.063 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:36:29.065 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:36:29.067 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:36:29.069 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:36:29.070 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:36:29.073 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:36:29.074 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:36:29.076 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:36:29.080 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:36:29.082 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:36:29.083 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:36:29.085 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:36:29.087 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:36:29.089 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:36:29.092 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:36:29.094 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:36:29.099 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:36:29.448 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 17:36:29.451 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 17:36:29.555 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:36:29.600 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Count()'
2025-04-29 17:36:29.808 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 17:36:29.846 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:36:29.863 +07:00 [DBG] Created DbConnection. (15ms).
2025-04-29 17:36:29.867 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:29.987 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:29.991 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:36:29.998 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-29 17:36:30.006 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-04-29 17:36:30.015 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:36:30.051 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:36:30.065 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:30.071 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 13ms reading results.
2025-04-29 17:36:30.077 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:30.082 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-29 17:36:30.087 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_1)
    .Take(__p_2)'
2025-04-29 17:36:30.095 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 17:36:30.097 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 17:36:30.098 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 17:36:30.147 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 17:36:30.197 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:30.198 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:30.200 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:36:30.201 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:36:30.202 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:36:30.203 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:36:30.215 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:36:30.237 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.285 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.292 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.299 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.303 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.312 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.314 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.320 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.322 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.326 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.327 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:36:30.329 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:30.331 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 112ms reading results.
2025-04-29 17:36:30.333 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:30.334 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:36:30.339 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:36:30.344 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:36:30.345 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:36:30.347 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:36:30.349 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:36:30.350 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:36:30.412 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 1471.063ms
2025-04-29 17:36:30.414 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:36:30.416 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 1532.2545 ms
2025-04-29 17:36:30.418 +07:00 [DBG] Connection id "0HNC716L63KQM" completed keep alive response.
2025-04-29 17:36:30.422 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:36:30.427 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:36:30.429 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 17:36:30.431 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine - 200 null application/json; charset=utf-8 1612.5988ms
2025-04-29 17:37:24.629 +07:00 [DBG] Connection id "0HNC716L63KQN" received FIN.
2025-04-29 17:37:24.634 +07:00 [DBG] Connection id "0HNC716L63KQN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 17:37:24.636 +07:00 [DBG] Connection id "0HNC716L63KQN" disconnecting.
2025-04-29 17:37:24.638 +07:00 [DBG] Connection id "0HNC716L63KQN" stopped.
2025-04-29 17:37:27.385 +07:00 [DBG] Connection id "0HNC716L63KQM" received FIN.
2025-04-29 17:37:27.388 +07:00 [DBG] Connection id "0HNC716L63KQM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 17:37:27.389 +07:00 [DBG] Connection id "0HNC716L63KQM" disconnecting.
2025-04-29 17:37:27.396 +07:00 [DBG] Connection id "0HNC716L63KQM" stopped.
2025-04-29 17:37:29.236 +07:00 [INF] Application is shutting down...
2025-04-29 17:37:29.236 +07:00 [DBG] Hosting stopping
2025-04-29 17:37:29.243 +07:00 [DBG] Hosting stopped
2025-04-29 17:38:47.793 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 17:38:47.875 +07:00 [DBG] Hosting starting
2025-04-29 17:38:47.916 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 17:38:47.920 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 17:38:47.921 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 17:38:47.924 +07:00 [INF] Hosting environment: Development
2025-04-29 17:38:47.925 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 17:38:47.925 +07:00 [DBG] Hosting started
2025-04-29 17:38:56.468 +07:00 [DBG] Connection id "0HNC7185K10C6" accepted.
2025-04-29 17:38:56.472 +07:00 [DBG] Connection id "0HNC7185K10C6" started.
2025-04-29 17:38:56.497 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=InStock - null null
2025-04-29 17:38:56.507 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 17:38:56.529 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:38:56.537 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:38:56.540 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:38:56.542 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:38:56.557 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:38:56.559 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 17:38:56.561 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:38:56.585 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:38:56.594 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:38:56.596 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:38:56.598 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:38:56.600 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:38:56.601 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:38:56.605 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:38:56.681 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 17:38:56.697 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:38:56.708 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:38:56.713 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:38:56.717 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:38:56.722 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:38:56.725 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:38:56.729 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:38:56.731 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:38:56.732 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:38:56.734 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:38:56.736 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:38:56.738 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:38:56.739 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:38:56.741 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:38:56.743 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:38:56.745 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:38:56.746 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:38:56.747 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:38:56.749 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:38:56.750 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:38:56.751 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:38:56.753 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:38:56.755 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:38:56.757 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:38:56.759 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:38:56.760 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:38:56.765 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:38:57.126 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 17:38:57.130 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 17:38:57.242 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:38:57.311 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == __queryParams_Status_1)
    .OrderByDescending(d => d.DocumentId)
    .Count()'
2025-04-29 17:38:57.505 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && (d0.statusCode == @__queryParams_Status_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && (d0.statusCode == @__queryParams_Status_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 17:38:57.542 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:38:57.559 +07:00 [DBG] Created DbConnection. (14ms).
2025-04-29 17:38:57.563 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:57.682 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:57.687 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:38:57.692 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-29 17:38:57.698 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-29 17:38:57.706 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:38:57.745 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:38:57.761 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:57.768 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-04-29 17:38:57.772 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:57.778 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-04-29 17:38:57.782 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == __queryParams_Status_1)
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_2)
    .Take(__p_3)'
2025-04-29 17:38:57.787 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 17:38:57.791 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 17:38:57.794 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 17:38:57.847 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && (d0.statusCode == @__queryParams_Status_1)
            ORDER BY d.documentId DESC
            OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && (d0.statusCode == @__queryParams_Status_1)
            ORDER BY d.documentId DESC
            OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 17:38:57.883 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:57.885 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:57.887 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:38:57.888 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:38:57.889 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:38:57.890 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:38:57.900 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:38:57.920 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:38:57.966 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:38:57.974 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:38:57.986 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:38:57.993 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:38:58.003 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:38:58.007 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:38:58.014 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:58.016 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 111ms reading results.
2025-04-29 17:38:58.017 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:58.019 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:38:58.024 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:38:58.031 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:38:58.032 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:38:58.032 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:38:58.034 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:38:58.035 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:38:58.096 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 1490.382ms
2025-04-29 17:38:58.100 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:38:58.104 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 1555.0540 ms
2025-04-29 17:38:58.107 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:38:58.110 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:38:58.113 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:38:58.115 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:38:58.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=InStock - 200 null application/json; charset=utf-8 1620.9923ms
2025-04-29 17:39:52.010 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=Listed - null null
2025-04-29 17:39:52.016 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:39:52.039 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:39:52.044 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:39:52.050 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:39:52.054 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:39:52.055 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:39:52.056 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:39:52.057 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:39:52.058 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:39:52.059 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:39:52.061 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:39:52.065 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:39:52.066 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:39:52.069 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:39:52.071 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:39:52.072 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:39:52.073 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:39:52.074 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:39:52.075 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:39:52.076 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:39:52.078 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:39:52.079 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:39:52.081 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:39:52.083 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:39:52.084 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:39:52.086 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:39:52.088 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:39:52.089 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:39:52.090 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:39:52.091 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:39:52.092 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:39:52.093 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:39:52.095 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:39:52.096 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:39:52.098 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:39:52.100 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:39:52.101 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:39:52.102 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:39:52.103 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:39:52.104 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:39:52.117 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:39:52.121 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:39:52.121 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:39:52.122 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.123 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.124 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:39:52.125 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:39:52.125 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:39:52.126 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:39:52.135 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:39:52.138 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.139 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:39:52.140 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.141 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:39:52.143 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.144 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.145 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:39:52.147 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:39:52.148 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:39:52.149 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:39:52.158 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:39:52.160 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:39:52.162 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:39:52.164 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:39:52.165 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:39:52.167 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:39:52.169 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:39:52.170 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:39:52.172 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.173 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-29 17:39:52.174 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.175 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:39:52.176 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:39:52.178 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:39:52.178 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:39:52.180 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:39:52.181 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:39:52.182 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:39:52.184 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 118.0859ms
2025-04-29 17:39:52.185 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:39:52.186 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 133.1117 ms
2025-04-29 17:39:52.187 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:39:52.189 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:39:52.189 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:39:52.190 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:39:52.191 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=Listed - 200 null application/json; charset=utf-8 181.7393ms
2025-04-29 17:40:08.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=PendingSale - null null
2025-04-29 17:40:08.493 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:40:08.496 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:40:08.500 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:40:08.502 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:40:08.505 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:40:08.506 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:40:08.507 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:40:08.508 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:40:08.510 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:40:08.512 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:40:08.515 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:40:08.517 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:40:08.518 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:40:08.523 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:40:08.524 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:40:08.525 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:40:08.526 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:40:08.529 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:40:08.530 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:40:08.531 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:40:08.533 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:40:08.535 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:40:08.536 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:40:08.538 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:40:08.539 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:40:08.540 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:40:08.541 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:40:08.542 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:40:08.544 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:40:08.546 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:40:08.548 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:40:08.549 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:40:08.550 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:40:08.551 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:40:08.552 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:40:08.554 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:40:08.555 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:40:08.555 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:40:08.556 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:40:08.557 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:40:08.602 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:40:08.607 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:40:08.609 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:40:08.612 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.613 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.614 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:40:08.615 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:40:08.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:40:08.617 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:40:08.620 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:40:08.622 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.623 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:40:08.624 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.624 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:40:08.626 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.628 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.629 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:40:08.630 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:40:08.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:40:08.632 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:40:08.636 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:40:08.639 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.640 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:40:08.641 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.642 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:40:08.645 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:40:08.647 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:40:08.647 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:40:08.648 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:40:08.650 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:40:08.651 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:40:08.652 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 134.6576ms
2025-04-29 17:40:08.653 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:40:08.654 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 149.8493 ms
2025-04-29 17:40:08.655 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:40:08.656 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:40:08.657 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:08.658 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:40:08.659 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=PendingSale - 200 null application/json; charset=utf-8 171.0163ms
2025-04-29 17:40:34.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=dhn%20 - null null
2025-04-29 17:40:34.333 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:40:34.335 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:40:34.337 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:40:34.342 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:40:34.345 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:40:34.346 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:40:34.348 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:40:34.350 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:40:34.355 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:40:34.357 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:40:34.359 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:40:34.361 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:40:34.363 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:40:34.364 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:40:34.366 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:40:34.367 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:40:34.368 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:40:34.370 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:40:34.371 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:40:34.372 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:40:34.376 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:40:34.377 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:40:34.379 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:40:34.382 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:40:34.383 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:40:34.384 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:40:34.386 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:40:34.387 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:40:34.388 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:40:34.390 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:40:34.393 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:40:34.396 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:40:34.397 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:40:34.399 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:40:34.400 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:40:34.401 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:40:34.403 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:40:34.403 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:40:34.404 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:40:34.406 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:40:34.409 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:40:34.412 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:40:34.412 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:40:34.413 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.414 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.415 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:40:34.416 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:40:34.416 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:40:34.417 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:40:34.422 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:40:34.426 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.427 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:40:34.428 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.429 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:40:34.431 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.432 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.433 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:40:34.433 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:40:34.434 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:40:34.435 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:40:34.445 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:40:34.448 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.449 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:40:34.450 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.450 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:40:34.452 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:40:34.453 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:40:34.454 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:40:34.454 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:40:34.455 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:40:34.456 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:40:34.458 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 94.8813ms
2025-04-29 17:40:34.461 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:40:34.462 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 117.1228 ms
2025-04-29 17:40:34.463 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:40:34.464 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:40:34.465 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:40:34.466 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:40:34.466 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=dhn%20 - 200 null application/json; charset=utf-8 137.7634ms
2025-04-29 17:41:05.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=2 - null null
2025-04-29 17:41:05.335 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:41:05.341 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:05.345 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:05.348 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:05.353 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:41:05.354 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:05.359 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:41:05.364 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:41:05.367 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:41:05.368 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:41:05.370 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:41:05.373 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:41:05.374 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:05.376 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:05.378 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:05.380 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:41:05.382 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:41:05.383 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:41:05.384 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:41:05.386 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:05.389 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:05.391 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:41:05.393 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:05.394 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:05.395 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:41:05.396 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:05.398 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:05.399 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:41:05.400 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:05.402 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:05.405 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:41:05.408 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:05.409 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:05.411 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:41:05.412 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:05.414 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:05.415 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:05.416 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:05.417 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:05.418 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:05.421 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:41:05.423 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:41:05.424 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:41:05.426 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.428 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.429 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:05.430 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:41:05.430 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:05.432 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:05.435 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:05.439 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.441 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:41:05.444 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.446 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 17:41:05.448 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.449 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.451 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:05.453 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:05.456 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 17:41:05.458 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:05.462 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:05.466 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.467 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:41:05.469 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.471 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 17:41:05.473 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:41:05.475 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:41:05.477 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:41:05.478 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:41:05.479 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:41:05.480 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:41:05.481 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 107.4807ms
2025-04-29 17:41:05.483 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:05.484 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 130.9981 ms
2025-04-29 17:41:05.486 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:41:05.488 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:41:05.489 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:05.491 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 17:41:05.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=2 - 200 null application/json; charset=utf-8 163.5773ms
2025-04-29 17:41:13.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=3645 - null null
2025-04-29 17:41:13.740 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:41:13.742 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:13.744 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:13.746 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:13.748 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:41:13.750 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:13.752 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:41:13.757 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:41:13.760 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:41:13.761 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:41:13.764 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:41:13.765 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:41:13.767 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:13.769 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:13.771 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:13.773 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:41:13.775 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:41:13.777 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:41:13.779 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:41:13.781 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:13.785 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:13.787 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:41:13.789 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:13.791 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:13.792 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:41:13.794 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:13.796 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:13.798 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:41:13.799 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:13.800 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:13.802 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:41:13.804 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:13.806 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:13.808 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:41:13.809 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:13.811 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:13.812 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:13.813 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:13.814 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:13.815 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:13.817 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:41:13.820 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:41:13.821 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:41:13.822 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.824 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.825 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:13.825 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:41:13.826 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:13.827 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:13.830 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:13.832 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.833 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:41:13.835 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.837 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:41:13.839 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.841 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.843 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:13.844 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:13.846 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 17:41:13.847 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:13.852 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:13.857 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.859 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:41:13.861 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.862 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:41:13.863 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:41:13.865 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:41:13.866 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:41:13.867 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:41:13.868 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:41:13.870 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:41:13.872 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 105.3635ms
2025-04-29 17:41:13.874 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:13.875 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 126.8916 ms
2025-04-29 17:41:13.878 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:41:13.880 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:41:13.882 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:13.883 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:41:13.886 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=3645 - 200 null application/json; charset=utf-8 148.3675ms
2025-04-29 17:41:19.568 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=2 - null null
2025-04-29 17:41:19.572 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:41:19.577 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:19.579 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:19.582 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:19.607 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:41:19.610 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:19.617 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:41:19.621 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:41:19.623 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:41:19.625 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:41:19.630 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:41:19.632 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:41:19.635 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:19.637 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:19.639 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:19.641 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:41:19.644 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:41:19.646 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:41:19.648 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:41:19.650 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:19.652 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:19.655 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:41:19.658 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:19.660 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:19.662 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:41:19.664 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:19.666 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:19.668 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:41:19.670 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:19.672 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:19.673 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:41:19.674 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:19.676 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:19.677 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:41:19.678 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:19.680 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:19.681 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:19.682 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:19.683 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:19.684 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:19.687 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:41:19.689 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:41:19.690 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:41:19.691 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.694 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.695 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:19.696 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:41:19.697 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:19.697 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:19.701 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:19.705 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.706 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:41:19.708 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.709 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:41:19.711 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.712 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.713 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:19.714 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:41:19.715 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:19.716 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:19.721 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:19.725 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.726 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:41:19.727 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.728 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:41:19.729 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:41:19.731 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:41:19.732 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:41:19.732 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:41:19.733 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:41:19.734 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:41:19.736 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 101.9336ms
2025-04-29 17:41:19.738 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:19.739 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 131.9385 ms
2025-04-29 17:41:19.741 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:41:19.742 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:41:19.743 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:19.745 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:41:19.746 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=2 - 200 null application/json; charset=utf-8 177.6204ms
2025-04-29 17:41:24.366 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=1 - null null
2025-04-29 17:41:24.370 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:41:24.372 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:24.374 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:24.377 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:24.379 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:41:24.380 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:24.381 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:41:24.383 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:41:24.384 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:41:24.386 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:41:24.389 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:41:24.390 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:41:24.392 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:24.393 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:24.395 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:24.397 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:41:24.398 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:41:24.400 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:41:24.402 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:41:24.404 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:24.406 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:24.408 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:41:24.411 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:24.413 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:24.415 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:41:24.418 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:24.420 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:24.422 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:41:24.424 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:24.427 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:24.428 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:41:24.430 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:24.431 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:24.433 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:41:24.436 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:24.438 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:24.440 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:24.442 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:24.443 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:24.444 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:24.447 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:41:24.449 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:41:24.450 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:41:24.451 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.453 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.454 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:24.456 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:24.457 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:41:24.458 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:24.463 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:24.465 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.467 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:41:24.469 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.470 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:41:24.472 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.474 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.475 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:24.477 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:24.478 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:41:24.479 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:24.489 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:24.492 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.493 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:41:24.494 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.495 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:41:24.497 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:41:24.499 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:41:24.499 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:41:24.500 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:41:24.501 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:41:24.503 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:41:24.504 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 112.3461ms
2025-04-29 17:41:24.506 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:24.507 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 128.1618 ms
2025-04-29 17:41:24.509 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:41:24.511 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:41:24.512 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:24.513 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:41:24.515 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=1 - 200 null application/json; charset=utf-8 148.5892ms
2025-04-29 17:41:56.746 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=2 - null null
2025-04-29 17:41:56.750 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:41:56.752 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:56.755 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:41:56.757 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:56.759 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:41:56.760 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:56.762 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:41:56.764 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:41:56.767 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:41:56.770 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:41:56.773 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:41:56.775 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:41:56.776 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:56.778 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:41:56.780 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:56.783 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:41:56.786 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:41:56.788 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:41:56.790 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:41:56.791 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:56.793 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:41:56.794 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:41:56.797 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:56.803 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:41:56.805 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:41:56.806 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:56.807 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:41:56.808 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:41:56.809 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:56.810 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:41:56.811 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:41:56.813 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:56.816 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:41:56.818 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:41:56.819 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:56.820 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:41:56.821 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:56.822 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:56.823 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:41:56.823 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:41:56.825 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:41:56.827 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:41:56.827 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:41:56.828 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.829 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.832 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:56.833 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:56.835 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:41:56.835 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:56.841 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
2025-04-29 17:41:56.843 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.844 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:41:56.845 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.849 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (3ms).
2025-04-29 17:41:56.851 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.852 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.853 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:41:56.854 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:41:56.855 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:41:56.856 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:56.866 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_Status_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] = @__queryParams_Status_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:41:56.869 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.870 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:41:56.871 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.872 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:41:56.873 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:41:56.874 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:41:56.875 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:41:56.875 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:41:56.876 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:41:56.876 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:41:56.878 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 101.4898ms
2025-04-29 17:41:56.879 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:41:56.882 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 122.8209 ms
2025-04-29 17:41:56.884 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:41:56.885 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:41:56.886 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:41:56.887 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:41:56.888 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Status=2 - 200 null application/json; charset=utf-8 141.9507ms
2025-04-29 17:42:12.709 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?CategoryId=2 - null null
2025-04-29 17:42:12.712 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:42:12.714 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:42:12.717 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:42:12.720 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:42:12.722 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:42:12.724 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:42:12.726 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:42:12.730 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:42:12.734 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:42:12.736 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:42:12.738 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:42:12.740 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:42:12.742 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:42:12.745 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:42:12.748 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:42:12.752 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:42:12.754 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:42:12.756 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:42:12.757 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:42:12.758 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:42:12.760 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:42:12.763 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:42:12.765 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:42:12.767 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:42:12.768 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:42:12.770 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:42:12.771 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:42:12.772 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:42:12.773 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:42:12.774 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:42:12.776 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:42:12.777 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:42:12.779 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:42:12.781 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:42:12.782 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:42:12.783 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:42:12.785 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:42:12.787 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:42:12.788 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:42:12.789 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:42:12.790 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:42:12.795 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .Where(d => d.CategoryId == __queryParams_CategoryId_Value_1)
    .OrderByDescending(d => d.DocumentId)
    .Count()'
2025-04-29 17:42:12.806 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (d.categoryId == @__queryParams_CategoryId_Value_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (d.categoryId == @__queryParams_CategoryId_Value_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 17:42:12.817 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:42:12.819 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:42:12.821 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.823 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.824 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:42:12.825 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:42:12.827 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:42:12.829 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
2025-04-29 17:42:12.835 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
2025-04-29 17:42:12.838 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.840 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:42:12.841 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.843 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:42:12.846 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .Where(d => d.CategoryId == __queryParams_CategoryId_Value_1)
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_2)
    .Take(__p_3)'
2025-04-29 17:42:12.850 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 17:42:12.851 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 17:42:12.852 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 17:42:12.866 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (d.categoryId == @__queryParams_CategoryId_Value_1)
            ORDER BY d.documentId DESC
            OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (d.categoryId == @__queryParams_CategoryId_Value_1)
            ORDER BY d.documentId DESC
            OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 17:42:12.907 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.909 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.910 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:42:12.911 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:42:12.913 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:42:12.914 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:42:12.922 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:42:12.925 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.926 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:42:12.928 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.930 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:42:12.932 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:42:12.933 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:42:12.934 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:42:12.935 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:42:12.935 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:42:12.937 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:42:12.938 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 195.7002ms
2025-04-29 17:42:12.939 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:42:12.940 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 218.0013 ms
2025-04-29 17:42:12.941 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:42:12.942 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:42:12.943 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:12.944 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:42:12.946 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?CategoryId=2 - 200 null application/json; charset=utf-8 236.8794ms
2025-04-29 17:42:18.690 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?CategoryId=1 - null null
2025-04-29 17:42:18.696 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:42:18.698 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:42:18.700 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:42:18.702 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:42:18.704 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:42:18.706 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:42:18.708 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:42:18.710 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:42:18.713 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:42:18.716 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:42:18.719 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:42:18.720 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:42:18.722 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:42:18.723 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:42:18.724 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:42:18.725 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:42:18.727 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:42:18.731 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:42:18.733 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:42:18.734 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:42:18.736 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:42:18.739 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:42:18.740 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:42:18.742 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:42:18.743 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:42:18.745 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:42:18.747 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:42:18.749 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:42:18.750 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:42:18.752 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:42:18.753 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:42:18.754 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:42:18.756 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:42:18.757 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:42:18.758 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:42:18.761 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:42:18.763 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:42:18.764 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:42:18.766 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:42:18.767 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:42:18.771 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:42:18.773 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:42:18.774 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:42:18.775 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.776 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.778 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:42:18.779 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:42:18.781 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:42:18.782 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
2025-04-29 17:42:18.786 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
2025-04-29 17:42:18.788 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.789 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:42:18.790 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.791 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:42:18.795 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.796 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.797 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:42:18.798 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:42:18.799 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:42:18.801 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:42:18.807 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__queryParams_CategoryId_Value_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND [d].[categoryId] = @__queryParams_CategoryId_Value_1
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:42:18.812 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.815 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.816 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.817 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.819 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.820 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.821 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.824 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.825 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.827 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.829 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:42:18.831 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.832 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 20ms reading results.
2025-04-29 17:42:18.833 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.834 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:42:18.835 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:42:18.836 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:42:18.837 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:42:18.837 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:42:18.838 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:42:18.839 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:42:18.840 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 118.217ms
2025-04-29 17:42:18.841 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:42:18.842 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 137.5507 ms
2025-04-29 17:42:18.843 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:42:18.845 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:42:18.846 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:42:18.847 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:42:18.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?CategoryId=1 - 200 null application/json; charset=utf-8 159.1508ms
2025-04-29 17:44:02.154 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=successful - null null
2025-04-29 17:44:02.157 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:44:02.158 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:44:02.160 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:44:02.163 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:02.166 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:44:02.169 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:02.171 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:44:02.176 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:44:02.178 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:44:02.179 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:44:02.181 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:44:02.184 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:44:02.185 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:44:02.187 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:44:02.188 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:44:02.189 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:44:02.190 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:44:02.192 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:44:02.193 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:44:02.195 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:44:02.196 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:44:02.199 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:44:02.201 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:44:02.203 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:44:02.204 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:44:02.206 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:44:02.207 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:44:02.208 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:44:02.210 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:44:02.211 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:44:02.213 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:44:02.216 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:44:02.219 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:44:02.220 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:44:02.221 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:44:02.223 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:44:02.224 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:02.225 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:02.226 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:44:02.227 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:02.229 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:44:02.234 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .Where(d => d.Title.ToLower().Contains(__searchTerm_1) || d.Author != null && d.Author.ToLower().Contains(__searchTerm_1) || d.Isbn != null && d.Isbn.ToLower().Contains(__searchTerm_1))
    .OrderByDescending(d => d.DocumentId)
    .Count()'
2025-04-29 17:44:02.243 +07:00 [DBG] Generated query execution expression: 
'queryContext => 
{
    queryContext.AddParameter(
        name: "__searchTerm_1_contains", 
        value: (object)Invoke(queryContext => SqlServerSqlTranslatingExpressionVisitor.ConstructLikePatternParameter(
            queryContext: queryContext, 
            baseParameterName: "__searchTerm_1", 
            methodType: Contains), queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT COUNT(*)
                FROM document AS d
                INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
                WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (((LOWER(d.title) LIKE @__searchTerm_1_contains ESCAPE N'\') || ((d.author != NULL) && (LOWER(d.author) LIKE @__searchTerm_1_contains ESCAPE N'\'))) || ((d.ISBN != NULL) && (LOWER(d.ISBN) LIKE @__searchTerm_1_contains ESCAPE N'\')))) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT COUNT(*)
                FROM document AS d
                INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
                WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (((LOWER(d.title) LIKE @__searchTerm_1_contains ESCAPE N'\') || ((d.author != NULL) && (LOWER(d.author) LIKE @__searchTerm_1_contains ESCAPE N'\'))) || ((d.ISBN != NULL) && (LOWER(d.ISBN) LIKE @__searchTerm_1_contains ESCAPE N'\'))), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
                return (int)value1;
            }, 
            contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: False, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}'
2025-04-29 17:44:02.253 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:44:02.254 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:44:02.256 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.257 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.259 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:44:02.260 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:44:02.261 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:44:02.262 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:44:02.274 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:44:02.278 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.279 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:44:02.283 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.285 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 17:44:02.288 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .Where(d => d.Title.ToLower().Contains(__searchTerm_1) || d.Author != null && d.Author.ToLower().Contains(__searchTerm_1) || d.Isbn != null && d.Isbn.ToLower().Contains(__searchTerm_1))
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_2)
    .Take(__p_3)'
2025-04-29 17:44:02.291 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 17:44:02.292 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 17:44:02.293 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 17:44:02.306 +07:00 [DBG] Generated query execution expression: 
'queryContext => 
{
    queryContext.AddParameter(
        name: "__searchTerm_1_contains", 
        value: (object)Invoke(queryContext => SqlServerSqlTranslatingExpressionVisitor.ConstructLikePatternParameter(
            queryContext: queryContext, 
            baseParameterName: "__searchTerm_1", 
            methodType: Contains), queryContext));
    return SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
            FROM 
            (
                SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
                FROM document AS d
                INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
                WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (((LOWER(d.title) LIKE @__searchTerm_1_contains ESCAPE N'\') || ((d.author != NULL) && (LOWER(d.author) LIKE @__searchTerm_1_contains ESCAPE N'\'))) || ((d.ISBN != NULL) && (LOWER(d.ISBN) LIKE @__searchTerm_1_contains ESCAPE N'\')))
                ORDER BY d.documentId DESC
                OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
            ) AS s
            INNER JOIN categories AS c ON s.categoryId == c.categoryId
            INNER JOIN users AS u ON s.userId == u.userId
            ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
                3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
            SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
            FROM 
            (
                SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
                FROM document AS d
                INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
                WHERE ((Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) && (((LOWER(d.title) LIKE @__searchTerm_1_contains ESCAPE N'\') || ((d.author != NULL) && (LOWER(d.author) LIKE @__searchTerm_1_contains ESCAPE N'\'))) || ((d.ISBN != NULL) && (LOWER(d.ISBN) LIKE @__searchTerm_1_contains ESCAPE N'\')))
                ORDER BY d.documentId DESC
                OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
            ) AS s
            INNER JOIN categories AS c ON s.categoryId == c.categoryId
            INNER JOIN users AS u ON s.userId == u.userId
            ORDER BY s.documentId DESC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            DocumentStatus entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                    instance.<Title>k__BackingField = dataReader.GetString(13);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                    instance.<Email>k__BackingField = dataReader.GetString(18);
                                    instance.<FullName>k__BackingField = dataReader.GetString(19);
                                    instance.<Password>k__BackingField = dataReader.GetString(20);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            entity = 
            {
                MaterializationContext materializationContext4;
                IEntityType entityType4;
                DocumentStatus instance4;
                InternalEntityEntry entry4;
                bool hasNullKey4;
                materializationContext4 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance4 = default(DocumentStatus);
                entry4 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey4);
                !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
                {
                    entityType4 = entry4.EntityType;
                    return instance4 = (DocumentStatus)entry4.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot4;
                    shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                    instance4 = switch (entityType4)
                    {
                        case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                            {
                                return 
                                {
                                    DocumentStatus instance;
                                    instance = new DocumentStatus();
                                    instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                    instance.<Code>k__BackingField = dataReader.GetString(24);
                                    instance.<Name>k__BackingField = dataReader.GetString(25);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext4.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(DocumentStatus)
                    }
                    ;
                    entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType4, 
                        entity: instance4, 
                        snapshot: shadowSnapshot4);
                    return instance4;
                } : default(void);
                return instance4;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{14}, namelessParameter{15}) => 
                {
                    namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{15}, 
                        value: namelessParameter{14}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{19}, namelessParameter{20}) => 
                {
                    namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{20}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
                fixup: (namelessParameter{24}, namelessParameter{25}) => 
                {
                    namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                    return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{25}, 
                        value: namelessParameter{24}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True);
}'
2025-04-29 17:44:02.359 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.361 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.363 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:44:02.364 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:44:02.366 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 17:44:02.369 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:44:02.380 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:44:02.387 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:02.389 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:02.390 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:02.392 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:02.393 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:02.394 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:02.395 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:02.399 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.401 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 14ms reading results.
2025-04-29 17:44:02.402 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.404 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:44:02.405 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:44:02.408 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:44:02.409 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:44:02.409 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:44:02.410 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:44:02.411 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:44:02.413 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 228.173ms
2025-04-29 17:44:02.415 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:02.417 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 250.8388 ms
2025-04-29 17:44:02.419 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:44:02.420 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:44:02.421 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:02.423 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:44:02.424 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=successful - 200 null application/json; charset=utf-8 270.2163ms
2025-04-29 17:44:11.463 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=i - null null
2025-04-29 17:44:11.467 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:44:11.469 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:44:11.472 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:44:11.475 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:11.476 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:44:11.477 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:11.478 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:44:11.480 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:44:11.482 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:44:11.483 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:44:11.484 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:44:11.486 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:44:11.488 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:44:11.490 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:44:11.492 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:44:11.493 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:44:11.494 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:44:11.496 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:44:11.498 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:44:11.500 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:44:11.502 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:44:11.504 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:44:11.505 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:44:11.506 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:44:11.508 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:44:11.509 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:44:11.510 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:44:11.511 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:44:11.514 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:44:11.516 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:44:11.517 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:44:11.519 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:44:11.521 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:44:11.522 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:44:11.524 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:44:11.525 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:44:11.526 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:11.527 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:11.528 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:44:11.529 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:11.532 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:44:11.535 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:44:11.535 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:44:11.536 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.537 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.538 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:44:11.539 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:44:11.540 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:44:11.541 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:44:11.544 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:44:11.547 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.548 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:44:11.549 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.551 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:44:11.554 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.555 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.557 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:44:11.557 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:44:11.559 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:44:11.559 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:44:11.565 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:44:11.571 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.573 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.574 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.575 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.576 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.577 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.578 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.580 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.582 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.583 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.584 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:11.586 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.589 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 17ms reading results.
2025-04-29 17:44:11.591 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.593 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:44:11.594 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:44:11.599 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:44:11.600 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:44:11.601 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:44:11.602 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:44:11.603 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:44:11.604 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 116.8217ms
2025-04-29 17:44:11.606 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:11.607 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 131.2504 ms
2025-04-29 17:44:11.608 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:44:11.610 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:44:11.611 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:11.613 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:44:11.614 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=i - 200 null application/json; charset=utf-8 150.7706ms
2025-04-29 17:44:23.113 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=will%20be - null null
2025-04-29 17:44:23.116 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:44:23.117 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:44:23.118 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:44:23.120 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:23.122 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:44:23.144 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:23.147 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:44:23.155 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:44:23.157 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:44:23.158 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:44:23.159 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:44:23.160 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:44:23.162 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:44:23.164 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:44:23.165 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:44:23.166 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:44:23.168 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:44:23.170 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:44:23.171 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:44:23.172 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:44:23.173 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:44:23.174 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:44:23.175 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:44:23.177 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:44:23.178 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:44:23.180 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:44:23.182 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:44:23.184 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:44:23.185 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:44:23.186 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:44:23.187 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:44:23.188 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:44:23.189 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:44:23.190 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:44:23.191 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:44:23.192 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:44:23.194 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:23.195 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:23.197 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:44:23.198 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:44:23.200 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:44:23.202 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:44:23.202 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:44:23.203 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.204 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.205 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:44:23.205 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:44:23.206 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:44:23.207 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:44:23.209 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:44:23.211 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.213 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:44:23.214 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.216 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:44:23.220 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.222 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.223 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:44:23.225 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:44:23.226 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:44:23.227 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:44:23.232 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:44:23.238 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:23.239 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:23.240 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:23.241 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:23.243 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:23.244 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:23.246 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:44:23.248 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.249 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 11ms reading results.
2025-04-29 17:44:23.251 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.252 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:44:23.253 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:44:23.255 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:44:23.256 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:44:23.256 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:44:23.257 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:44:23.258 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:44:23.259 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 97.4026ms
2025-04-29 17:44:23.261 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:44:23.262 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 140.1110 ms
2025-04-29 17:44:23.264 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:44:23.265 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:44:23.266 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:44:23.268 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 17:44:23.270 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=will%20be - 200 null application/json; charset=utf-8 157.1895ms
2025-04-29 17:45:18.597 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=11111111 - null null
2025-04-29 17:45:18.601 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:45:18.604 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:45:18.607 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:45:18.610 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:18.611 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:45:18.612 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:18.614 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:45:18.616 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:45:18.618 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:45:18.621 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:45:18.624 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:45:18.626 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:45:18.627 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:45:18.628 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:45:18.629 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:45:18.630 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:45:18.631 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:45:18.632 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:45:18.634 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:45:18.635 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:45:18.636 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:45:18.637 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:45:18.641 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:45:18.642 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:45:18.643 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:45:18.645 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:45:18.646 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:45:18.647 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:45:18.648 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:45:18.649 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:45:18.650 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:45:18.651 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:45:18.653 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:45:18.654 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:45:18.657 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:45:18.659 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:45:18.660 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:18.661 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:18.662 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:45:18.663 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:18.664 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:45:18.666 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:45:18.666 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:45:18.667 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.668 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.669 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:45:18.669 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:45:18.671 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:45:18.672 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:45:18.681 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:45:18.683 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.684 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:45:18.685 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.686 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:45:18.689 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.690 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.691 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:45:18.692 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:45:18.693 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:45:18.695 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:45:18.704 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:45:18.709 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.710 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:45:18.713 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.714 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:45:18.715 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:45:18.717 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:45:18.717 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:45:18.718 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:45:18.719 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:45:18.720 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:45:18.721 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 94.3633ms
2025-04-29 17:45:18.724 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:18.725 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 114.1839 ms
2025-04-29 17:45:18.726 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:45:18.727 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:45:18.728 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:18.729 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:45:18.730 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=11111111 - 200 null application/json; charset=utf-8 132.378ms
2025-04-29 17:45:46.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=111111111 - null null
2025-04-29 17:45:46.909 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:45:46.910 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:45:46.917 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:45:46.923 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:46.925 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:45:46.927 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:46.930 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:45:46.931 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:45:46.933 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:45:46.936 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:45:46.939 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:45:46.940 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:45:46.941 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:45:46.942 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:45:46.943 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:45:46.944 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:45:46.945 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:45:46.946 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:45:46.948 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:45:46.949 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:45:46.953 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:45:46.955 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:45:46.957 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:45:46.958 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:45:46.959 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:45:46.960 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:45:46.961 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:45:46.963 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:45:46.964 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:45:46.965 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:45:46.966 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:45:46.970 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:45:46.972 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:45:46.973 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:45:46.974 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:45:46.975 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:45:46.976 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:46.977 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:46.978 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:45:46.979 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:46.980 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:45:46.982 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:45:46.984 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:45:46.986 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:46.987 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:46.988 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:45:46.989 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:45:46.990 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:45:46.991 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:45:46.997 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:45:46.999 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:47.001 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:45:47.003 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:47.004 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:45:47.006 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:47.007 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:47.008 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:45:47.008 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:45:47.009 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:45:47.010 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:45:47.021 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:45:47.024 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:47.025 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:45:47.026 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:47.027 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:45:47.028 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:45:47.030 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:45:47.030 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:45:47.031 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:45:47.032 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:45:47.032 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:45:47.035 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 94.2944ms
2025-04-29 17:45:47.038 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:47.039 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 113.3363 ms
2025-04-29 17:45:47.040 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:45:47.041 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:45:47.042 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:47.043 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:45:47.044 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=111111111 - 200 null application/json; charset=utf-8 139.3744ms
2025-04-29 17:45:56.940 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=1111 - null null
2025-04-29 17:45:56.946 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:45:56.948 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:45:56.950 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:45:56.952 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:56.954 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:45:56.955 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:56.956 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:45:56.958 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:45:56.959 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:45:56.960 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:45:56.961 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:45:56.963 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:45:56.964 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:45:56.965 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:45:56.966 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:45:56.968 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:45:56.969 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:45:56.970 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:45:56.972 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:45:56.974 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:45:56.976 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:45:56.977 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:45:56.978 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:45:56.979 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:45:56.980 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:45:56.982 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:45:56.984 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:45:56.986 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:45:56.988 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:45:56.989 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:45:56.990 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:45:56.991 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:45:56.993 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:45:56.994 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:45:56.995 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:45:56.996 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:45:56.997 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:56.998 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:56.999 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:45:57.001 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:45:57.003 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:45:57.005 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:45:57.006 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:45:57.006 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.007 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.008 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:45:57.009 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:45:57.010 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:45:57.010 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:45:57.017 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:45:57.020 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.021 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:45:57.022 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.024 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:45:57.026 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.027 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.028 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:45:57.029 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:45:57.030 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:45:57.030 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:45:57.041 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:45:57.045 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:45:57.046 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:45:57.047 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:45:57.049 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:45:57.050 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:45:57.052 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:45:57.053 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:45:57.054 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.055 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-04-29 17:45:57.056 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.057 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:45:57.058 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:45:57.060 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:45:57.060 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:45:57.061 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:45:57.061 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:45:57.062 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:45:57.063 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 99.7392ms
2025-04-29 17:45:57.064 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:45:57.065 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 111.3613 ms
2025-04-29 17:45:57.067 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:45:57.068 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:45:57.069 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:45:57.071 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:45:57.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=1111 - 200 null application/json; charset=utf-8 132.8623ms
2025-04-29 17:46:22.526 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=1111111 - null null
2025-04-29 17:46:22.530 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:46:22.533 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:46:22.537 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:46:22.539 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:46:22.539 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:46:22.540 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:46:22.541 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:46:22.542 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:46:22.543 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:46:22.544 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:46:22.546 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:46:22.548 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:46:22.551 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:46:22.552 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:46:22.553 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:46:22.554 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:46:22.555 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:46:22.556 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:46:22.557 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:46:22.558 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:46:22.560 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:46:22.561 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:46:22.562 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:46:22.565 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:46:22.566 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:46:22.567 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:46:22.569 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:46:22.570 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:46:22.571 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:46:22.572 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:46:22.573 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:46:22.574 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:46:22.576 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:46:22.577 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:46:22.578 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:46:22.581 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:46:22.582 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:46:22.584 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:46:22.586 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:46:22.588 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:46:22.589 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:46:22.591 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:46:22.592 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:46:22.592 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.593 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.594 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:46:22.595 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:46:22.597 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:46:22.599 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:46:22.602 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:46:22.603 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.604 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:46:22.605 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.606 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:46:22.608 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.608 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.609 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:46:22.610 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:46:22.611 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:46:22.613 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:46:22.617 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:46:22.620 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:22.621 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:22.622 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:22.623 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:22.624 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:22.625 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:22.626 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:22.627 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.628 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 7ms reading results.
2025-04-29 17:46:22.630 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.632 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:46:22.634 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:46:22.635 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:46:22.636 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:46:22.637 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:46:22.637 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:46:22.638 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:46:22.639 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 88.608ms
2025-04-29 17:46:22.640 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:46:22.641 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 101.8466 ms
2025-04-29 17:46:22.642 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:46:22.643 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:46:22.644 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:22.645 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:46:22.647 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=1111111 - 200 null application/json; charset=utf-8 120.2079ms
2025-04-29 17:46:53.931 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=12345678 - null null
2025-04-29 17:46:53.935 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:46:53.937 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:46:53.940 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:46:53.962 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:46:53.966 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:46:53.967 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:46:53.969 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:46:53.971 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:46:53.973 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:46:53.975 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:46:53.978 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:46:53.980 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:46:53.982 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:46:53.983 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:46:53.984 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:46:53.986 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:46:53.987 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:46:53.989 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:46:53.992 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:46:53.994 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:46:53.997 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:46:54.088 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:46:54.090 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:46:54.092 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:46:54.094 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:46:54.096 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:46:54.097 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:46:54.098 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:46:54.100 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:46:54.101 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:46:54.102 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:46:54.103 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:46:54.105 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:46:54.106 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:46:54.107 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:46:54.109 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:46:54.110 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:46:54.111 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:46:54.112 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:46:54.113 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:46:54.115 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:46:54.118 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:46:54.120 +07:00 [DBG] Created DbConnection. (2ms).
2025-04-29 17:46:54.121 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.134 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.135 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:46:54.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:46:54.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:46:54.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:46:54.150 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:46:54.152 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.153 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:46:54.154 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.155 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:46:54.157 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.159 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.161 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:46:54.162 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:46:54.163 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:46:54.164 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:46:54.173 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:46:54.179 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:54.180 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:54.181 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:54.182 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:54.183 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:54.185 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:54.186 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:46:54.187 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.188 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-04-29 17:46:54.189 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.190 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:46:54.191 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:46:54.195 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:46:54.195 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:46:54.196 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:46:54.197 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:46:54.198 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:46:54.199 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 217.5901ms
2025-04-29 17:46:54.200 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:46:54.201 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 235.4700 ms
2025-04-29 17:46:54.202 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:46:54.203 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:46:54.204 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:46:54.205 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:46:54.206 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=12345678 - 200 null application/json; charset=utf-8 275.1616ms
2025-04-29 17:48:23.174 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=12345678&SortBy=DocumentId&SortOrder=asc - null null
2025-04-29 17:48:23.178 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:48:23.179 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:48:23.185 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:48:23.204 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:23.208 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:48:23.211 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:23.217 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:48:23.223 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:48:23.224 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:48:23.225 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:48:23.227 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:48:23.228 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:48:23.229 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:48:23.233 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:48:23.235 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:48:23.236 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:48:23.238 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:48:23.239 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:48:23.240 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:48:23.241 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:48:23.243 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:48:23.244 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:48:23.245 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:48:23.247 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:48:23.250 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:48:23.252 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:48:23.253 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:48:23.254 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:48:23.255 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:48:23.257 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:48:23.258 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:48:23.259 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:48:23.260 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:48:23.261 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:48:23.262 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:23.263 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:23.264 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:48:23.266 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:23.268 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:48:23.270 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:48:23.270 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:48:23.271 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.272 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.273 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:48:23.273 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:48:23.274 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:48:23.275 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:48:23.285 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
2025-04-29 17:48:23.287 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.288 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:48:23.289 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.290 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:48:23.291 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.292 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.293 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:48:23.294 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:48:23.295 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:48:23.295 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:48:23.308 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__searchTerm_1_contains='?' (Size = 255), @__searchTerm_1_contains_1='?' (Size = 20), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed') AND (LOWER([d].[title]) LIKE @__searchTerm_1_contains ESCAPE N'\' OR ([d].[author] IS NOT NULL AND LOWER([d].[author]) LIKE @__searchTerm_1_contains ESCAPE N'\') OR ([d].[ISBN] IS NOT NULL AND LOWER([d].[ISBN]) LIKE @__searchTerm_1_contains_1 ESCAPE N'\'))
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:48:23.311 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:23.312 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:23.314 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:23.318 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:23.318 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:23.319 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:23.320 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:23.321 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.322 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 11ms reading results.
2025-04-29 17:48:23.323 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.324 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:48:23.325 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:48:23.327 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:48:23.327 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:48:23.328 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:48:23.328 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:48:23.329 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:48:23.332 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 102.773ms
2025-04-29 17:48:23.334 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:23.335 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 126.6346 ms
2025-04-29 17:48:23.336 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:48:23.337 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:48:23.338 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:23.339 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:48:23.340 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Search=12345678&SortBy=DocumentId&SortOrder=asc - 200 null application/json; charset=utf-8 165.4298ms
2025-04-29 17:48:35.020 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=asc - null null
2025-04-29 17:48:35.024 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:48:35.026 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:48:35.029 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:48:35.030 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:35.034 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:48:35.035 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:35.037 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:48:35.041 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:48:35.043 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:48:35.046 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:48:35.050 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:48:35.052 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:48:35.055 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:48:35.056 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:48:35.058 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:48:35.060 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:48:35.062 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:48:35.065 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:48:35.067 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:48:35.068 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:48:35.070 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:48:35.072 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:48:35.073 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:48:35.076 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:48:35.078 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:48:35.080 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:48:35.084 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:48:35.086 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:48:35.088 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:48:35.090 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:48:35.092 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:48:35.093 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:48:35.095 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:48:35.098 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:48:35.100 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:48:35.102 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:35.103 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:35.105 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:48:35.106 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:35.108 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:48:35.112 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Count()'
2025-04-29 17:48:35.117 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 17:48:35.123 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:48:35.124 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:48:35.126 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.127 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.129 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:48:35.130 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:48:35.132 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 17:48:35.134 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:48:35.139 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:48:35.142 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.144 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:48:35.146 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.148 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:48:35.150 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_1)
    .Take(__p_2)'
2025-04-29 17:48:35.153 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 17:48:35.155 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 17:48:35.156 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 17:48:35.165 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 17:48:35.207 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.209 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.210 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:48:35.212 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:48:35.214 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 17:48:35.215 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:48:35.224 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:48:35.229 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.231 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.233 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.235 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.236 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.238 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.240 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.242 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.243 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.246 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.248 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:35.250 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.251 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 22ms reading results.
2025-04-29 17:48:35.253 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.255 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:48:35.257 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:48:35.260 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:48:35.262 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:48:35.262 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:48:35.264 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:48:35.266 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:48:35.268 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 213.8129ms
2025-04-29 17:48:35.271 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:35.272 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 238.7325 ms
2025-04-29 17:48:35.274 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:48:35.275 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:48:35.276 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:35.277 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:48:35.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=asc - 200 null application/json; charset=utf-8 259.6018ms
2025-04-29 17:48:47.412 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=asc - null null
2025-04-29 17:48:47.415 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:48:47.418 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:48:47.439 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:48:47.445 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:47.448 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:48:47.451 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:47.452 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:48:47.454 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:48:47.455 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:48:47.456 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:48:47.457 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:48:47.458 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:48:47.460 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:48:47.462 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:48:47.464 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:48:47.465 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:48:47.466 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:48:47.468 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:48:47.469 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:48:47.470 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:48:47.471 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:48:47.472 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:48:47.473 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:48:47.474 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:48:47.476 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:48:47.478 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:48:47.481 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:48:47.483 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:48:47.485 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:48:47.486 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:48:47.488 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:48:47.490 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:48:47.491 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:48:47.494 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:48:47.498 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:48:47.500 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:47.501 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:47.502 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:48:47.503 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:48:47.505 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:48:47.507 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:48:47.508 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:48:47.509 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.510 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.512 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:48:47.513 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:48:47.514 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:48:47.516 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:48:47.518 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:48:47.520 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.521 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:48:47.522 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.523 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:48:47.524 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.525 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.527 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:48:47.528 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:48:47.531 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 17:48:47.532 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:48:47.536 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:48:47.538 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.539 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.540 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.541 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.543 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.544 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.546 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.548 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.549 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.551 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.552 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:48:47.553 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.554 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-04-29 17:48:47.555 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.556 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:48:47.557 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:48:47.558 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:48:47.559 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:48:47.560 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:48:47.561 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:48:47.563 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:48:47.564 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 104.3814ms
2025-04-29 17:48:47.565 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:48:47.566 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 118.6744 ms
2025-04-29 17:48:47.567 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:48:47.568 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:48:47.569 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:48:47.570 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:48:47.571 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=asc - 200 null application/json; charset=utf-8 158.5115ms
2025-04-29 17:49:25.933 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=asc - null null
2025-04-29 17:49:25.937 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:49:25.940 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:25.942 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:25.946 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:25.948 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:49:25.949 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:25.950 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:49:25.951 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:49:25.952 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:49:25.953 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:49:25.955 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:49:25.956 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:49:25.958 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:25.960 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:25.961 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:25.962 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:49:25.963 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:49:25.964 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:25.966 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:25.967 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:49:25.968 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:25.969 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:25.970 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:49:25.971 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:25.973 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:25.975 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:49:25.976 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:49:25.978 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:49:25.979 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:49:25.980 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:49:25.981 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:49:25.982 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:49:25.983 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:49:25.985 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:49:25.986 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:49:25.987 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:25.987 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:25.989 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:25.991 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:25.993 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:49:25.995 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:49:25.995 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:49:25.996 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:25.997 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:25.998 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:25.998 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:49:25.999 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:26.000 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:26.005 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:26.008 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:26.009 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:49:26.010 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:26.011 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:49:26.013 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:26.014 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:26.014 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:26.015 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:49:26.016 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:26.017 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:26.025 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:26.028 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.031 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.032 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.033 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.033 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.034 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.035 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.036 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.037 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.038 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.040 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:26.041 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:26.042 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 14ms reading results.
2025-04-29 17:49:26.044 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:26.045 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:49:26.046 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:49:26.048 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:49:26.048 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:49:26.049 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:49:26.049 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:49:26.050 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:49:26.051 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 93.9745ms
2025-04-29 17:49:26.053 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:26.053 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 105.4849 ms
2025-04-29 17:49:26.054 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:49:26.056 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:49:26.057 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:26.058 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:49:26.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=asc - 200 null application/json; charset=utf-8 126.7327ms
2025-04-29 17:49:35.760 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=desc - null null
2025-04-29 17:49:35.763 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:49:35.765 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:35.767 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:35.769 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:35.772 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:49:35.773 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:35.775 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:49:35.777 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:49:35.779 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:49:35.781 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:49:35.782 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:49:35.783 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:49:35.784 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:35.786 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:35.787 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:35.789 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:49:35.791 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:49:35.793 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:35.795 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:35.796 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:49:35.798 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:35.799 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:35.800 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:49:35.802 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:35.804 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:35.806 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:49:35.809 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:49:35.810 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:49:35.811 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:49:35.813 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:49:35.814 +07:00 [DBG] Could not find a value in the request with name 'Page' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:49:35.815 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:49:35.816 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:49:35.817 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:49:35.818 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:49:35.820 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:35.821 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:35.823 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:35.825 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:35.826 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:49:35.828 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:49:35.829 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 17:49:35.830 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.831 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.832 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:35.833 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:49:35.833 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:35.834 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:35.837 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:35.840 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.842 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-29 17:49:35.844 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.844 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 17:49:35.846 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.847 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.848 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:35.849 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:49:35.850 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:35.851 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:35.855 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:35.859 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.860 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.861 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.862 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.863 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.865 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.866 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.867 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.868 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.869 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.871 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:35.873 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.874 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-04-29 17:49:35.876 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.877 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:49:35.878 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:49:35.880 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:49:35.881 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:49:35.882 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:49:35.883 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:49:35.884 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:49:35.885 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 100.6465ms
2025-04-29 17:49:35.886 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:35.887 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 115.5825 ms
2025-04-29 17:49:35.890 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:49:35.891 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:49:35.891 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:35.892 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 17:49:35.893 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=desc - 200 null application/json; charset=utf-8 133.0225ms
2025-04-29 17:49:43.704 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=desc&Page=2 - null null
2025-04-29 17:49:43.707 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:49:43.710 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:43.711 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:43.713 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:43.715 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:49:43.716 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:43.718 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:49:43.722 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:49:43.724 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:49:43.726 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:49:43.727 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:49:43.729 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:49:43.730 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:43.731 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:43.733 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:43.736 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:49:43.738 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:49:43.741 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:43.744 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:43.747 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:49:43.749 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:43.751 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:43.753 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:49:43.757 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:43.759 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:43.761 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:49:43.762 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:49:43.764 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:49:43.765 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:49:43.767 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:49:43.768 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:49:43.770 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:49:43.773 +07:00 [DBG] Could not find a value in the request with name 'PageSize' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:49:43.776 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:49:43.778 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:43.779 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:43.780 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:43.781 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:43.783 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:49:43.785 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:49:43.786 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:49:43.787 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.789 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.790 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:43.791 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:49:43.792 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:43.793 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:43.796 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:43.798 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.799 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:49:43.800 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.801 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:49:43.803 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted))
    .Where(d => d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_1)
    .Take(__p_1)'
2025-04-29 17:49:43.807 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 17:49:43.808 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 17:49:43.809 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 17:49:43.816 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE (Not(d.IsDeleted) && ((d.userId == @__userId_0) && Not(d.IsDeleted))) && d0.statusCode IN (N'InStock', N'Listed')
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 17:49:43.858 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.859 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.860 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:43.861 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:49:43.862 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:43.863 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:43.870 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:43.874 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.875 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 17:49:43.876 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.877 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:49:43.878 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:49:43.880 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:49:43.881 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:49:43.882 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:49:43.882 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:49:43.883 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:49:43.885 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 154.596ms
2025-04-29 17:49:43.886 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:43.888 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 172.8064 ms
2025-04-29 17:49:43.890 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:49:43.891 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:49:43.892 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:43.893 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:49:43.894 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?SortBy=DocumentId&SortOrder=desc&Page=2 - 200 null application/json; charset=utf-8 190.5976ms
2025-04-29 17:49:54.193 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=1 - null null
2025-04-29 17:49:54.196 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:49:54.197 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:54.199 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:49:54.203 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:54.206 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:49:54.207 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:54.208 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:49:54.210 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:49:54.211 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:49:54.213 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:49:54.215 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:49:54.216 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:49:54.219 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:54.221 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:49:54.225 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:54.227 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:49:54.229 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:49:54.231 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:54.233 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:49:54.235 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:49:54.238 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:54.241 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:49:54.243 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:49:54.245 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:54.247 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:49:54.249 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:49:54.251 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:49:54.254 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:49:54.257 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:49:54.259 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:49:54.261 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:49:54.263 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:49:54.264 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:49:54.266 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:49:54.268 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:49:54.270 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:54.272 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:54.273 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:49:54.275 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:49:54.277 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:49:54.279 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:49:54.280 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:49:54.281 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.282 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.283 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:54.284 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:54.286 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:49:54.288 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:54.291 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:49:54.294 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.295 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:49:54.296 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.297 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:49:54.299 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.300 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.301 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:49:54.302 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:49:54.304 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 17:49:54.305 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:54.309 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:49:54.312 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:54.313 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:54.314 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:54.315 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:54.317 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:54.319 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:54.321 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:49:54.322 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.325 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-29 17:49:54.327 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.328 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:49:54.330 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:49:54.332 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:49:54.332 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:49:54.333 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:49:54.334 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:49:54.336 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:49:54.338 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 119.564ms
2025-04-29 17:49:54.341 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:49:54.342 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 136.3688 ms
2025-04-29 17:49:54.343 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:49:54.345 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:49:54.346 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:49:54.347 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:49:54.348 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=1 - 200 null application/json; charset=utf-8 154.9899ms
2025-04-29 17:50:14.410 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=2&PageSize=1 - null null
2025-04-29 17:50:14.412 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 17:50:14.413 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 17:50:14.416 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 17:50:14.418 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:50:14.420 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 17:50:14.422 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:50:14.424 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 17:50:14.428 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 17:50:14.429 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 17:50:14.430 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 17:50:14.433 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 17:50:14.436 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 17:50:14.439 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:50:14.440 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 17:50:14.441 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:50:14.443 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 17:50:14.444 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String' using the name 'Status' in request data ...
2025-04-29 17:50:14.447 +07:00 [DBG] Could not find a value in the request with name 'Status' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:50:14.448 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Status' of type 'System.String'.
2025-04-29 17:50:14.451 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String' using the name 'Search' in request data ...
2025-04-29 17:50:14.454 +07:00 [DBG] Could not find a value in the request with name 'Search' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:50:14.456 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Search' of type 'System.String'.
2025-04-29 17:50:14.457 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]' using the name 'CategoryId' in request data ...
2025-04-29 17:50:14.458 +07:00 [DBG] Could not find a value in the request with name 'CategoryId' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:50:14.460 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.CategoryId' of type 'System.Nullable`1[System.Int32]'.
2025-04-29 17:50:14.461 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String' using the name 'SortBy' in request data ...
2025-04-29 17:50:14.462 +07:00 [DBG] Could not find a value in the request with name 'SortBy' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:50:14.464 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortBy' of type 'System.String'.
2025-04-29 17:50:14.465 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String' using the name 'SortOrder' in request data ...
2025-04-29 17:50:14.468 +07:00 [DBG] Could not find a value in the request with name 'SortOrder' for binding property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:50:14.470 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.SortOrder' of type 'System.String'.
2025-04-29 17:50:14.472 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 17:50:14.473 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 17:50:14.474 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 17:50:14.476 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 17:50:14.477 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:50:14.478 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:50:14.479 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 17:50:14.480 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 17:50:14.482 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 17:50:14.485 +07:00 [DBG] Creating DbConnection.
2025-04-29 17:50:14.486 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 17:50:14.487 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.488 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.489 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:50:14.490 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:50:14.491 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:50:14.491 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:50:14.496 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 17:50:14.498 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.500 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 17:50:14.502 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.503 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:50:14.505 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.506 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.507 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 17:50:14.508 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 17:50:14.509 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 17:50:14.510 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:50:14.519 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 17:50:14.523 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:50:14.524 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:50:14.525 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:50:14.527 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:50:14.528 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:50:14.529 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:50:14.530 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 17:50:14.531 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.533 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-04-29 17:50:14.535 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.537 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 17:50:14.538 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 17:50:14.540 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-29 17:50:14.540 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 17:50:14.541 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 17:50:14.542 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 17:50:14.543 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 17:50:14.544 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 105.2903ms
2025-04-29 17:50:14.545 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 17:50:14.546 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 125.7852 ms
2025-04-29 17:50:14.547 +07:00 [DBG] Connection id "0HNC7185K10C6" completed keep alive response.
2025-04-29 17:50:14.548 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 17:50:14.549 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 17:50:14.551 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 17:50:14.552 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=2&PageSize=1 - 200 null application/json; charset=utf-8 142.7614ms
2025-04-29 17:52:26.175 +07:00 [DBG] Connection id "0HNC7185K10C6" disconnecting.
2025-04-29 17:52:26.177 +07:00 [DBG] Connection id "0HNC7185K10C6" stopped.
2025-04-29 17:52:26.179 +07:00 [DBG] Connection id "0HNC7185K10C6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:57:10.902 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 20:57:11.205 +07:00 [DBG] Hosting starting
2025-04-29 20:57:11.273 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 20:57:11.277 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 20:57:11.279 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 20:57:11.280 +07:00 [INF] Hosting environment: Development
2025-04-29 20:57:11.281 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 20:57:11.282 +07:00 [DBG] Hosting started
2025-04-29 20:57:21.283 +07:00 [DBG] Connection id "0HNC74N1H5US4" accepted.
2025-04-29 20:57:21.287 +07:00 [DBG] Connection id "0HNC74N1H5US4" started.
2025-04-29 20:57:21.288 +07:00 [DBG] Connection id "0HNC74N1H5US5" accepted.
2025-04-29 20:57:21.290 +07:00 [DBG] Connection id "0HNC74N1H5US5" started.
2025-04-29 20:57:21.334 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 20:57:21.341 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 20:57:21.357 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 20:57:21.360 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:57:21.446 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 77.8665 ms
2025-04-29 20:57:21.453 +07:00 [DBG] Connection id "0HNC74N1H5US4" completed keep alive response.
2025-04-29 20:57:21.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 123.941ms
2025-04-29 20:57:22.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 20:57:22.313 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 20:57:22.315 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:57:22.422 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 105.3111 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-29 20:57:22.467 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-29 20:57:22.479 +07:00 [DBG] Connection id "0HNC74N1H5US4" completed keep alive response.
2025-04-29 20:57:22.481 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 174.0232ms
2025-04-29 20:59:10.547 +07:00 [INF] Application is shutting down...
2025-04-29 20:59:10.549 +07:00 [DBG] Hosting stopping
2025-04-29 20:59:10.557 +07:00 [DBG] Connection id "0HNC74N1H5US4" disconnecting.
2025-04-29 20:59:10.557 +07:00 [DBG] Connection id "0HNC74N1H5US5" disconnecting.
2025-04-29 20:59:10.560 +07:00 [DBG] Connection id "0HNC74N1H5US4" stopped.
2025-04-29 20:59:10.560 +07:00 [DBG] Connection id "0HNC74N1H5US5" stopped.
2025-04-29 20:59:10.565 +07:00 [DBG] Connection id "0HNC74N1H5US4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:59:10.565 +07:00 [DBG] Connection id "0HNC74N1H5US5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:59:10.569 +07:00 [DBG] Hosting stopped
2025-04-29 20:59:15.043 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 20:59:15.133 +07:00 [DBG] Hosting starting
2025-04-29 20:59:15.176 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 20:59:15.179 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 20:59:15.182 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 20:59:15.185 +07:00 [INF] Hosting environment: Development
2025-04-29 20:59:15.186 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 20:59:15.187 +07:00 [DBG] Hosting started
2025-04-29 20:59:18.696 +07:00 [DBG] Connection id "0HNC74O4GTSEB" accepted.
2025-04-29 20:59:18.701 +07:00 [DBG] Connection id "0HNC74O4GTSEB" started.
2025-04-29 20:59:18.702 +07:00 [DBG] Connection id "0HNC74O4GTSEC" accepted.
2025-04-29 20:59:18.708 +07:00 [DBG] Connection id "0HNC74O4GTSEC" started.
2025-04-29 20:59:18.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 20:59:18.740 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 20:59:18.757 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 20:59:18.761 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:18.837 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 69.3803 ms
2025-04-29 20:59:18.842 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:18.846 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 113.7487ms
2025-04-29 20:59:19.112 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 20:59:19.116 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 20:59:19.119 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:19.254 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 133.6911 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-29 20:59:19.272 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-29 20:59:19.287 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:19.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 177.0284ms
2025-04-29 20:59:24.068 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 20:59:24.072 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 20:59:24.073 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:24.075 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.6205 ms
2025-04-29 20:59:24.077 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:24.078 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 10.236ms
2025-04-29 20:59:24.230 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 20:59:24.233 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 20:59:24.235 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:24.242 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 4.7722 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-29 20:59:24.248 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-29 20:59:24.256 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:24.257 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 27.5238ms
2025-04-29 20:59:24.587 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 20:59:24.590 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 20:59:24.591 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:24.592 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.4253 ms
2025-04-29 20:59:24.594 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:24.595 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 8.3915ms
2025-04-29 20:59:24.746 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 20:59:24.750 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 20:59:24.752 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:24.754 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 2.0063 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-29 20:59:24.761 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-29 20:59:24.769 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:24.771 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 24.5216ms
2025-04-29 20:59:24.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 20:59:24.786 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 20:59:24.787 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:24.788 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.2736 ms
2025-04-29 20:59:24.789 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:24.790 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 8.7545ms
2025-04-29 20:59:24.938 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 20:59:24.942 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 20:59:24.944 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:24.948 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 2.8770 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-29 20:59:24.954 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-29 20:59:24.959 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:24.962 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 24.2211ms
2025-04-29 20:59:25.163 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 20:59:25.165 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 20:59:25.165 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:25.166 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.2784 ms
2025-04-29 20:59:25.168 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:25.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 5.721ms
2025-04-29 20:59:25.288 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 20:59:25.291 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 20:59:25.292 +07:00 [DBG] Request did not match any endpoints
2025-04-29 20:59:25.297 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 3.4474 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-29 20:59:25.301 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-29 20:59:25.305 +07:00 [DBG] Connection id "0HNC74O4GTSEB" completed keep alive response.
2025-04-29 20:59:25.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 18.8285ms
2025-04-29 21:00:13.179 +07:00 [INF] Application is shutting down...
2025-04-29 21:00:13.180 +07:00 [DBG] Hosting stopping
2025-04-29 21:00:13.187 +07:00 [DBG] Connection id "0HNC74O4GTSEB" disconnecting.
2025-04-29 21:00:13.187 +07:00 [DBG] Connection id "0HNC74O4GTSEC" disconnecting.
2025-04-29 21:00:13.189 +07:00 [DBG] Connection id "0HNC74O4GTSEB" stopped.
2025-04-29 21:00:13.189 +07:00 [DBG] Connection id "0HNC74O4GTSEC" stopped.
2025-04-29 21:00:13.193 +07:00 [DBG] Connection id "0HNC74O4GTSEB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:00:13.193 +07:00 [DBG] Connection id "0HNC74O4GTSEC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:00:13.198 +07:00 [DBG] Hosting stopped
2025-04-29 21:00:18.953 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 21:00:19.042 +07:00 [DBG] Hosting starting
2025-04-29 21:00:19.095 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 21:00:19.096 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 21:00:19.097 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 21:00:19.098 +07:00 [INF] Hosting environment: Development
2025-04-29 21:00:19.099 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 21:00:19.100 +07:00 [DBG] Hosting started
2025-04-29 21:00:21.044 +07:00 [DBG] Connection id "0HNC74ON3H2HU" accepted.
2025-04-29 21:00:21.048 +07:00 [DBG] Connection id "0HNC74ON3H2HU" started.
2025-04-29 21:00:21.048 +07:00 [DBG] Connection id "0HNC74ON3H2HV" accepted.
2025-04-29 21:00:21.050 +07:00 [DBG] Connection id "0HNC74ON3H2HV" started.
2025-04-29 21:00:21.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 21:00:21.083 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 21:00:21.100 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 21:00:21.104 +07:00 [DBG] Request did not match any endpoints
2025-04-29 21:00:21.186 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 73.7518 ms
2025-04-29 21:00:21.191 +07:00 [DBG] Connection id "0HNC74ON3H2HU" completed keep alive response.
2025-04-29 21:00:21.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 118.2588ms
2025-04-29 21:00:21.404 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 21:00:21.409 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 21:00:21.412 +07:00 [DBG] Request did not match any endpoints
2025-04-29 21:00:21.587 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 173.3910 ms
2025-04-29 21:00:21.589 +07:00 [DBG] Connection id "0HNC74ON3H2HU" completed keep alive response.
2025-04-29 21:00:21.590 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.0136ms
2025-04-29 21:00:32.196 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=2 - null null
2025-04-29 21:00:32.204 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 21:00:32.210 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 21:00:32.213 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 21:00:32.216 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:00:32.227 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 21:00:32.228 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 21:00:32.231 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:00:32.274 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto]]] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 21:00:32.279 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 21:00:32.281 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 21:00:32.283 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 21:00:32.286 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 21:00:32.288 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 21:00:32.292 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:00:32.407 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 21:00:32.425 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:00:32.432 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:00:32.435 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 21:00:32.443 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 21:00:32.446 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 21:00:32.448 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 21:00:32.451 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 21:00:32.454 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:00:32.456 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:00:32.458 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:00:32.462 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:00:32.820 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 21:00:32.822 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 21:00:32.928 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 21:00:33.139 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted) && d.DocumentStatus.Name == "InStock" || d.DocumentStatus.Name == "Listed")
    .Count()'
2025-04-29 21:00:33.358 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusName IN (N'InStock', N'Listed'))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusName IN (N'InStock', N'Listed')), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 21:00:33.400 +07:00 [DBG] Creating DbConnection.
2025-04-29 21:00:33.420 +07:00 [DBG] Created DbConnection. (19ms).
2025-04-29 21:00:33.423 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.627 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.631 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:00:33.637 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-29 21:00:33.644 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-04-29 21:00:33.651 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusName] IN (N'InStock', N'Listed')
2025-04-29 21:00:33.706 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusName] IN (N'InStock', N'Listed')
2025-04-29 21:00:33.723 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.729 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 16ms reading results.
2025-04-29 21:00:33.732 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.739 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-04-29 21:00:33.746 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted) && d.DocumentStatus.Name == "InStock" || d.DocumentStatus.Name == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_1)
    .Take(__p_2)'
2025-04-29 21:00:33.754 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 21:00:33.759 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 21:00:33.760 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 21:00:33.811 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusName IN (N'InStock', N'Listed'))
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusName IN (N'InStock', N'Listed'))
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 21:00:33.850 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.852 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.853 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:00:33.854 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 21:00:33.856 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 21:00:33.858 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusName] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:00:33.873 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusName] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:00:33.893 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:00:33.941 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:00:33.945 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:00:33.955 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:00:33.960 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:00:33.971 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:00:33.973 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:00:33.979 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.980 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 104ms reading results.
2025-04-29 21:00:33.981 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:33.983 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 21:00:33.990 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 21:00:33.995 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 21:00:33.997 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 21:00:33.999 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 21:00:34.000 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 21:00:34.002 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 21:00:34.005 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 21:00:34.044 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 1752.149ms
2025-04-29 21:00:34.046 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:00:34.048 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 1824.3898 ms
2025-04-29 21:00:34.049 +07:00 [DBG] Connection id "0HNC74ON3H2HU" completed keep alive response.
2025-04-29 21:00:34.052 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 21:00:34.058 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:00:34.060 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 21:00:34.063 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=2 - 200 null application/json; charset=utf-8 1867.2678ms
2025-04-29 21:02:32.142 +07:00 [DBG] Connection id "0HNC74ON3H2HV" disconnecting.
2025-04-29 21:02:32.146 +07:00 [DBG] Connection id "0HNC74ON3H2HV" stopped.
2025-04-29 21:02:32.148 +07:00 [DBG] Connection id "0HNC74ON3H2HV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:02:44.270 +07:00 [DBG] Connection id "0HNC74ON3H2HU" disconnecting.
2025-04-29 21:02:44.273 +07:00 [DBG] Connection id "0HNC74ON3H2HU" stopped.
2025-04-29 21:02:44.274 +07:00 [DBG] Connection id "0HNC74ON3H2HU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:10:02.120 +07:00 [INF] Application is shutting down...
2025-04-29 21:10:02.121 +07:00 [DBG] Hosting stopping
2025-04-29 21:10:02.127 +07:00 [DBG] Hosting stopped
2025-04-29 21:12:55.830 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 21:12:55.913 +07:00 [DBG] Hosting starting
2025-04-29 21:12:55.971 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-29 21:12:55.974 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-29 21:12:55.977 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 21:12:55.979 +07:00 [INF] Hosting environment: Development
2025-04-29 21:12:55.980 +07:00 [INF] Content root path: D:\My_PBL3\Backup(Chỉ còn 2 API cuối của module Quản lý sách_tài liệu)\ExchangeDocument\ExchangeDocument
2025-04-29 21:12:55.981 +07:00 [DBG] Hosting started
2025-04-29 21:13:12.210 +07:00 [DBG] Connection id "0HNC74VSTU0M6" accepted.
2025-04-29 21:13:12.214 +07:00 [DBG] Connection id "0HNC74VSTU0M6" started.
2025-04-29 21:13:12.215 +07:00 [DBG] Connection id "0HNC74VSTU0M7" accepted.
2025-04-29 21:13:12.217 +07:00 [DBG] Connection id "0HNC74VSTU0M7" started.
2025-04-29 21:13:12.246 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 21:13:12.251 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 21:13:12.265 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 21:13:12.267 +07:00 [DBG] Request did not match any endpoints
2025-04-29 21:13:12.345 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 71.5703 ms
2025-04-29 21:13:12.351 +07:00 [DBG] Connection id "0HNC74VSTU0M6" completed keep alive response.
2025-04-29 21:13:12.354 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 110.4898ms
2025-04-29 21:13:12.828 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 21:13:12.831 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 21:13:12.833 +07:00 [DBG] Request did not match any endpoints
2025-04-29 21:13:13.003 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 168.4056 ms
2025-04-29 21:13:13.006 +07:00 [DBG] Connection id "0HNC74VSTU0M6" completed keep alive response.
2025-04-29 21:13:13.009 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 180.7739ms
2025-04-29 21:13:22.959 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=1 - null null
2025-04-29 21:13:22.971 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 21:13:22.977 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 21:13:22.979 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 21:13:22.983 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:13:22.989 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 21:13:22.991 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-29 21:13:22.993 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:13:23.017 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto]]] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 21:13:23.024 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 21:13:23.025 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 21:13:23.027 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 21:13:23.029 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 21:13:23.030 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 21:13:23.033 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:13:23.106 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 21:13:23.121 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:13:23.126 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:13:23.129 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 21:13:23.134 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 21:13:23.137 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 21:13:23.142 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 21:13:23.144 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 21:13:23.145 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:13:23.146 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:13:23.148 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:13:23.153 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:13:23.491 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 21:13:23.494 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-04-29 21:13:23.595 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 21:13:23.647 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted) && d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .Count()'
2025-04-29 21:13:23.861 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusCode IN (N'InStock', N'Listed'))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusCode IN (N'InStock', N'Listed')), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 21:13:23.924 +07:00 [DBG] Creating DbConnection.
2025-04-29 21:13:23.947 +07:00 [DBG] Created DbConnection. (22ms).
2025-04-29 21:13:23.953 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.075 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.079 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:13:24.083 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-29 21:13:24.091 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-29 21:13:24.098 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:13:24.134 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:13:24.147 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.157 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-04-29 21:13:24.161 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.166 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-29 21:13:24.173 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted) && d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_1)
    .Take(__p_2)'
2025-04-29 21:13:24.181 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 21:13:24.185 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 21:13:24.187 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 21:13:24.238 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusCode IN (N'InStock', N'Listed'))
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusCode IN (N'InStock', N'Listed'))
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 21:13:24.277 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.279 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.280 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:13:24.281 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 21:13:24.283 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 21:13:24.284 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:13:24.295 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:13:24.322 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:24.366 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:24.373 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:24.381 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:24.385 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:24.395 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:24.397 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:24.402 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.405 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 106ms reading results.
2025-04-29 21:13:24.409 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.410 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 21:13:24.414 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 21:13:24.417 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 21:13:24.420 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 21:13:24.422 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 21:13:24.422 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 21:13:24.424 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 21:13:24.426 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 21:13:24.466 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 1432.1151ms
2025-04-29 21:13:24.467 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:13:24.471 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 1483.5517 ms
2025-04-29 21:13:24.476 +07:00 [DBG] Connection id "0HNC74VSTU0M6" completed keep alive response.
2025-04-29 21:13:24.479 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 21:13:24.484 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:24.487 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-29 21:13:24.490 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=1 - 200 null application/json; charset=utf-8 1531.45ms
2025-04-29 21:13:29.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=2&PageSize=1 - null null
2025-04-29 21:13:29.925 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 21:13:29.927 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 21:13:29.929 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 21:13:29.949 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:13:29.954 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 21:13:29.960 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:13:29.961 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto]]] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 21:13:29.964 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 21:13:29.966 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 21:13:29.971 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 21:13:29.975 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 21:13:29.976 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 21:13:29.978 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:13:29.980 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:13:29.982 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:13:29.983 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 21:13:29.986 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 21:13:29.989 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 21:13:29.990 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 21:13:29.991 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 21:13:29.992 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:13:29.993 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:13:29.994 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:13:29.995 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:13:30.009 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 21:13:30.014 +07:00 [DBG] Creating DbConnection.
2025-04-29 21:13:30.015 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 21:13:30.016 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.017 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.018 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:13:30.020 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 21:13:30.021 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 21:13:30.023 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:13:30.025 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:13:30.028 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.028 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 21:13:30.030 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.031 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 21:13:30.033 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .Include(d => d.DocumentStatus)
    .Where(d => d.UserId == __userId_0 && !(d.IsDeleted) && d.DocumentStatus.Code == "InStock" || d.DocumentStatus.Code == "Listed")
    .OrderByDescending(d => d.DocumentId)
    .Skip(__p_1)
    .Take(__p_1)'
2025-04-29 21:13:30.036 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-29 21:13:30.038 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-29 21:13:30.039 +07:00 [DBG] Including navigation: 'Document.DocumentStatus'.
2025-04-29 21:13:30.049 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Document>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusCode IN (N'InStock', N'Listed'))
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.DeletedAt (DateTime?), 4], [Property: Document.Description (string), 5], [Property: Document.DocumentStatusId (int) Required FK Index ValueGenerated.OnAdd, 6], [Property: Document.Edition (string) MaxLength(100), 7], [Property: Document.ImageUrl (string) MaxLength(500), 8], [Property: Document.IsDeleted (bool) Required, 9], [Property: Document.Isbn (string) MaxLength(20), 10], [Property: Document.Price (decimal?), 11], [Property: Document.PublicationYear (int?), 12], [Property: Document.Title (string) Required MaxLength(255), 13], [Property: Document.UserId (int) Required FK Index, 14] }
            1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: Category.CategoryName (string) Required Index MaxLength(255), 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required Index MaxLength(255), 18], [Property: User.FullName (string) Required MaxLength(255), 19], [Property: User.Password (string) Required MaxLength(255), 20], [Property: User.Phone (string) MaxLength(20), 21], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 22] }
            3 -> Dictionary<IProperty, int> { [Property: DocumentStatus.DocumentStatusId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: DocumentStatus.Code (string) Required MaxLength(50), 24], [Property: DocumentStatus.Name (string) Required MaxLength(50), 25] }
        SELECT s.documentId, s.author, s.categoryId, s.condition, s.DeletedAt, s.description, s.statusId, s.edition, s.imageUrl, s.IsDeleted, s.ISBN, s.price, s.publicationYear, s.title, s.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId, s.documentStatusId, s.statusCode, s.statusName
        FROM 
        (
            SELECT d.documentId, d.author, d.categoryId, d.condition, d.DeletedAt, d.description, d.statusId, d.edition, d.imageUrl, d.IsDeleted, d.ISBN, d.price, d.publicationYear, d.title, d.userId, d0.documentStatusId, d0.statusCode, d0.statusName
            FROM document AS d
            INNER JOIN documentStatus AS d0 ON d.statusId == d0.documentStatusId
            WHERE Not(d.IsDeleted) && (((d.userId == @__userId_0) && Not(d.IsDeleted)) && d0.statusCode IN (N'InStock', N'Listed'))
            ORDER BY d.documentId DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS s
        INNER JOIN categories AS c ON s.categoryId == c.categoryId
        INNER JOIN users AS u ON s.userId == u.userId
        ORDER BY s.documentId DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Document entity;
        Category entity;
        User entity;
        DocumentStatus entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Document instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Document);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Document)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                        {
                            return 
                            {
                                Document instance;
                                instance = new Document();
                                instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(6);
                                instance.<Edition>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(9);
                                instance.<Isbn>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                instance.<Price>k__BackingField = dataReader.IsDBNull(11) ? default(decimal?) : (decimal?)dataReader.GetDecimal(11);
                                instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(12) ? default(int?) : (int?)dataReader.GetInt32(12);
                                instance.<Title>k__BackingField = dataReader.GetString(13);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(14);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Document)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Category instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Category);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Category)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(15);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<UserId>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<FullName>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                instance.<Phone>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                instance.<RoleId>k__BackingField = dataReader.GetInt32(22);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        entity = 
        {
            MaterializationContext materializationContext4;
            IEntityType entityType4;
            DocumentStatus instance4;
            InternalEntityEntry entry4;
            bool hasNullKey4;
            materializationContext4 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance4 = default(DocumentStatus);
            entry4 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DocumentStatus.DocumentStatusId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(23) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey4);
            !(hasNullKey4) ? entry4 != default(InternalEntityEntry) ? 
            {
                entityType4 = entry4.EntityType;
                return instance4 = (DocumentStatus)entry4.Entity;
            } : 
            {
                ISnapshot shadowSnapshot4;
                shadowSnapshot4 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType4 = [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")];
                instance4 = switch (entityType4)
                {
                    case [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]: 
                        {
                            return 
                            {
                                DocumentStatus instance;
                                instance = new DocumentStatus();
                                instance.<DocumentStatusId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Code>k__BackingField = dataReader.GetString(24);
                                instance.<Name>k__BackingField = dataReader.GetString(25);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext4.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DocumentStatus | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DocumentStatus)
                }
                ;
                entry4 = entityType4 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType4, 
                    entity: instance4, 
                    snapshot: shadowSnapshot4);
                return instance4;
            } : default(void);
            return instance4;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Category>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<User>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, DocumentStatus>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Document.DocumentStatus (DocumentStatus) ToPrincipal DocumentStatus Inverse: Documents | Resolver: namelessParameter{22} => namelessParameter{22}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("DocumentStatus")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: DocumentStatus.Documents (ICollection<Document>) Collection ToDependent Document Inverse: DocumentStatus | Resolver: namelessParameter{23} => namelessParameter{23}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents")], 
            fixup: (namelessParameter{24}, namelessParameter{25}) => 
            {
                namelessParameter{24}.<DocumentStatus>k__BackingField = namelessParameter{25};
                return [LIFTABLE Constant: ClrICollectionAccessor<DocumentStatus, ICollection<Document>, Document> | Resolver: namelessParameter{26} => namelessParameter{26}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.DocumentStatus").FindNavigation("Documents").GetCollectionAccessor()].Add(
                    entity: namelessParameter{25}, 
                    value: namelessParameter{24}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 21:13:30.087 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.088 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.089 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:13:30.090 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 21:13:30.091 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 21:13:30.092 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:13:30.098 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:13:30.102 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:30.105 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:30.106 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:30.107 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:30.108 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:30.109 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:30.109 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:13:30.111 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.112 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-04-29 21:13:30.113 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.114 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 21:13:30.116 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 21:13:30.118 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 21:13:30.119 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 21:13:30.121 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 21:13:30.122 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 21:13:30.123 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 21:13:30.124 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 21:13:30.125 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 147.5126ms
2025-04-29 21:13:30.127 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:13:30.128 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 173.9898 ms
2025-04-29 21:13:30.129 +07:00 [DBG] Connection id "0HNC74VSTU0M6" completed keep alive response.
2025-04-29 21:13:30.130 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 21:13:30.130 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:13:30.131 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 21:13:30.132 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=2&PageSize=1 - 200 null application/json; charset=utf-8 210.3135ms
2025-04-29 21:14:12.232 +07:00 [DBG] Connection id "0HNC74VSTU0M7" received FIN.
2025-04-29 21:14:12.235 +07:00 [DBG] Connection id "0HNC74VSTU0M7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:14:12.238 +07:00 [DBG] Connection id "0HNC74VSTU0M7" disconnecting.
2025-04-29 21:14:12.240 +07:00 [DBG] Connection id "0HNC74VSTU0M7" stopped.
2025-04-29 21:15:41.049 +07:00 [DBG] Connection id "0HNC74VSTU0M6" disconnecting.
2025-04-29 21:15:41.052 +07:00 [DBG] Connection id "0HNC74VSTU0M6" stopped.
2025-04-29 21:15:41.053 +07:00 [DBG] Connection id "0HNC74VSTU0M6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:21:55.894 +07:00 [DBG] Connection id "0HNC74VSTU0M8" accepted.
2025-04-29 21:21:55.896 +07:00 [DBG] Connection id "0HNC74VSTU0M8" started.
2025-04-29 21:21:55.896 +07:00 [DBG] Connection id "0HNC74VSTU0M9" accepted.
2025-04-29 21:21:55.897 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-29 21:21:55.899 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-29 21:21:55.899 +07:00 [DBG] Request did not match any endpoints
2025-04-29 21:21:55.897 +07:00 [DBG] Connection id "0HNC74VSTU0M9" started.
2025-04-29 21:21:55.901 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.5339 ms
2025-04-29 21:21:55.902 +07:00 [DBG] Connection id "0HNC74VSTU0M8" completed keep alive response.
2025-04-29 21:21:55.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 5.8947ms
2025-04-29 21:21:56.463 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-29 21:21:56.467 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-29 21:21:56.469 +07:00 [DBG] Request did not match any endpoints
2025-04-29 21:21:56.489 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 18.4097 ms
2025-04-29 21:21:56.491 +07:00 [DBG] Connection id "0HNC74VSTU0M8" completed keep alive response.
2025-04-29 21:21:56.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.3454ms
2025-04-29 21:22:21.501 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=50&PageSize=1000 - null null
2025-04-29 21:22:21.505 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 21:22:21.506 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 21:22:21.508 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 21:22:21.510 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:22:21.513 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 21:22:21.530 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:22:21.533 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto]]] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 21:22:21.540 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 21:22:21.543 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 21:22:21.545 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 21:22:21.546 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 21:22:21.549 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 21:22:21.553 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:22:21.560 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:22:21.563 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:22:21.564 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 21:22:21.566 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 21:22:21.571 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 21:22:21.573 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 21:22:21.575 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 21:22:21.576 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:22:21.577 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:22:21.578 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:22:21.580 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:22:21.637 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 21:22:21.642 +07:00 [DBG] Creating DbConnection.
2025-04-29 21:22:21.642 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-29 21:22:21.643 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.647 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.648 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:22:21.649 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 21:22:21.651 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 21:22:21.652 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:22:21.659 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:22:21.661 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.662 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 21:22:21.663 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.664 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-29 21:22:21.666 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.668 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.669 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:22:21.670 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 21:22:21.672 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 21:22:21.673 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:22:21.682 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:22:21.687 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.689 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-29 21:22:21.690 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.692 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 21:22:21.693 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 21:22:21.695 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 21:22:21.696 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 21:22:21.697 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 21:22:21.698 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 21:22:21.699 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 21:22:21.700 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 21:22:21.702 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 148.6823ms
2025-04-29 21:22:21.703 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:22:21.705 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 191.7808 ms
2025-04-29 21:22:21.706 +07:00 [DBG] Connection id "0HNC74VSTU0M8" completed keep alive response.
2025-04-29 21:22:21.708 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 21:22:21.709 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:21.710 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 21:22:21.712 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=50&PageSize=1000 - 200 null application/json; charset=utf-8 210.4277ms
2025-04-29 21:22:53.436 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=2 - null null
2025-04-29 21:22:53.440 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Documents/mine'
2025-04-29 21:22:53.441 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)' with route pattern 'api/Documents/mine' is valid for the request path '/api/Documents/mine'
2025-04-29 21:22:53.443 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/mine'
2025-04-29 21:22:53.445 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:22:53.447 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-29 21:22:53.448 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:22:53.455 +07:00 [INF] Route matched with {action = "GetMyInventory", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto]]] GetMyInventory(ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-29 21:22:53.476 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 21:22:53.478 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 21:22:53.484 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-29 21:22:53.490 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 21:22:53.491 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 21:22:53.493 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:22:53.495 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-29 21:22:53.502 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:22:53.504 +07:00 [DBG] Attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' using the name '' in request data ...
2025-04-29 21:22:53.506 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32' using the name 'Page' in request data ...
2025-04-29 21:22:53.508 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.Page' of type 'System.Int32'.
2025-04-29 21:22:53.509 +07:00 [DBG] Attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-04-29 21:22:53.511 +07:00 [DBG] Done attempting to bind property 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters.PageSize' of type 'System.Int32'.
2025-04-29 21:22:53.517 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:22:53.519 +07:00 [DBG] Done attempting to bind parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:22:53.520 +07:00 [DBG] Attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters' ...
2025-04-29 21:22:53.522 +07:00 [DBG] Done attempting to validate the bound parameter 'queryParams' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentQueryParameters'.
2025-04-29 21:22:53.526 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 21:22:53.528 +07:00 [DBG] Creating DbConnection.
2025-04-29 21:22:53.529 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-29 21:22:53.531 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.534 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.536 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:22:53.536 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 21:22:53.537 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 21:22:53.538 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:22:53.540 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [document] AS [d]
INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
2025-04-29 21:22:53.542 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.543 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-29 21:22:53.544 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.545 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-29 21:22:53.548 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.549 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.550 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 21:22:53.551 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-29 21:22:53.552 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-29 21:22:53.553 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:22:53.556 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[documentId], [s].[author], [s].[categoryId], [s].[condition], [s].[DeletedAt], [s].[description], [s].[statusId], [s].[edition], [s].[imageUrl], [s].[IsDeleted], [s].[ISBN], [s].[price], [s].[publicationYear], [s].[title], [s].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId], [s].[documentStatusId], [s].[statusCode], [s].[statusName]
FROM (
    SELECT [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[DeletedAt], [d].[description], [d].[statusId], [d].[edition], [d].[imageUrl], [d].[IsDeleted], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[title], [d].[userId], [d0].[documentStatusId], [d0].[statusCode], [d0].[statusName]
    FROM [document] AS [d]
    INNER JOIN [documentStatus] AS [d0] ON [d].[statusId] = [d0].[documentStatusId]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[userId] = @__userId_0 AND [d].[IsDeleted] = CAST(0 AS bit) AND [d0].[statusCode] IN (N'InStock', N'Listed')
    ORDER BY [d].[documentId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [categories] AS [c] ON [s].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [s].[userId] = [u].[userId]
ORDER BY [s].[documentId] DESC
2025-04-29 21:22:53.558 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.559 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.560 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.561 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.565 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.567 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.568 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.570 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.572 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.573 +07:00 [DBG] The navigation 'Document.DocumentStatus' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.574 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'DocumentStatus' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 21:22:53.575 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.576 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 18ms reading results.
2025-04-29 21:22:53.577 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.580 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-29 21:22:53.582 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 21:22:53.584 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 21:22:53.585 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 21:22:53.586 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 21:22:53.587 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 21:22:53.587 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 21:22:53.588 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.PagedResult`1[[ExchangeDocument.BusinessLayer.DTOs.DocumentInventoryDto, ExchangeDocument, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 21:22:53.589 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument) in 96.0044ms
2025-04-29 21:22:53.590 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetMyInventory (ExchangeDocument)'
2025-04-29 21:22:53.591 +07:00 [INF] HTTP GET /api/Documents/mine responded 200 in 144.0893 ms
2025-04-29 21:22:53.592 +07:00 [DBG] Connection id "0HNC74VSTU0M8" completed keep alive response.
2025-04-29 21:22:53.592 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-29 21:22:53.593 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-29 21:22:53.594 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-29 21:22:53.596 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/mine?Page=1&PageSize=2 - 200 null application/json; charset=utf-8 159.6787ms
2025-04-29 21:24:07.483 +07:00 [DBG] Connection id "0HNC74VSTU0M9" disconnecting.
2025-04-29 21:24:07.486 +07:00 [DBG] Connection id "0HNC74VSTU0M9" stopped.
2025-04-29 21:24:07.488 +07:00 [DBG] Connection id "0HNC74VSTU0M9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:24:35.040 +07:00 [DBG] Connection id "0HNC74VSTU0M8" received FIN.
2025-04-29 21:24:35.041 +07:00 [DBG] Connection id "0HNC74VSTU0M8" disconnecting.
2025-04-29 21:24:35.042 +07:00 [DBG] Connection id "0HNC74VSTU0M8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 21:24:35.059 +07:00 [DBG] Connection id "0HNC74VSTU0M8" stopped.
