2025-04-26 20:10:58.861 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-26 20:10:58.957 +07:00 [DBG] Hosting starting
2025-04-26 20:10:59.012 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-26 20:10:59.015 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-26 20:10:59.018 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-26 20:10:59.019 +07:00 [INF] Hosting environment: Development
2025-04-26 20:10:59.021 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-26 20:10:59.023 +07:00 [DBG] Hosting started
2025-04-26 20:11:24.792 +07:00 [INF] Application is shutting down...
2025-04-26 20:11:24.792 +07:00 [DBG] Hosting stopping
2025-04-26 20:11:24.798 +07:00 [DBG] Hosting stopped
2025-04-26 20:15:05.072 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-26 20:15:05.157 +07:00 [DBG] Hosting starting
2025-04-26 20:15:05.202 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-26 20:15:05.205 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-26 20:15:05.207 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-26 20:15:05.211 +07:00 [INF] Hosting environment: Development
2025-04-26 20:15:05.212 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-26 20:15:05.213 +07:00 [DBG] Hosting started
2025-04-26 20:15:10.383 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" accepted.
2025-04-26 20:15:10.386 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" started.
2025-04-26 20:15:10.387 +07:00 [DBG] Connection id "0HNC4OHFKPBS7" accepted.
2025-04-26 20:15:10.390 +07:00 [DBG] Connection id "0HNC4OHFKPBS7" started.
2025-04-26 20:15:10.421 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 20:15:10.433 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-26 20:15:10.447 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 20:15:10.451 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:15:10.539 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 77.9799 ms
2025-04-26 20:15:10.548 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" completed keep alive response.
2025-04-26 20:15:10.551 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 131.7978ms
2025-04-26 20:15:11.067 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-26 20:15:11.073 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-26 20:15:11.075 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:15:11.196 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 118.6822 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-26 20:15:11.212 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-26 20:15:11.224 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" completed keep alive response.
2025-04-26 20:15:11.226 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 159.1304ms
2025-04-26 20:15:16.478 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 20:15:16.480 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 20:15:16.481 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:15:16.483 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.5690 ms
2025-04-26 20:15:16.485 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" completed keep alive response.
2025-04-26 20:15:16.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 10.1044ms
2025-04-26 20:15:16.641 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-26 20:15:16.644 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-26 20:15:16.647 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:15:16.659 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 9.5649 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-26 20:15:16.665 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-26 20:15:16.673 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" completed keep alive response.
2025-04-26 20:15:16.675 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 33.9835ms
2025-04-26 20:16:06.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-26 20:16:06.962 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-26 20:16:06.964 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:16:06.968 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 3.4897 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-26 20:16:06.974 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-26 20:16:06.978 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" completed keep alive response.
2025-04-26 20:16:06.979 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 23.8438ms
2025-04-26 20:16:09.464 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 20:16:09.468 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 20:16:09.468 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:16:09.470 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.2717 ms
2025-04-26 20:16:09.471 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" completed keep alive response.
2025-04-26 20:16:09.473 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 8.6706ms
2025-04-26 20:16:09.631 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-26 20:16:09.635 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-26 20:16:09.637 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:16:09.643 +07:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 3.7005 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-04-26 20:16:09.651 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-26 20:16:09.658 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" completed keep alive response.
2025-04-26 20:16:09.660 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 28.8768ms
2025-04-26 20:17:22.168 +07:00 [DBG] Connection id "0HNC4OHFKPBS7" disconnecting.
2025-04-26 20:17:22.171 +07:00 [DBG] Connection id "0HNC4OHFKPBS7" stopped.
2025-04-26 20:17:22.175 +07:00 [DBG] Connection id "0HNC4OHFKPBS7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 20:18:21.594 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" disconnecting.
2025-04-26 20:18:21.598 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" stopped.
2025-04-26 20:18:21.600 +07:00 [DBG] Connection id "0HNC4OHFKPBS6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 20:21:33.564 +07:00 [INF] Application is shutting down...
2025-04-26 20:21:33.565 +07:00 [DBG] Hosting stopping
2025-04-26 20:21:33.573 +07:00 [DBG] Hosting stopped
2025-04-26 20:21:42.782 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-26 20:21:42.881 +07:00 [DBG] Hosting starting
2025-04-26 20:21:42.948 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-26 20:21:42.949 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-26 20:21:42.950 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-26 20:21:42.951 +07:00 [INF] Hosting environment: Development
2025-04-26 20:21:42.952 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-26 20:21:42.953 +07:00 [DBG] Hosting started
2025-04-26 20:21:45.869 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" accepted.
2025-04-26 20:21:45.874 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" started.
2025-04-26 20:21:45.875 +07:00 [DBG] Connection id "0HNC4OL5GF0SH" accepted.
2025-04-26 20:21:45.878 +07:00 [DBG] Connection id "0HNC4OL5GF0SH" started.
2025-04-26 20:21:45.910 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 20:21:45.919 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-26 20:21:45.936 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 20:21:45.939 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:21:46.025 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 79.3538 ms
2025-04-26 20:21:46.031 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" completed keep alive response.
2025-04-26 20:21:46.034 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 127.1813ms
2025-04-26 20:21:46.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-26 20:21:46.537 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-26 20:21:46.539 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:21:46.668 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 126.4182 ms
2025-04-26 20:21:46.672 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" completed keep alive response.
2025-04-26 20:21:46.675 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 143.2006ms
2025-04-26 20:22:08.414 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 227
2025-04-26 20:22:08.420 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:22:08.428 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:22:08.433 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:22:08.443 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:22:08.447 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-26 20:22:08.449 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:22:08.472 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:22:08.479 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:22:08.481 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:22:08.482 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:22:08.486 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:22:08.489 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:22:08.494 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:22:08.559 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-26 20:22:08.575 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:22:08.579 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:22:08.581 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:22:08.585 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:22:08.615 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000003": started reading request body.
2025-04-26 20:22:08.618 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000003": done reading request body.
2025-04-26 20:22:08.638 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:22:08.640 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:22:08.642 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:22:08.644 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:22:08.656 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:22:08.661 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 20:22:08.663 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 20:22:08.665 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 20:22:08.671 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 20:22:08.673 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 20:22:08.676 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 20:22:08.678 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 20:22:08.707 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 211.6185ms
2025-04-26 20:22:08.709 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:22:08.711 +07:00 [INF] HTTP POST /api/Documents responded 400 in 270.1157 ms
2025-04-26 20:22:08.713 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" completed keep alive response.
2025-04-26 20:22:08.715 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 301.2492ms
2025-04-26 20:22:42.398 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 239
2025-04-26 20:22:42.403 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:22:42.405 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:22:42.407 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:22:42.410 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:22:42.414 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:22:42.418 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:22:42.421 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:22:42.423 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:22:42.425 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:22:42.432 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:22:42.435 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:22:42.437 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:22:42.448 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:22:42.452 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:22:42.454 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:22:42.456 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:22:42.459 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000004": started reading request body.
2025-04-26 20:22:42.461 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000004": done reading request body.
2025-04-26 20:22:42.466 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:22:42.467 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:22:42.468 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:22:42.470 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:22:42.471 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:22:42.473 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 20:22:42.474 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 20:22:42.475 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 20:22:42.481 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 20:22:42.483 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 20:22:42.486 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 20:22:42.487 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 20:22:42.489 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 51.9822ms
2025-04-26 20:22:42.491 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:22:42.492 +07:00 [INF] HTTP POST /api/Documents responded 400 in 82.2979 ms
2025-04-26 20:22:42.495 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" completed keep alive response.
2025-04-26 20:22:42.499 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 101.4233ms
2025-04-26 20:23:57.789 +07:00 [DBG] Connection id "0HNC4OL5GF0SH" disconnecting.
2025-04-26 20:23:57.793 +07:00 [DBG] Connection id "0HNC4OL5GF0SH" stopped.
2025-04-26 20:23:57.796 +07:00 [DBG] Connection id "0HNC4OL5GF0SH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 20:24:41.660 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 295
2025-04-26 20:24:41.666 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:24:41.668 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:24:41.671 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:24:41.673 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:24:41.674 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:24:41.676 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:24:41.681 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:24:41.684 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:24:41.687 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:24:41.692 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:24:41.694 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:24:41.695 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:24:41.705 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:24:41.707 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:24:41.708 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:24:41.710 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:24:41.712 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000005": started reading request body.
2025-04-26 20:24:41.713 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000005": done reading request body.
2025-04-26 20:24:41.717 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:24:41.719 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:24:41.721 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:24:41.722 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:24:41.723 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:24:42.152 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-26 20:24:42.217 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-26 20:24:42.416 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-26 20:24:42.455 +07:00 [DBG] Creating DbConnection.
2025-04-26 20:24:42.471 +07:00 [DBG] Created DbConnection. (14ms).
2025-04-26 20:24:42.474 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:24:42.587 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:24:42.591 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 20:24:42.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-26 20:24:42.602 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-26 20:24:42.609 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:24:42.645 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:24:42.659 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:24:42.668 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 13ms reading results.
2025-04-26 20:24:42.672 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:24:42.678 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-04-26 20:24:42.684 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 20:24:42.687 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 20:24:42.688 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-26 20:24:42.690 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-26 20:24:42.691 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-26 20:24:42.693 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-26 20:24:42.704 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 1009.2787ms
2025-04-26 20:24:42.707 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:24:42.709 +07:00 [INF] HTTP POST /api/Documents responded 400 in 1035.8826 ms
2025-04-26 20:24:42.711 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" completed keep alive response.
2025-04-26 20:24:42.713 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-26 20:24:42.718 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:24:42.721 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-26 20:24:42.723 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/json; charset=utf-8 1063.087ms
2025-04-26 20:24:58.516 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 286
2025-04-26 20:24:58.519 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:24:58.521 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:24:58.523 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:24:58.526 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:24:58.530 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:24:58.531 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:24:58.537 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:24:58.540 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:24:58.542 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:24:58.544 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:24:58.547 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:24:58.552 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:24:58.555 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:24:58.558 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:24:58.559 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:24:58.561 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:24:58.566 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000006": started reading request body.
2025-04-26 20:24:58.568 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000006": done reading request body.
2025-04-26 20:24:58.571 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:24:58.573 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:24:58.575 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:24:58.576 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:24:58.578 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:24:58.580 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 20:24:58.581 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 20:24:58.583 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 20:24:58.584 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 20:24:58.585 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 20:24:58.587 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 20:24:58.588 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 20:24:58.590 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 37.5581ms
2025-04-26 20:24:58.591 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:24:58.592 +07:00 [INF] HTTP POST /api/Documents responded 400 in 66.2027 ms
2025-04-26 20:24:58.593 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" completed keep alive response.
2025-04-26 20:24:58.596 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 79.7104ms
2025-04-26 20:25:10.249 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 286
2025-04-26 20:25:10.253 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:25:10.256 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:25:10.258 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:25:10.259 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:25:10.261 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:25:10.263 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:25:10.265 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:25:10.268 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:25:10.271 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:25:10.274 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:25:10.275 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:25:10.279 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:25:10.282 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:25:10.284 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:25:10.286 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:25:10.289 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:25:10.290 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000007": started reading request body.
2025-04-26 20:25:10.291 +07:00 [DBG] Connection id "0HNC4OL5GF0SG", Request id "0HNC4OL5GF0SG:00000007": done reading request body.
2025-04-26 20:25:10.292 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:25:10.293 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:25:10.298 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:25:10.300 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:25:10.301 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:25:10.315 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-26 20:25:10.320 +07:00 [DBG] Creating DbConnection.
2025-04-26 20:25:10.321 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-26 20:25:10.322 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.325 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.327 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 20:25:10.330 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-26 20:25:10.332 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-26 20:25:10.334 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:25:10.340 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:25:10.366 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:25:10.380 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.383 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 39ms reading results.
2025-04-26 20:25:10.385 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.387 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-26 20:25:10.409 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:25:10.448 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:25:10.458 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:25:10.465 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-26 20:25:10.468 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-26 20:25:10.484 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-26 20:25:10.535 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.537 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.540 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 20:25:10.541 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-26 20:25:10.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-26 20:25:10.548 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-26 20:25:10.557 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-26 20:25:10.568 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.570 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-04-26 20:25:10.572 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.574 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-26 20:25:10.589 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:824e9085-b6da-4742-afe2-093fd961a3f8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:824e9085-b6da-4742-afe2-093fd961a3f8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-26 20:25:10.616 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 337.0011ms
2025-04-26 20:25:10.618 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:25:10.620 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:824e9085-b6da-4742-afe2-093fd961a3f8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ExchangeDocument.DataAccessLayer.Repositories.DocumentRepository.AddAsync(Document document) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\DataAccessLayer\Repositories\DocumentRepository.cs:line 20
   at ExchangeDocument.BusinessLayer.Services.DocumentService.AddDocumentAsync(DocumentCreateDto documentDto, Int32 userId) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\BusinessLayer\Services\DocumentService.cs:line 49
   at ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument(DocumentCreateDto documentDto) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\PresentationLayer\Controllers\DocumentsController.cs:line 43
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-26 20:25:10.653 +07:00 [ERR] HTTP POST /api/Documents responded 500 in 393.3303 ms
2025-04-26 20:25:10.654 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" completed keep alive response.
2025-04-26 20:25:10.655 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-26 20:25:10.656 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:25:10.657 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-26 20:25:10.659 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 500 null text/plain; charset=utf-8 409.1289ms
2025-04-26 20:25:28.015 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" received FIN.
2025-04-26 20:25:28.017 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 20:25:28.018 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" disconnecting.
2025-04-26 20:25:28.026 +07:00 [DBG] Connection id "0HNC4OL5GF0SG" stopped.
2025-04-26 20:52:12.427 +07:00 [INF] Application is shutting down...
2025-04-26 20:52:12.429 +07:00 [DBG] Hosting stopping
2025-04-26 20:52:12.437 +07:00 [DBG] Hosting stopped
2025-04-26 20:52:18.871 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-26 20:52:18.951 +07:00 [DBG] Hosting starting
2025-04-26 20:52:18.997 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-26 20:52:19.001 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-26 20:52:19.003 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-26 20:52:19.007 +07:00 [INF] Hosting environment: Development
2025-04-26 20:52:19.008 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-26 20:52:19.009 +07:00 [DBG] Hosting started
2025-04-26 20:52:36.387 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" accepted.
2025-04-26 20:52:36.388 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" started.
2025-04-26 20:52:36.389 +07:00 [DBG] Connection id "0HNC4P6D0C9LM" accepted.
2025-04-26 20:52:36.391 +07:00 [DBG] Connection id "0HNC4P6D0C9LM" started.
2025-04-26 20:52:36.413 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 20:52:36.421 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-26 20:52:36.431 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 20:52:36.435 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:52:36.508 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 67.1957 ms
2025-04-26 20:52:36.514 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" completed keep alive response.
2025-04-26 20:52:36.518 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 105.6541ms
2025-04-26 20:52:37.022 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-26 20:52:37.030 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-26 20:52:37.034 +07:00 [DBG] Request did not match any endpoints
2025-04-26 20:52:37.192 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 154.8306 ms
2025-04-26 20:52:37.195 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" completed keep alive response.
2025-04-26 20:52:37.196 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 173.6659ms
2025-04-26 20:53:23.321 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 224
2025-04-26 20:53:23.328 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:53:23.334 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:53:23.339 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:53:23.344 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:53:23.347 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-26 20:53:23.350 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:53:23.374 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:53:23.383 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:53:23.386 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:53:23.388 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:53:23.389 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:53:23.391 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:53:23.394 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:53:23.469 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-26 20:53:23.489 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:53:23.496 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:53:23.502 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:53:23.504 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:53:23.538 +07:00 [DBG] Connection id "0HNC4P6D0C9LL", Request id "0HNC4P6D0C9LL:00000003": started reading request body.
2025-04-26 20:53:23.541 +07:00 [DBG] Connection id "0HNC4P6D0C9LL", Request id "0HNC4P6D0C9LL:00000003": done reading request body.
2025-04-26 20:53:23.560 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:53:23.563 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:53:23.566 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:53:23.568 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:53:23.580 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:53:23.584 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 20:53:23.586 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 20:53:23.589 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 20:53:23.594 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 20:53:23.596 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 20:53:23.601 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 20:53:23.603 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 20:53:23.631 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 236.2778ms
2025-04-26 20:53:23.636 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:53:23.638 +07:00 [INF] HTTP POST /api/Documents responded 400 in 295.3336 ms
2025-04-26 20:53:23.639 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" completed keep alive response.
2025-04-26 20:53:23.642 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 321.396ms
2025-04-26 20:54:02.082 +07:00 [DBG] Connection id "0HNC4P6D0C9LM" received FIN.
2025-04-26 20:54:02.086 +07:00 [DBG] Connection id "0HNC4P6D0C9LM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 20:54:02.088 +07:00 [DBG] Connection id "0HNC4P6D0C9LM" disconnecting.
2025-04-26 20:54:02.090 +07:00 [DBG] Connection id "0HNC4P6D0C9LM" stopped.
2025-04-26 20:55:27.819 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" received FIN.
2025-04-26 20:55:27.821 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 20:55:27.822 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" disconnecting.
2025-04-26 20:55:27.827 +07:00 [DBG] Connection id "0HNC4P6D0C9LL" stopped.
2025-04-26 20:56:20.333 +07:00 [DBG] Connection id "0HNC4P6D0C9LN" accepted.
2025-04-26 20:56:20.336 +07:00 [DBG] Connection id "0HNC4P6D0C9LN" started.
2025-04-26 20:56:20.339 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 294
2025-04-26 20:56:20.344 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:56:20.345 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:56:20.347 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:56:20.350 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:56:20.352 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:56:20.356 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:56:20.361 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:56:20.363 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:56:20.364 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:56:20.366 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:56:20.366 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:56:20.368 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:56:20.376 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:56:20.380 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:56:20.382 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:56:20.383 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:56:20.384 +07:00 [DBG] Connection id "0HNC4P6D0C9LN", Request id "0HNC4P6D0C9LN:00000001": started reading request body.
2025-04-26 20:56:20.385 +07:00 [DBG] Connection id "0HNC4P6D0C9LN", Request id "0HNC4P6D0C9LN:00000001": done reading request body.
2025-04-26 20:56:20.387 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:56:20.390 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:56:20.392 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:56:20.393 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:56:20.397 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:56:20.825 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-26 20:56:20.884 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-26 20:56:21.076 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-26 20:56:21.116 +07:00 [DBG] Creating DbConnection.
2025-04-26 20:56:21.131 +07:00 [DBG] Created DbConnection. (14ms).
2025-04-26 20:56:21.134 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:21.244 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:21.248 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 20:56:21.252 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-26 20:56:21.259 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-26 20:56:21.266 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:56:21.300 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:56:21.312 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:21.319 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-26 20:56:21.324 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:21.331 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (7ms).
2025-04-26 20:56:21.335 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 20:56:21.339 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 20:56:21.340 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-26 20:56:21.342 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-26 20:56:21.344 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-26 20:56:21.347 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-26 20:56:21.360 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 992.2722ms
2025-04-26 20:56:21.364 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:56:21.366 +07:00 [INF] HTTP POST /api/Documents responded 400 in 1015.6950 ms
2025-04-26 20:56:21.367 +07:00 [DBG] Connection id "0HNC4P6D0C9LN" completed keep alive response.
2025-04-26 20:56:21.369 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-26 20:56:21.374 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:21.377 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-26 20:56:21.381 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/json; charset=utf-8 1042.8289ms
2025-04-26 20:56:48.140 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 294
2025-04-26 20:56:48.144 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 20:56:48.145 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 20:56:48.147 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:56:48.150 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-26 20:56:48.152 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:56:48.154 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 20:56:48.159 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 20:56:48.162 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 20:56:48.165 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 20:56:48.167 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 20:56:48.168 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 20:56:48.171 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:56:48.177 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 20:56:48.178 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:56:48.180 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 20:56:48.181 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 20:56:48.184 +07:00 [DBG] Connection id "0HNC4P6D0C9LN", Request id "0HNC4P6D0C9LN:00000002": started reading request body.
2025-04-26 20:56:48.186 +07:00 [DBG] Connection id "0HNC4P6D0C9LN", Request id "0HNC4P6D0C9LN:00000002": done reading request body.
2025-04-26 20:56:48.187 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 20:56:48.188 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:56:48.190 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:56:48.192 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 20:56:48.194 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 20:56:48.208 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-26 20:56:48.213 +07:00 [DBG] Creating DbConnection.
2025-04-26 20:56:48.214 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-26 20:56:48.215 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.219 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.222 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 20:56:48.225 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-26 20:56:48.227 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-26 20:56:48.229 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:56:48.234 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 20:56:48.264 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:56:48.278 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.281 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 42ms reading results.
2025-04-26 20:56:48.283 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.286 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-26 20:56:48.311 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:56:48.355 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:56:48.365 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:56:48.372 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-26 20:56:48.377 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-26 20:56:48.394 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-26 20:56:48.445 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.448 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.453 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 20:56:48.455 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-26 20:56:48.457 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-26 20:56:48.458 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-26 20:56:48.469 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-26 20:56:48.481 +07:00 [DBG] The foreign key property 'Document.DocumentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-26 20:56:48.487 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.491 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 17ms reading results.
2025-04-26 20:56:48.493 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.494 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-26 20:56:48.503 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 20:56:48.509 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-26 20:56:48.512 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 20:56:48.515 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 20:56:48.517 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-26 20:56:48.517 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-26 20:56:48.519 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-26 20:56:48.520 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.DTOs.DocumentDto'.
2025-04-26 20:56:48.534 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] for address (id=[5],action=[GetDocumentById],controller=[Documents])
2025-04-26 20:56:48.539 +07:00 [DBG] Successfully processed template api/Documents/{id} for ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) resulting in /api/Documents/5 and 
2025-04-26 20:56:48.541 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] with result /api/Documents/5
2025-04-26 20:56:48.555 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 384.5395ms
2025-04-26 20:56:48.557 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 20:56:48.558 +07:00 [INF] HTTP POST /api/Documents responded 201 in 407.8269 ms
2025-04-26 20:56:48.559 +07:00 [DBG] Connection id "0HNC4P6D0C9LN" completed keep alive response.
2025-04-26 20:56:48.561 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-26 20:56:48.563 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 20:56:48.565 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-26 20:56:48.567 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 201 null application/json; charset=utf-8 426.8138ms
2025-04-26 20:58:45.557 +07:00 [INF] Application is shutting down...
2025-04-26 20:58:45.558 +07:00 [DBG] Hosting stopping
2025-04-26 20:58:45.564 +07:00 [DBG] Connection id "0HNC4P6D0C9LN" disconnecting.
2025-04-26 20:58:45.566 +07:00 [DBG] Connection id "0HNC4P6D0C9LN" stopped.
2025-04-26 20:58:45.568 +07:00 [DBG] Connection id "0HNC4P6D0C9LN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 20:58:45.573 +07:00 [DBG] Hosting stopped
2025-04-26 21:17:11.981 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-26 21:17:12.064 +07:00 [DBG] Hosting starting
2025-04-26 21:17:12.098 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-26 21:17:12.102 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-26 21:17:12.103 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-26 21:17:12.104 +07:00 [INF] Hosting environment: Production
2025-04-26 21:17:12.105 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-26 21:17:12.105 +07:00 [DBG] Hosting started
2025-04-26 21:17:19.161 +07:00 [DBG] Connection id "0HNC4PK6T75VN" accepted.
2025-04-26 21:17:19.163 +07:00 [DBG] Connection id "0HNC4PK6T75VN" started.
2025-04-26 21:17:19.164 +07:00 [DBG] Connection id "0HNC4PK6T75VO" accepted.
2025-04-26 21:17:19.165 +07:00 [DBG] Connection id "0HNC4PK6T75VO" started.
2025-04-26 21:17:19.186 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:19.197 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-26 21:17:19.208 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:19.212 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:19.218 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:19.221 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-26 21:17:19.223 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 3.9184 ms
2025-04-26 21:17:19.230 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:19.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 47.6117ms
2025-04-26 21:17:19.243 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:20.984 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:20.993 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:20.997 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:20.999 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:21.000 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.1299 ms
2025-04-26 21:17:21.004 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:21.006 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 21.41ms
2025-04-26 21:17:21.009 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:22.176 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:22.180 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:22.182 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:22.185 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:22.187 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 2.0196 ms
2025-04-26 21:17:22.189 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:22.191 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 14.8621ms
2025-04-26 21:17:22.197 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:22.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:22.361 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:22.362 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:22.363 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:22.365 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 2.0301 ms
2025-04-26 21:17:22.368 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:22.370 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 14.0527ms
2025-04-26 21:17:22.375 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:22.540 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:22.544 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:22.545 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:22.547 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:22.548 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.0202 ms
2025-04-26 21:17:22.550 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:22.551 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 11.1522ms
2025-04-26 21:17:22.555 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:22.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:22.726 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:22.728 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:22.729 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:22.731 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.6892 ms
2025-04-26 21:17:22.734 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:22.736 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 15.3106ms
2025-04-26 21:17:22.741 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:23.062 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:23.065 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:23.067 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:23.067 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:23.069 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.6270 ms
2025-04-26 21:17:23.072 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:23.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 11.0661ms
2025-04-26 21:17:23.081 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:23.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:23.257 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:23.260 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:23.261 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:23.263 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.8495 ms
2025-04-26 21:17:23.267 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:23.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 16.4367ms
2025-04-26 21:17:23.276 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:23.417 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:23.420 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:23.422 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:23.423 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:23.426 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 2.1591 ms
2025-04-26 21:17:23.428 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:23.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 12.0182ms
2025-04-26 21:17:23.434 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:23.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:23.611 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:23.613 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:23.614 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:23.615 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 0.8632 ms
2025-04-26 21:17:23.619 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:23.621 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 13.8802ms
2025-04-26 21:17:23.627 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:23.794 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:23.797 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:23.798 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:23.799 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:23.801 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.3603 ms
2025-04-26 21:17:23.804 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:23.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 11.4139ms
2025-04-26 21:17:23.812 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:23.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:23.957 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:23.959 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:23.960 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:23.962 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.3536 ms
2025-04-26 21:17:23.964 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:23.966 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 14.9292ms
2025-04-26 21:17:23.970 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:17:24.153 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:17:24.156 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:17:24.158 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:17:24.160 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:17:24.160 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 0.9442 ms
2025-04-26 21:17:24.163 +07:00 [DBG] Connection id "0HNC4PK6T75VN" completed keep alive response.
2025-04-26 21:17:24.165 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 12.2741ms
2025-04-26 21:17:24.169 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:19:12.202 +07:00 [DBG] Connection id "0HNC4PK6T75VO" received FIN.
2025-04-26 21:19:12.207 +07:00 [DBG] Connection id "0HNC4PK6T75VO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:19:12.211 +07:00 [DBG] Connection id "0HNC4PK6T75VO" disconnecting.
2025-04-26 21:19:12.213 +07:00 [DBG] Connection id "0HNC4PK6T75VO" stopped.
2025-04-26 21:19:35.058 +07:00 [DBG] Connection id "0HNC4PK6T75VN" disconnecting.
2025-04-26 21:19:35.061 +07:00 [DBG] Connection id "0HNC4PK6T75VN" stopped.
2025-04-26 21:19:35.062 +07:00 [DBG] Connection id "0HNC4PK6T75VN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:20:35.337 +07:00 [DBG] Connection id "0HNC4PK6T75VP" accepted.
2025-04-26 21:20:35.339 +07:00 [DBG] Connection id "0HNC4PK6T75VP" started.
2025-04-26 21:20:35.340 +07:00 [DBG] Connection id "0HNC4PK6T75VQ" accepted.
2025-04-26 21:20:35.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:20:35.342 +07:00 [DBG] Connection id "0HNC4PK6T75VQ" started.
2025-04-26 21:20:35.346 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:20:35.350 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:20:35.352 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:20:35.353 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.2532 ms
2025-04-26 21:20:35.358 +07:00 [DBG] Connection id "0HNC4PK6T75VP" completed keep alive response.
2025-04-26 21:20:35.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 18.3377ms
2025-04-26 21:20:35.362 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:20:42.599 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:20:42.602 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:20:42.603 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:20:42.604 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:20:42.606 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.7816 ms
2025-04-26 21:20:42.609 +07:00 [DBG] Connection id "0HNC4PK6T75VP" completed keep alive response.
2025-04-26 21:20:42.611 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 11.95ms
2025-04-26 21:20:42.615 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:20:42.763 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-26 21:20:42.768 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-26 21:20:42.770 +07:00 [DBG] Request did not match any endpoints
2025-04-26 21:20:42.773 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:20:42.774 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.5098 ms
2025-04-26 21:20:42.778 +07:00 [DBG] Connection id "0HNC4PK6T75VP" completed keep alive response.
2025-04-26 21:20:42.780 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 17.4281ms
2025-04-26 21:20:42.787 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-26 21:22:47.075 +07:00 [DBG] Connection id "0HNC4PK6T75VQ" disconnecting.
2025-04-26 21:22:47.076 +07:00 [DBG] Connection id "0HNC4PK6T75VQ" stopped.
2025-04-26 21:22:47.078 +07:00 [DBG] Connection id "0HNC4PK6T75VQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:22:54.113 +07:00 [DBG] Connection id "0HNC4PK6T75VP" disconnecting.
2025-04-26 21:22:54.114 +07:00 [DBG] Connection id "0HNC4PK6T75VP" stopped.
2025-04-26 21:22:54.115 +07:00 [DBG] Connection id "0HNC4PK6T75VP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:31:08.980 +07:00 [INF] Application is shutting down...
2025-04-26 21:31:08.981 +07:00 [DBG] Hosting stopping
2025-04-26 21:31:08.990 +07:00 [DBG] Hosting stopped
2025-04-26 21:31:21.960 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-26 21:31:22.092 +07:00 [DBG] Hosting starting
2025-04-26 21:31:22.140 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-26 21:31:22.142 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-26 21:31:22.144 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-26 21:31:22.145 +07:00 [INF] Hosting environment: Production
2025-04-26 21:31:22.147 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-26 21:31:22.148 +07:00 [DBG] Hosting started
2025-04-26 21:31:55.323 +07:00 [DBG] Connection id "0HNC4PSC0UGPP" received FIN.
2025-04-26 21:31:55.333 +07:00 [DBG] Connection id "0HNC4PSC0UGPP" accepted.
2025-04-26 21:31:55.336 +07:00 [DBG] Connection id "0HNC4PSC0UGPP" started.
2025-04-26 21:31:55.339 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ" accepted.
2025-04-26 21:31:55.341 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ" started.
2025-04-26 21:31:55.350 +07:00 [DBG] Connection id "0HNC4PSC0UGPP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:31:55.354 +07:00 [DBG] Connection id "0HNC4PSC0UGPP" disconnecting.
2025-04-26 21:31:55.358 +07:00 [DBG] Connection id "0HNC4PSC0UGPP" stopped.
2025-04-26 21:31:55.382 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 307
2025-04-26 21:31:55.390 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-26 21:31:55.418 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 21:31:55.424 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 21:31:55.427 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:31:55.440 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:31:55.442 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-26 21:31:55.444 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:31:55.494 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 21:31:55.499 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 21:31:55.501 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 21:31:55.504 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 21:31:55.506 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 21:31:55.508 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 21:31:55.512 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:31:55.657 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-26 21:31:55.682 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:31:55.690 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:31:55.693 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 21:31:55.697 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 21:31:55.774 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ", Request id "0HNC4PSC0UGPQ:00000001": started reading request body.
2025-04-26 21:31:55.775 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ", Request id "0HNC4PSC0UGPQ:00000001": done reading request body.
2025-04-26 21:31:55.805 +07:00 [DBG] JSON input formatter threw an exception: ']' is invalid without a matching open. Path: $ | LineNumber: 10 | BytePositionInLine: 46.
2025-04-26 21:31:55.806 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:31:55.808 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:31:55.809 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:31:55.817 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:31:55.820 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 21:31:55.823 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 21:31:55.826 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 21:31:55.830 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 21:31:55.833 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 21:31:55.837 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 21:31:55.839 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 21:31:55.893 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 380.5803ms
2025-04-26 21:31:55.898 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:31:55.902 +07:00 [INF] HTTP POST /api/Documents responded 400 in 461.1879 ms
2025-04-26 21:31:55.906 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ" completed keep alive response.
2025-04-26 21:31:55.910 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 531.701ms
2025-04-26 21:32:38.885 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 305
2025-04-26 21:32:38.890 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 21:32:38.893 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 21:32:38.895 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:32:38.897 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:32:38.898 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:32:38.900 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 21:32:38.902 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 21:32:38.904 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 21:32:38.906 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 21:32:38.910 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 21:32:38.912 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 21:32:38.914 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:32:38.926 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:32:38.930 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:32:38.932 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 21:32:38.934 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 21:32:38.936 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ", Request id "0HNC4PSC0UGPQ:00000002": started reading request body.
2025-04-26 21:32:38.937 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ", Request id "0HNC4PSC0UGPQ:00000002": done reading request body.
2025-04-26 21:32:38.942 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 21:32:38.945 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:32:38.947 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:32:38.948 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:32:38.968 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:32:38.969 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 21:32:38.971 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 21:32:38.972 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 21:32:38.977 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 21:32:38.979 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 21:32:38.982 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 21:32:38.983 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 21:32:38.986 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 71.8775ms
2025-04-26 21:32:38.987 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:32:38.989 +07:00 [INF] HTTP POST /api/Documents responded 400 in 91.8029 ms
2025-04-26 21:32:38.993 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ" completed keep alive response.
2025-04-26 21:32:38.995 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 109.6496ms
2025-04-26 21:34:50.594 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ" disconnecting.
2025-04-26 21:34:50.596 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ" stopped.
2025-04-26 21:34:50.600 +07:00 [DBG] Connection id "0HNC4PSC0UGPQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:35:16.449 +07:00 [DBG] Connection id "0HNC4PSC0UGPR" accepted.
2025-04-26 21:35:16.450 +07:00 [DBG] Connection id "0HNC4PSC0UGPR" received FIN.
2025-04-26 21:35:16.450 +07:00 [DBG] Connection id "0HNC4PSC0UGPR" started.
2025-04-26 21:35:16.451 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" accepted.
2025-04-26 21:35:16.452 +07:00 [DBG] Connection id "0HNC4PSC0UGPR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:35:16.453 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" started.
2025-04-26 21:35:16.456 +07:00 [DBG] Connection id "0HNC4PSC0UGPR" disconnecting.
2025-04-26 21:35:16.458 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 316
2025-04-26 21:35:16.458 +07:00 [DBG] Connection id "0HNC4PSC0UGPR" stopped.
2025-04-26 21:35:16.461 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 21:35:16.462 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 21:35:16.464 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:16.466 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:35:16.467 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:16.468 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 21:35:16.470 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 21:35:16.473 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 21:35:16.475 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 21:35:16.478 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 21:35:16.480 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 21:35:16.482 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:35:16.488 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:35:16.491 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:35:16.492 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 21:35:16.494 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 21:35:16.502 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000001": started reading request body.
2025-04-26 21:35:16.636 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000001": done reading request body.
2025-04-26 21:35:16.647 +07:00 [DBG] JSON input formatter threw an exception: ',' is an invalid start of a value. Path: $.categoryId | LineNumber: 2 | BytePositionInLine: 16.
2025-04-26 21:35:16.649 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:16.650 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:16.662 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:35:16.676 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:16.678 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 21:35:16.680 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 21:35:16.682 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 21:35:16.686 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 21:35:16.690 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 21:35:16.694 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 21:35:16.696 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 21:35:16.700 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 217.651ms
2025-04-26 21:35:16.703 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:16.708 +07:00 [INF] HTTP POST /api/Documents responded 400 in 242.3563 ms
2025-04-26 21:35:16.711 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" completed keep alive response.
2025-04-26 21:35:16.713 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 255.2769ms
2025-04-26 21:35:38.063 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 315
2025-04-26 21:35:38.066 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 21:35:38.068 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 21:35:38.071 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:38.072 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:35:38.073 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:38.075 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 21:35:38.077 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 21:35:38.079 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 21:35:38.080 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 21:35:38.082 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 21:35:38.084 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 21:35:38.088 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:35:38.090 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:35:38.092 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:35:38.094 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 21:35:38.096 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 21:35:38.097 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000002": started reading request body.
2025-04-26 21:35:38.099 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000002": done reading request body.
2025-04-26 21:35:38.103 +07:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.categoryId | LineNumber: 3 | BytePositionInLine: 10.
2025-04-26 21:35:38.105 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:38.107 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:38.108 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:35:38.109 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:38.111 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 21:35:38.111 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 21:35:38.112 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 21:35:38.114 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 21:35:38.115 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 21:35:38.117 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 21:35:38.119 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 21:35:38.122 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 34.4584ms
2025-04-26 21:35:38.123 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:38.124 +07:00 [INF] HTTP POST /api/Documents responded 400 in 51.8151 ms
2025-04-26 21:35:38.126 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" completed keep alive response.
2025-04-26 21:35:38.127 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 63.8951ms
2025-04-26 21:35:45.301 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 297
2025-04-26 21:35:45.305 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 21:35:45.306 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 21:35:45.308 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:45.310 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:35:45.311 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:45.312 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 21:35:45.314 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 21:35:45.315 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 21:35:45.317 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 21:35:45.320 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 21:35:45.322 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 21:35:45.323 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:35:45.325 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:35:45.327 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:35:45.328 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 21:35:45.329 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 21:35:45.331 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000003": started reading request body.
2025-04-26 21:35:45.332 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000003": done reading request body.
2025-04-26 21:35:45.334 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 21:35:45.336 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:45.338 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:45.339 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:35:45.341 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:35:45.342 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-26 21:35:45.343 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-26 21:35:45.344 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 21:35:45.346 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 21:35:45.347 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-26 21:35:45.349 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 21:35:45.353 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-26 21:35:45.355 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 31.4706ms
2025-04-26 21:35:45.356 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:35:45.357 +07:00 [INF] HTTP POST /api/Documents responded 400 in 47.4201 ms
2025-04-26 21:35:45.359 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" completed keep alive response.
2025-04-26 21:35:45.360 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 58.5439ms
2025-04-26 21:36:47.887 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 344
2025-04-26 21:36:47.889 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-26 21:36:47.890 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-26 21:36:47.892 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:36:47.894 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:36:47.895 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:36:47.899 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-26 21:36:47.901 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 21:36:47.903 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 21:36:47.904 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 21:36:47.906 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 21:36:47.908 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 21:36:47.911 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:36:47.914 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-26 21:36:47.916 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:36:47.918 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-26 21:36:47.920 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-26 21:36:47.922 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000004": started reading request body.
2025-04-26 21:36:47.923 +07:00 [DBG] Connection id "0HNC4PSC0UGPS", Request id "0HNC4PSC0UGPS:00000004": done reading request body.
2025-04-26 21:36:47.925 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.DTOs.DocumentCreateDto'
2025-04-26 21:36:47.929 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:36:47.932 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:36:47.933 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto' ...
2025-04-26 21:36:47.935 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.DTOs.DocumentCreateDto'.
2025-04-26 21:36:48.646 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-26 21:36:48.771 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-26 21:36:49.100 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-26 21:36:49.170 +07:00 [DBG] Creating DbConnection.
2025-04-26 21:36:49.203 +07:00 [DBG] Created DbConnection. (32ms).
2025-04-26 21:36:49.207 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:49.452 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:49.457 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 21:36:49.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-26 21:36:49.473 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-04-26 21:36:49.485 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 21:36:49.542 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-26 21:36:49.589 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 21:36:49.619 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:49.630 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 77ms reading results.
2025-04-26 21:36:49.635 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:49.643 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (6ms).
2025-04-26 21:36:49.689 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 21:36:49.786 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 21:36:49.814 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-26 21:36:49.820 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-26 21:36:49.826 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-26 21:36:49.857 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-26 21:36:49.948 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:49.951 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:49.955 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-26 21:36:49.956 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-26 21:36:49.960 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-26 21:36:49.962 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-26 21:36:49.979 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-26 21:36:49.991 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:49.996 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 13ms reading results.
2025-04-26 21:36:49.999 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:50.001 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-26 21:36:50.037 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1c839c55-749e-469b-9609-c0a52163344d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1c839c55-749e-469b-9609-c0a52163344d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-26 21:36:50.062 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 2151.0379ms
2025-04-26 21:36:50.065 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-26 21:36:50.070 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1c839c55-749e-469b-9609-c0a52163344d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ExchangeDocument.DataAccessLayer.Repositories.DocumentRepository.AddAsync(Document document) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\DataAccessLayer\Repositories\DocumentRepository.cs:line 20
   at ExchangeDocument.BusinessLayer.Services.DocumentService.AddDocumentAsync(DocumentCreateDto documentDto, Int32 userId) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\BusinessLayer\Services\DocumentService.cs:line 49
   at ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument(DocumentCreateDto documentDto) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\PresentationLayer\Controllers\DocumentsController.cs:line 43
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-04-26 21:36:50.112 +07:00 [DBG] 1 candidate(s) found for the request path '/error'
2025-04-26 21:36:50.114 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument)' with route pattern 'error' is valid for the request path '/error'
2025-04-26 21:36:50.116 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument)'
2025-04-26 21:36:50.117 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-26 21:36:50.118 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument)'
2025-04-26 21:36:50.122 +07:00 [INF] Route matched with {action = "HandleError", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleError() on controller ExchangeDocument.PresentationLayer.Controllers.ErrorController (ExchangeDocument).
2025-04-26 21:36:50.125 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-26 21:36:50.129 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-26 21:36:50.130 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-26 21:36:50.133 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-26 21:36:50.135 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-26 21:36:50.137 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.ErrorController (ExchangeDocument)
2025-04-26 21:36:50.138 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.ErrorController (ExchangeDocument)
2025-04-26 21:36:50.141 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-26 21:36:50.146 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-26 21:36:50.147 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2025-04-26 21:36:50.149 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-26 21:36:50.151 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-26 21:36:50.157 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument) in 20.7922ms
2025-04-26 21:36:50.159 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.ErrorController.HandleError (ExchangeDocument)'
2025-04-26 21:36:50.162 +07:00 [ERR] HTTP POST /api/Documents responded 500 in 2267.7105 ms
2025-04-26 21:36:50.164 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" completed keep alive response.
2025-04-26 21:36:50.166 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-26 21:36:50.170 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-26 21:36:50.173 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-26 21:36:50.175 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 500 null application/problem+json; charset=utf-8 2288.1674ms
2025-04-26 21:39:00.504 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" disconnecting.
2025-04-26 21:39:00.505 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" stopped.
2025-04-26 21:39:00.507 +07:00 [DBG] Connection id "0HNC4PSC0UGPS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-26 21:45:38.299 +07:00 [INF] Application is shutting down...
2025-04-26 21:45:38.300 +07:00 [DBG] Hosting stopping
2025-04-26 21:45:38.306 +07:00 [DBG] Hosting stopped
