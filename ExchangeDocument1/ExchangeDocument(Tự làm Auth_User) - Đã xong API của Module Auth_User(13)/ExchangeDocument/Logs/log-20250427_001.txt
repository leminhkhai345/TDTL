2025-04-27 22:34:10.291 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-27 22:34:10.771 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:34:10.868 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:34:10.889 +07:00 [DBG] Created DbConnection. (19ms).
2025-04-27 22:34:10.893 +07:00 [DBG] Migrating using database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:10.896 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:10.992 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:10.999 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-27 22:34:11.002 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-04-27 22:34:11.003 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2025-04-27 22:34:11.007 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-27 22:34:11.022 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-27 22:34:11.023 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:11.028 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-04-27 22:34:11.029 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:11.030 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:11.030 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-27 22:34:11.032 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-27 22:34:11.032 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-04-27 22:34:11.032 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-04-27 22:34:11.033 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-27 22:34:11.045 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-27 22:34:11.082 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-27 22:34:11.086 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-27 22:34:11.087 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-27 22:34:11.087 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-27 22:34:11.088 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-27 22:34:11.088 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-27 22:34:11.091 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-27 22:34:11.092 +07:00 [DBG] Committing transaction.
2025-04-27 22:34:11.094 +07:00 [DBG] Committed transaction.
2025-04-27 22:34:11.095 +07:00 [DBG] Disposing transaction.
2025-04-27 22:34:11.097 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-27 22:34:11.097 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-27 22:34:11.098 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-04-27 22:34:11.098 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-27 22:34:11.098 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-04-27 22:34:11.098 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-27 22:34:11.099 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-27 22:34:11.099 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-27 22:34:11.099 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-04-27 22:34:11.099 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-04-27 22:34:11.099 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-27 22:34:11.100 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-27 22:34:11.101 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:34:11.101 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:34:11.101 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:34:11.101 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-27 22:34:11.104 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-27 22:34:11.106 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:11.107 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-27 22:34:11.111 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-27 22:34:11.111 +07:00 [DBG] Committing transaction.
2025-04-27 22:34:11.112 +07:00 [DBG] Committed transaction.
2025-04-27 22:34:11.112 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-04-27 22:34:11.112 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-04-27 22:34:11.112 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-04-27 22:34:11.112 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-27 22:34:11.113 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-27 22:34:11.113 +07:00 [DBG] Disposing transaction.
2025-04-27 22:34:11.114 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:11.114 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-27 22:34:11.115 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:34:11.116 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:34:11.116 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-27 22:35:38.274 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-27 22:35:38.688 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:35:39.779 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:42:34.404 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-27 22:42:34.486 +07:00 [DBG] Hosting starting
2025-04-27 22:42:34.534 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-27 22:42:34.536 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-27 22:42:34.538 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-27 22:42:34.539 +07:00 [INF] Hosting environment: Development
2025-04-27 22:42:34.540 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-27 22:42:34.540 +07:00 [DBG] Hosting started
2025-04-27 22:42:51.695 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" accepted.
2025-04-27 22:42:51.696 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" started.
2025-04-27 22:42:51.697 +07:00 [DBG] Connection id "0HNC5K8LNFJ0D" accepted.
2025-04-27 22:42:51.698 +07:00 [DBG] Connection id "0HNC5K8LNFJ0D" started.
2025-04-27 22:42:51.723 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 22:42:51.730 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-27 22:42:51.742 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 22:42:51.745 +07:00 [DBG] Request did not match any endpoints
2025-04-27 22:42:51.819 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 67.7218 ms
2025-04-27 22:42:51.823 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:42:51.826 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 104.2994ms
2025-04-27 22:42:52.263 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-27 22:42:52.269 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-27 22:42:52.271 +07:00 [DBG] Request did not match any endpoints
2025-04-27 22:42:52.400 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 126.6644 ms
2025-04-27 22:42:52.403 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:42:52.404 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 141.5301ms
2025-04-27 22:43:10.797 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 233
2025-04-27 22:43:10.803 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 22:43:10.810 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 22:43:10.813 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:10.816 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:43:10.818 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-27 22:43:10.819 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:10.840 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:43:10.847 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:43:10.849 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:43:10.852 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:43:10.854 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:43:10.855 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:43:10.858 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:10.920 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-27 22:43:10.934 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:10.938 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:10.941 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 22:43:10.944 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 22:43:10.969 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000003": started reading request body.
2025-04-27 22:43:10.971 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000003": done reading request body.
2025-04-27 22:43:10.987 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 22:43:10.989 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:10.990 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:10.992 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:11.002 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:11.004 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-27 22:43:11.006 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-27 22:43:11.008 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:43:11.013 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 22:43:11.014 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-27 22:43:11.018 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-27 22:43:11.020 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-27 22:43:11.044 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 183.9041ms
2025-04-27 22:43:11.046 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:11.047 +07:00 [INF] HTTP POST /api/Documents responded 400 in 231.5574 ms
2025-04-27 22:43:11.049 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:43:11.051 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 254.3615ms
2025-04-27 22:43:28.224 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 355
2025-04-27 22:43:28.229 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 22:43:28.232 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 22:43:28.233 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:28.235 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:43:28.236 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:28.237 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:43:28.238 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:43:28.240 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:43:28.244 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:43:28.246 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:43:28.248 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:43:28.249 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:28.255 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:28.258 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:28.262 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 22:43:28.264 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 22:43:28.265 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000004": started reading request body.
2025-04-27 22:43:28.266 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000004": done reading request body.
2025-04-27 22:43:28.268 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 22:43:28.269 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:28.270 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:28.271 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:28.274 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:28.657 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:43:28.706 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-27 22:43:28.926 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-27 22:43:28.970 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:43:28.985 +07:00 [DBG] Created DbConnection. (13ms).
2025-04-27 22:43:28.988 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:29.099 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:29.102 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:43:29.107 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-27 22:43:29.114 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-27 22:43:29.120 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 22:43:29.155 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 22:43:29.168 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:29.176 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-27 22:43:29.182 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:29.188 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (6ms).
2025-04-27 22:43:29.194 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:43:29.197 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 22:43:29.198 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:43:29.199 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:43:29.201 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:43:29.203 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:43:29.215 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 965.888ms
2025-04-27 22:43:29.218 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:29.220 +07:00 [INF] HTTP POST /api/Documents responded 400 in 984.7272 ms
2025-04-27 22:43:29.222 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:43:29.225 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:43:29.230 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:29.233 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-27 22:43:29.236 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/json; charset=utf-8 1011.2641ms
2025-04-27 22:43:44.168 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 345
2025-04-27 22:43:44.172 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 22:43:44.174 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 22:43:44.177 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:44.197 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:43:44.201 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:44.205 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:43:44.209 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:43:44.210 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:43:44.211 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:43:44.213 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:43:44.215 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:43:44.216 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:44.222 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:44.224 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:44.227 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 22:43:44.229 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 22:43:44.231 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000005": started reading request body.
2025-04-27 22:43:44.232 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000005": done reading request body.
2025-04-27 22:43:44.237 +07:00 [DBG] JSON input formatter threw an exception: ',' is an invalid start of a value. Path: $.price | LineNumber: 8 | BytePositionInLine: 11.
2025-04-27 22:43:44.239 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:44.241 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:44.242 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:44.244 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:44.245 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-27 22:43:44.246 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-27 22:43:44.247 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:43:44.250 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 22:43:44.251 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-27 22:43:44.253 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-27 22:43:44.254 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-27 22:43:44.256 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 39.8345ms
2025-04-27 22:43:44.258 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:44.259 +07:00 [INF] HTTP POST /api/Documents responded 400 in 62.2806 ms
2025-04-27 22:43:44.260 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:43:44.261 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 93.211ms
2025-04-27 22:43:52.948 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 332
2025-04-27 22:43:52.948 +07:00 [DBG] Connection id "0HNC5K8LNFJ0D" received FIN.
2025-04-27 22:43:52.950 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 22:43:52.953 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 22:43:52.953 +07:00 [DBG] Connection id "0HNC5K8LNFJ0D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 22:43:52.958 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:52.961 +07:00 [DBG] Connection id "0HNC5K8LNFJ0D" disconnecting.
2025-04-27 22:43:52.962 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:43:52.964 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:52.964 +07:00 [DBG] Connection id "0HNC5K8LNFJ0D" stopped.
2025-04-27 22:43:52.967 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:43:52.972 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:43:52.975 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:43:52.976 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:43:52.979 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:43:52.980 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:43:52.982 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:52.983 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:43:52.984 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:52.985 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 22:43:52.987 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 22:43:52.990 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000006": started reading request body.
2025-04-27 22:43:52.991 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C", Request id "0HNC5K8LNFJ0C:00000006": done reading request body.
2025-04-27 22:43:52.993 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 22:43:52.996 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:52.997 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:52.998 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:43:52.999 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:43:53.011 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:43:53.016 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:43:53.017 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 22:43:53.018 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.021 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.023 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:43:53.025 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:43:53.026 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-27 22:43:53.027 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 22:43:53.031 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 22:43:53.057 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:43:53.065 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.067 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 33ms reading results.
2025-04-27 22:43:53.069 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.071 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:43:53.091 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:43:53.121 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:43:53.132 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:43:53.136 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-27 22:43:53.139 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-27 22:43:53.152 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-27 22:43:53.194 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.195 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.198 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:43:53.199 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:43:53.201 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-27 22:43:53.202 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-27 22:43:53.211 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-27 22:43:53.222 +07:00 [DBG] The foreign key property 'Document.DocumentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-27 22:43:53.228 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.229 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 14ms reading results.
2025-04-27 22:43:53.231 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.233 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:43:53.242 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:43:53.247 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-27 22:43:53.250 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:43:53.253 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 22:43:53.254 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:43:53.256 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:43:53.257 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:43:53.259 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDto'.
2025-04-27 22:43:53.269 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] for address (id=[9],action=[GetDocumentById],controller=[Documents])
2025-04-27 22:43:53.273 +07:00 [DBG] Successfully processed template api/Documents/{id} for ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) resulting in /api/Documents/9 and 
2025-04-27 22:43:53.277 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] with result /api/Documents/9
2025-04-27 22:43:53.285 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 303.3983ms
2025-04-27 22:43:53.287 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:43:53.290 +07:00 [INF] HTTP POST /api/Documents responded 201 in 328.3463 ms
2025-04-27 22:43:53.292 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:43:53.293 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:43:53.295 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:43:53.296 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 22:43:53.297 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 201 null application/json; charset=utf-8 349.9328ms
2025-04-27 22:44:53.944 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/7 - null null
2025-04-27 22:44:53.948 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/7'
2025-04-27 22:44:53.950 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/7'
2025-04-27 22:44:53.953 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:44:53.969 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:44:53.970 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:44:53.976 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:44:53.979 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:44:53.981 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:44:53.983 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:44:53.986 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:44:53.988 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:44:53.990 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:44:53.991 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:44:53.992 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:44:53.993 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:44:53.995 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:44:53.997 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:44:53.998 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:44:54.000 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:44:54.046 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:44:54.053 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.Status == "Listed")'
2025-04-27 22:44:54.061 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-27 22:44:54.064 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-27 22:44:54.098 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(13) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(13);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<Email>k__BackingField = dataReader.GetString(16);
                                    instance.<FullName>k__BackingField = dataReader.GetString(17);
                                    instance.<Password>k__BackingField = dataReader.GetString(18);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(20);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-27 22:44:54.130 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:44:54.132 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-27 22:44:54.133 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:44:54.134 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:44:54.135 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:44:54.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:44:54.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:44:54.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:44:54.144 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:44:54.147 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:44:54.149 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-04-27 22:44:54.151 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:44:54.152 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:44:54.154 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:44:54.156 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:44:54.157 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:44:54.158 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:44:54.159 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:44:54.160 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:44:54.161 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:44:54.163 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 173.5093ms
2025-04-27 22:44:54.164 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:44:54.166 +07:00 [INF] HTTP GET /api/Documents/7 responded 404 in 196.8097 ms
2025-04-27 22:44:54.167 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:44:54.169 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:44:54.171 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:44:54.173 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-27 22:44:54.174 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/7 - 404 null application/json; charset=utf-8 230.1248ms
2025-04-27 22:45:02.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-27 22:45:02.611 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-27 22:45:02.612 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-27 22:45:02.615 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:45:02.630 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:45:02.632 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:45:02.634 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:45:02.639 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:45:02.642 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:45:02.643 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:45:02.645 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:45:02.647 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:45:02.649 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:45:02.650 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:45:02.651 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:45:02.652 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:45:02.654 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:45:02.654 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:45:02.655 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:45:02.656 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:45:02.658 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:45:02.661 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:45:02.662 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-27 22:45:02.663 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:02.665 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:02.666 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:45:02.667 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:45:02.668 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:45:02.669 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:45:02.672 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:45:02.673 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:02.674 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-27 22:45:02.675 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:02.676 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:45:02.679 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:45:02.681 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:45:02.683 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:45:02.684 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:45:02.685 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:45:02.685 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:45:02.686 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:45:02.687 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 38.7161ms
2025-04-27 22:45:02.688 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:45:02.689 +07:00 [INF] HTTP GET /api/Documents/8 responded 404 in 59.1360 ms
2025-04-27 22:45:02.690 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:45:02.691 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:45:02.692 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:02.693 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-27 22:45:02.694 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 404 null application/json; charset=utf-8 84.9816ms
2025-04-27 22:45:26.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-27 22:45:26.255 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-27 22:45:26.257 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-27 22:45:26.259 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:45:26.260 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:45:26.261 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:45:26.264 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:45:26.268 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:45:26.271 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:45:26.272 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:45:26.273 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:45:26.275 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:45:26.277 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:45:26.279 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:45:26.280 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:45:26.281 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:45:26.283 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:45:26.284 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:45:26.285 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:45:26.286 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:45:26.288 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:45:26.290 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:45:26.291 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 22:45:26.292 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:26.294 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:26.296 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:45:26.297 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:45:26.298 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-27 22:45:26.299 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:45:26.303 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:45:26.305 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:26.306 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-27 22:45:26.307 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:26.309 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:45:26.311 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:45:26.313 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:45:26.315 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:45:26.316 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:45:26.317 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:45:26.318 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:45:26.319 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:45:26.320 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 43.0431ms
2025-04-27 22:45:26.321 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:45:26.322 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 61.6376 ms
2025-04-27 22:45:26.323 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:45:26.324 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:45:26.325 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:45:26.326 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 22:45:26.328 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 75.7537ms
2025-04-27 22:47:14.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-27 22:47:14.052 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-27 22:47:14.054 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-27 22:47:14.055 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:47:14.056 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:47:14.057 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:47:14.059 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:47:14.061 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:47:14.063 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:47:14.066 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:47:14.067 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:47:14.068 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:47:14.069 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:47:14.070 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:47:14.071 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:47:14.072 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:47:14.073 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:47:14.074 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:47:14.074 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:47:14.075 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:47:14.077 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:47:14.079 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:47:14.080 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 22:47:14.081 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:14.082 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:14.083 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:47:14.083 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:47:14.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:47:14.085 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:47:14.092 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:47:14.100 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:47:14.104 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:47:14.105 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:47:14.110 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:47:14.115 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:47:14.120 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:14.122 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 25ms reading results.
2025-04-27 22:47:14.123 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:14.124 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:47:14.126 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:47:14.129 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:47:14.132 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:47:14.133 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:47:14.134 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:47:14.134 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:47:14.135 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-27 22:47:14.139 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 70.1157ms
2025-04-27 22:47:14.140 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:47:14.141 +07:00 [INF] HTTP GET /api/Documents/8 responded 200 in 84.6956 ms
2025-04-27 22:47:14.142 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:47:14.143 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:47:14.144 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:14.146 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 22:47:14.147 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 98.7721ms
2025-04-27 22:47:46.068 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-27 22:47:46.072 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-27 22:47:46.073 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-27 22:47:46.076 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:47:46.077 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:47:46.078 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:47:46.079 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:47:46.082 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:47:46.085 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:47:46.086 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:47:46.088 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:47:46.090 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:47:46.093 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:47:46.095 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:47:46.096 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:47:46.097 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:47:46.099 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:47:46.101 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:47:46.101 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:47:46.103 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:47:46.104 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:47:46.105 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:47:46.106 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 22:47:46.107 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:46.109 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:46.110 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:47:46.112 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:47:46.112 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:47:46.113 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:47:46.115 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:47:46.117 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:46.118 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-27 22:47:46.119 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:46.120 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:47:46.121 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:47:46.123 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:47:46.125 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:47:46.126 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:47:46.126 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:47:46.127 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:47:46.128 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:47:46.129 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 36.7902ms
2025-04-27 22:47:46.131 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:47:46.133 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 55.6249 ms
2025-04-27 22:47:46.134 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" completed keep alive response.
2025-04-27 22:47:46.135 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:47:46.135 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:47:46.136 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-27 22:47:46.137 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 69.1002ms
2025-04-27 22:49:57.019 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" disconnecting.
2025-04-27 22:49:57.025 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" stopped.
2025-04-27 22:49:57.027 +07:00 [DBG] Connection id "0HNC5K8LNFJ0C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 22:50:36.485 +07:00 [DBG] Connection id "0HNC5K8LNFJ0E" accepted.
2025-04-27 22:50:36.487 +07:00 [DBG] Connection id "0HNC5K8LNFJ0E" started.
2025-04-27 22:50:36.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-27 22:50:36.494 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-27 22:50:36.496 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-27 22:50:36.497 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:50:36.498 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:50:36.499 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:50:36.500 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:50:36.502 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:50:36.504 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:50:36.507 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:50:36.509 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:50:36.510 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:50:36.511 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:50:36.512 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:50:36.513 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:50:36.514 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:50:36.515 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:50:36.516 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:50:36.516 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:50:36.517 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:50:36.520 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:50:36.523 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:50:36.524 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 22:50:36.525 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:36.525 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:36.526 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:50:36.527 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:50:36.528 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:50:36.529 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:50:36.534 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:50:36.537 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:36.539 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-27 22:50:36.539 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:36.540 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-27 22:50:36.541 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:50:36.543 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:50:36.543 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:50:36.544 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:50:36.544 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:50:36.545 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:50:36.546 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:50:36.547 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 35.6027ms
2025-04-27 22:50:36.547 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:50:36.548 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 50.0034 ms
2025-04-27 22:50:36.549 +07:00 [DBG] Connection id "0HNC5K8LNFJ0E" completed keep alive response.
2025-04-27 22:50:36.550 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:50:36.551 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:36.552 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 22:50:36.554 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 65.4049ms
2025-04-27 22:50:41.641 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-27 22:50:41.645 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-27 22:50:41.646 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-27 22:50:41.647 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:50:41.650 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:50:41.651 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:50:41.652 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:50:41.657 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:50:41.659 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:50:41.660 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:50:41.662 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:50:41.663 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:50:41.664 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:50:41.666 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:50:41.667 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:50:41.668 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:50:41.670 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:50:41.671 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:50:41.673 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:50:41.674 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:50:41.675 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:50:41.677 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:50:41.677 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 22:50:41.678 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:41.679 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:41.680 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:50:41.681 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:50:41.681 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:50:41.682 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:50:41.685 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:50:41.689 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:50:41.690 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:50:41.691 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:50:41.693 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:50:41.694 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:50:41.696 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:41.697 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 8ms reading results.
2025-04-27 22:50:41.698 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:41.699 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-27 22:50:41.700 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:50:41.703 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:50:41.704 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:50:41.706 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:50:41.706 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:50:41.707 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:50:41.708 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-27 22:50:41.709 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 44.5631ms
2025-04-27 22:50:41.710 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:50:41.711 +07:00 [INF] HTTP GET /api/Documents/8 responded 200 in 60.8655 ms
2025-04-27 22:50:41.712 +07:00 [DBG] Connection id "0HNC5K8LNFJ0E" completed keep alive response.
2025-04-27 22:50:41.713 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:50:41.714 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:50:41.714 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-27 22:50:41.715 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 74.0075ms
2025-04-27 22:52:52.962 +07:00 [DBG] Connection id "0HNC5K8LNFJ0E" disconnecting.
2025-04-27 22:52:52.965 +07:00 [DBG] Connection id "0HNC5K8LNFJ0E" stopped.
2025-04-27 22:52:52.969 +07:00 [DBG] Connection id "0HNC5K8LNFJ0E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 22:59:12.184 +07:00 [INF] Application is shutting down...
2025-04-27 22:59:12.185 +07:00 [DBG] Hosting stopping
2025-04-27 22:59:12.192 +07:00 [DBG] Hosting stopped
2025-04-27 22:59:20.106 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-27 22:59:20.189 +07:00 [DBG] Hosting starting
2025-04-27 22:59:20.231 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-27 22:59:20.234 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-27 22:59:20.236 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-27 22:59:20.239 +07:00 [INF] Hosting environment: Development
2025-04-27 22:59:20.241 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-27 22:59:20.242 +07:00 [DBG] Hosting started
2025-04-27 22:59:25.858 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" accepted.
2025-04-27 22:59:25.862 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" started.
2025-04-27 22:59:25.863 +07:00 [DBG] Connection id "0HNC5KHU0I3T3" accepted.
2025-04-27 22:59:25.864 +07:00 [DBG] Connection id "0HNC5KHU0I3T3" started.
2025-04-27 22:59:25.888 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 22:59:25.895 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-27 22:59:25.908 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 22:59:25.909 +07:00 [DBG] Request did not match any endpoints
2025-04-27 22:59:25.977 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 63.9163 ms
2025-04-27 22:59:25.984 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" completed keep alive response.
2025-04-27 22:59:25.987 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 101.0198ms
2025-04-27 22:59:26.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-27 22:59:26.394 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-27 22:59:26.395 +07:00 [DBG] Request did not match any endpoints
2025-04-27 22:59:26.511 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 114.8517 ms
2025-04-27 22:59:26.514 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" completed keep alive response.
2025-04-27 22:59:26.515 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 125.226ms
2025-04-27 22:59:41.624 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/555 - null null
2025-04-27 22:59:41.632 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/555'
2025-04-27 22:59:41.639 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/555'
2025-04-27 22:59:41.643 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:41.646 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:59:41.647 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-27 22:59:41.649 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:41.670 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:59:41.675 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:59:41.676 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:59:41.678 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:59:41.680 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:59:41.681 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:59:41.685 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:59:41.743 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-27 22:59:41.759 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:59:41.763 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:59:41.765 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:59:41.769 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:41.770 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:41.772 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:59:41.774 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:42.239 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:59:42.285 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.Status == "Listed")'
2025-04-27 22:59:42.331 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-27 22:59:42.334 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-27 22:59:42.512 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(13) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(13);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<Email>k__BackingField = dataReader.GetString(16);
                                    instance.<FullName>k__BackingField = dataReader.GetString(17);
                                    instance.<Password>k__BackingField = dataReader.GetString(18);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(20);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-27 22:59:42.571 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:59:42.585 +07:00 [DBG] Created DbConnection. (11ms).
2025-04-27 22:59:42.588 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:42.726 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:42.729 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:59:42.735 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-27 22:59:42.741 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-27 22:59:42.747 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:59:42.790 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:59:42.801 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:42.808 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-27 22:59:42.811 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:42.816 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-27 22:59:42.822 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:59:42.825 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:59:42.827 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:59:42.829 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:59:42.830 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:59:42.832 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:59:42.834 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:59:42.867 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 1180.9158ms
2025-04-27 22:59:42.870 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:42.872 +07:00 [INF] HTTP GET /api/Documents/555 responded 404 in 1226.4642 ms
2025-04-27 22:59:42.874 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" completed keep alive response.
2025-04-27 22:59:42.876 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:59:42.880 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:42.883 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-27 22:59:42.886 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/555 - 404 null application/json; charset=utf-8 1261.653ms
2025-04-27 22:59:49.476 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-27 22:59:49.480 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-27 22:59:49.482 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-27 22:59:49.484 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:49.487 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:59:49.489 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:49.492 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:59:49.494 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:59:49.496 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:59:49.497 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:59:49.500 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:59:49.503 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:59:49.504 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:59:49.507 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:59:49.508 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:59:49.509 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:59:49.510 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:49.510 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:49.511 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:59:49.512 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:49.525 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:59:49.530 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:59:49.533 +07:00 [DBG] Created DbConnection. (2ms).
2025-04-27 22:59:49.534 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:49.537 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:49.539 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:59:49.541 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:59:49.542 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-27 22:59:49.543 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:59:49.551 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:59:49.578 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:59:49.619 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:59:49.623 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:59:49.630 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:59:49.636 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:59:49.643 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:49.644 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 90ms reading results.
2025-04-27 22:59:49.646 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:49.647 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:59:49.651 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:59:49.654 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:59:49.657 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:59:49.658 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:59:49.659 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:59:49.660 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:59:49.661 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-27 22:59:49.675 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 171.2405ms
2025-04-27 22:59:49.678 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:49.680 +07:00 [INF] HTTP GET /api/Documents/8 responded 200 in 192.5140 ms
2025-04-27 22:59:49.682 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" completed keep alive response.
2025-04-27 22:59:49.684 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:59:49.685 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:49.686 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 22:59:49.689 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 212.566ms
2025-04-27 22:59:53.592 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/9 - null null
2025-04-27 22:59:53.596 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/9'
2025-04-27 22:59:53.599 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/9'
2025-04-27 22:59:53.603 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:53.605 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:59:53.605 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:53.607 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:59:53.610 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:59:53.611 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:59:53.613 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:59:53.615 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:59:53.617 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:59:53.619 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:59:53.624 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:59:53.625 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 22:59:53.626 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 22:59:53.627 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:53.627 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:53.628 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 22:59:53.629 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 22:59:53.674 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:59:53.678 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:59:53.679 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 22:59:53.680 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:53.682 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:53.685 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:59:53.686 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 22:59:53.687 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-27 22:59:53.688 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:59:53.691 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 22:59:53.692 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:53.693 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-04-27 22:59:53.694 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:53.696 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:59:53.697 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:59:53.699 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 22:59:53.701 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 22:59:53.703 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:59:53.704 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:59:53.705 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:59:53.706 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 22:59:53.707 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 88.2649ms
2025-04-27 22:59:53.708 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 22:59:53.709 +07:00 [INF] HTTP GET /api/Documents/9 responded 404 in 104.1708 ms
2025-04-27 22:59:53.710 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" completed keep alive response.
2025-04-27 22:59:53.711 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:59:53.711 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:59:53.713 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 22:59:53.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/9 - 404 null application/json; charset=utf-8 121.8073ms
2025-04-27 23:00:06.843 +07:00 [INF] Application is shutting down...
2025-04-27 23:00:06.845 +07:00 [DBG] Hosting stopping
2025-04-27 23:00:06.851 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" disconnecting.
2025-04-27 23:00:06.851 +07:00 [DBG] Connection id "0HNC5KHU0I3T3" disconnecting.
2025-04-27 23:00:06.853 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" stopped.
2025-04-27 23:00:06.854 +07:00 [DBG] Connection id "0HNC5KHU0I3T3" stopped.
2025-04-27 23:00:06.857 +07:00 [DBG] Connection id "0HNC5KHU0I3T2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 23:00:06.857 +07:00 [DBG] Connection id "0HNC5KHU0I3T3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 23:00:06.863 +07:00 [DBG] Hosting stopped
2025-04-27 23:02:11.245 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-27 23:02:11.338 +07:00 [DBG] Hosting starting
2025-04-27 23:02:11.386 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-27 23:02:11.388 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-27 23:02:11.391 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-27 23:02:11.392 +07:00 [INF] Hosting environment: Development
2025-04-27 23:02:11.393 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-27 23:02:11.393 +07:00 [DBG] Hosting started
2025-04-27 23:02:14.705 +07:00 [DBG] Connection id "0HNC5KJGAQ3CT" accepted.
2025-04-27 23:02:14.708 +07:00 [DBG] Connection id "0HNC5KJGAQ3CT" started.
2025-04-27 23:02:14.712 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" accepted.
2025-04-27 23:02:14.714 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" started.
2025-04-27 23:02:14.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 23:02:14.744 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-27 23:02:14.758 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 23:02:14.760 +07:00 [DBG] Request did not match any endpoints
2025-04-27 23:02:14.840 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 73.1010 ms
2025-04-27 23:02:14.846 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" completed keep alive response.
2025-04-27 23:02:14.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 112.8165ms
2025-04-27 23:02:15.287 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-27 23:02:15.297 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-27 23:02:15.299 +07:00 [DBG] Request did not match any endpoints
2025-04-27 23:02:15.449 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 147.4516 ms
2025-04-27 23:02:15.451 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" completed keep alive response.
2025-04-27 23:02:15.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.0666ms
2025-04-27 23:02:22.113 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/8 - null null
2025-04-27 23:02:22.120 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/8'
2025-04-27 23:02:22.126 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/8'
2025-04-27 23:02:22.131 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 23:02:22.135 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 23:02:22.136 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-27 23:02:22.137 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 23:02:22.159 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 23:02:22.165 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 23:02:22.168 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 23:02:22.171 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 23:02:22.172 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 23:02:22.174 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 23:02:22.176 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 23:02:22.238 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-27 23:02:22.253 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 23:02:22.257 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 23:02:22.259 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 23:02:22.261 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 23:02:22.264 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 23:02:22.266 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 23:02:22.269 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 23:02:22.708 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 23:02:22.754 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.Status == "Listed")'
2025-04-27 23:02:22.800 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-27 23:02:22.803 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-27 23:02:22.978 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(13) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(13);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<Email>k__BackingField = dataReader.GetString(16);
                                    instance.<FullName>k__BackingField = dataReader.GetString(17);
                                    instance.<Password>k__BackingField = dataReader.GetString(18);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(20);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-27 23:02:23.037 +07:00 [DBG] Creating DbConnection.
2025-04-27 23:02:23.050 +07:00 [DBG] Created DbConnection. (12ms).
2025-04-27 23:02:23.053 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 23:02:23.185 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 23:02:23.189 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 23:02:23.193 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-27 23:02:23.199 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-04-27 23:02:23.205 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 23:02:23.246 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 23:02:23.277 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 23:02:23.311 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 23:02:23.316 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 23:02:23.324 +07:00 [DBG] The navigation 'Document.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 23:02:23.328 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 23:02:23.339 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 23:02:23.345 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 90ms reading results.
2025-04-27 23:02:23.350 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 23:02:23.355 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-27 23:02:23.359 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 23:02:23.363 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 23:02:23.366 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 23:02:23.368 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 23:02:23.369 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 23:02:23.370 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 23:02:23.371 +07:00 [INF] Executing OkObjectResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto'.
2025-04-27 23:02:23.404 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 1226.3753ms
2025-04-27 23:02:23.406 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 23:02:23.408 +07:00 [INF] HTTP GET /api/Documents/8 responded 200 in 1273.2267 ms
2025-04-27 23:02:23.409 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" completed keep alive response.
2025-04-27 23:02:23.413 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 23:02:23.417 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 23:02:23.420 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-27 23:02:23.421 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/8 - 200 null application/json; charset=utf-8 1307.8466ms
2025-04-27 23:02:44.484 +07:00 [INF] Application is shutting down...
2025-04-27 23:02:44.485 +07:00 [DBG] Hosting stopping
2025-04-27 23:02:44.491 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" disconnecting.
2025-04-27 23:02:44.491 +07:00 [DBG] Connection id "0HNC5KJGAQ3CT" disconnecting.
2025-04-27 23:02:44.492 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" stopped.
2025-04-27 23:02:44.493 +07:00 [DBG] Connection id "0HNC5KJGAQ3CT" stopped.
2025-04-27 23:02:44.495 +07:00 [DBG] Connection id "0HNC5KJGAQ3CT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 23:02:44.495 +07:00 [DBG] Connection id "0HNC5KJGAQ3CU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 23:02:44.499 +07:00 [DBG] Hosting stopped
