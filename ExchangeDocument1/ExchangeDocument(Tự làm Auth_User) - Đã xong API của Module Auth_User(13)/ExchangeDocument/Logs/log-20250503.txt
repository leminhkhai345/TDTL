2025-05-03 00:56:38.252 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 00:56:38.353 +07:00 [DBG] Hosting starting
2025-05-03 00:56:38.430 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 00:56:38.434 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 00:56:38.436 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 00:56:38.437 +07:00 [INF] Hosting environment: Development
2025-05-03 00:56:38.437 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 00:56:38.439 +07:00 [DBG] Hosting started
2025-05-03 00:57:24.665 +07:00 [DBG] Connection id "0HNC9KB5MC2U2" accepted.
2025-05-03 00:57:24.668 +07:00 [DBG] Connection id "0HNC9KB5MC2U2" started.
2025-05-03 00:57:24.669 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" accepted.
2025-05-03 00:57:24.673 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" started.
2025-05-03 00:57:24.707 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 00:57:24.712 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 00:57:24.727 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 00:57:24.729 +07:00 [DBG] Request did not match any endpoints
2025-05-03 00:57:24.807 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 71.0612 ms
2025-05-03 00:57:24.811 +07:00 [DBG] Connection id "0HNC9KB5MC2U2" completed keep alive response.
2025-05-03 00:57:24.816 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 109.3325ms
2025-05-03 00:57:24.842 +07:00 [DBG] Connection id "0HNC9KB5MC2U4" accepted.
2025-05-03 00:57:24.844 +07:00 [DBG] Connection id "0HNC9KB5MC2U4" started.
2025-05-03 00:57:24.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/swagger-ui-bundle.js - null null
2025-05-03 00:57:24.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/swagger-ui.css - null null
2025-05-03 00:57:24.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/swagger-ui-standalone-preset.js - null null
2025-05-03 00:57:24.850 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-05-03 00:57:24.853 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-05-03 00:57:24.856 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-05-03 00:57:24.858 +07:00 [DBG] Request did not match any endpoints
2025-05-03 00:57:24.859 +07:00 [DBG] Request did not match any endpoints
2025-05-03 00:57:24.861 +07:00 [DBG] Request did not match any endpoints
2025-05-03 00:57:24.888 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-03 00:57:24.888 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-03 00:57:24.893 +07:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 30.0886 ms
2025-05-03 00:57:24.893 +07:00 [INF] HTTP GET /swagger/swagger-ui-standalone-preset.js responded 200 in 26.9066 ms
2025-05-03 00:57:24.897 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-03 00:57:24.902 +07:00 [DBG] Connection id "0HNC9KB5MC2U2" completed keep alive response.
2025-05-03 00:57:24.903 +07:00 [DBG] Connection id "0HNC9KB5MC2U4" completed keep alive response.
2025-05-03 00:57:24.904 +07:00 [INF] HTTP GET /swagger/swagger-ui-bundle.js responded 200 in 41.2691 ms
2025-05-03 00:57:24.905 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/swagger-ui.css - 200 152034 text/css 60.3604ms
2025-05-03 00:57:24.906 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 59.1925ms
2025-05-03 00:57:24.907 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" completed keep alive response.
2025-05-03 00:57:24.917 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 72.6185ms
2025-05-03 00:57:25.708 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 00:57:25.713 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 00:57:25.715 +07:00 [DBG] Request did not match any endpoints
2025-05-03 00:57:25.760 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/favicon-32x32.png - null null
2025-05-03 00:57:25.765 +07:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-05-03 00:57:25.767 +07:00 [DBG] Request did not match any endpoints
2025-05-03 00:57:25.769 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-03 00:57:25.771 +07:00 [INF] HTTP GET /swagger/favicon-32x32.png responded 200 in 2.4820 ms
2025-05-03 00:57:25.774 +07:00 [DBG] Connection id "0HNC9KB5MC2U4" completed keep alive response.
2025-05-03 00:57:25.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/favicon-32x32.png - 200 628 image/png 14.8413ms
2025-05-03 00:57:25.874 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 156.9402 ms
2025-05-03 00:57:25.875 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" completed keep alive response.
2025-05-03 00:57:25.876 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 168.3647ms
2025-05-03 00:58:10.441 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/register - application/json 131
2025-05-03 00:58:10.449 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-03 00:58:10.457 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-03 00:58:10.462 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 00:58:10.465 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 00:58:10.467 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 00:58:10.469 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 00:58:10.499 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 00:58:10.503 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 00:58:10.504 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 00:58:10.505 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 00:58:10.507 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 00:58:10.510 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 00:58:10.512 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 00:58:10.602 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 00:58:10.620 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 00:58:10.627 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 00:58:10.630 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' using the name '' in request data ...
2025-05-03 00:58:10.633 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 00:58:10.654 +07:00 [DBG] Connection id "0HNC9KB5MC2U3", Request id "0HNC9KB5MC2U3:00000003": started reading request body.
2025-05-03 00:58:10.657 +07:00 [DBG] Connection id "0HNC9KB5MC2U3", Request id "0HNC9KB5MC2U3:00000003": done reading request body.
2025-05-03 00:58:10.671 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'
2025-05-03 00:58:10.674 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 00:58:10.679 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 00:58:10.680 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 00:58:10.685 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 00:58:11.032 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 00:58:11.035 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 00:58:11.132 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 00:58:11.176 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 00:58:11.347 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 00:58:11.386 +07:00 [DBG] Creating DbConnection.
2025-05-03 00:58:11.405 +07:00 [DBG] Created DbConnection. (18ms).
2025-05-03 00:58:11.411 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:11.629 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:11.633 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 00:58:11.638 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-03 00:58:11.645 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-05-03 00:58:11.650 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 00:58:11.697 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 00:58:11.709 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:11.715 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-05-03 00:58:11.718 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:11.723 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 00:58:11.968 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'User.UserId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 00:58:12.012 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 00:58:12.017 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 00:58:12.019 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 00:58:12.032 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 00:58:12.071 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:12.075 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:12.081 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 00:58:12.082 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 00:58:12.083 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 00:58:12.085 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (Size = 255), @p5='?' (Size = 4000), @p6='?' (Size = 20), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([CreatedAt], [email], [fullName], [IsEmailVerified], [password], [PasswordResetToken], [phone], [ResetTokenExpires], [UpdatedAt])
OUTPUT INSERTED.[userId], INSERTED.[roleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-03 00:58:12.099 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (Size = 255), @p5='?' (Size = 4000), @p6='?' (Size = 20), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([CreatedAt], [email], [fullName], [IsEmailVerified], [password], [PasswordResetToken], [phone], [ResetTokenExpires], [UpdatedAt])
OUTPUT INSERTED.[userId], INSERTED.[roleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-03 00:58:12.113 +07:00 [DBG] The foreign key property 'User.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 00:58:12.116 +07:00 [DBG] The foreign key property 'User.RoleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 00:58:12.119 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:12.121 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 18ms reading results.
2025-05-03 00:58:12.124 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:12.126 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 00:58:12.135 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 00:58:12.138 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 00:58:12.147 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument) in 1633.5898ms
2025-05-03 00:58:12.149 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 00:58:12.150 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentOutOfRangeException: The relative expiration value must be positive. (Parameter 'AbsoluteExpirationRelativeToNow')
Actual value was 00:00:00.
   at Microsoft.Extensions.Caching.Memory.MemoryCacheEntryOptions.set_AbsoluteExpirationRelativeToNow(Nullable`1 value)
   at Microsoft.Extensions.Caching.Memory.MemoryCacheEntryExtensions.SetAbsoluteExpiration(MemoryCacheEntryOptions options, TimeSpan relative)
   at ExchangeDocument.BusinessLayer.Services.AuthService.RegisterAsync(RegisterRequestDTO request) in D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument\BusinessLayer\Services\AuthService.cs:line 66
   at ExchangeDocument.PresentationLayer.Controllers.AuthController.Register(RegisterRequestDTO request) in D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument\PresentationLayer\Controllers\AuthController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-03 00:58:12.181 +07:00 [ERR] HTTP POST /api/Auth/register responded 500 in 1716.5556 ms
2025-05-03 00:58:12.184 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" completed keep alive response.
2025-05-03 00:58:12.189 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 00:58:12.193 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 00:58:12.198 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-03 00:58:12.199 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/register - 500 null text/plain; charset=utf-8 1758.5195ms
2025-05-03 00:59:36.633 +07:00 [DBG] Connection id "0HNC9KB5MC2U2" disconnecting.
2025-05-03 00:59:36.637 +07:00 [DBG] Connection id "0HNC9KB5MC2U2" stopped.
2025-05-03 00:59:36.639 +07:00 [DBG] Connection id "0HNC9KB5MC2U2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 00:59:37.645 +07:00 [DBG] Connection id "0HNC9KB5MC2U4" disconnecting.
2025-05-03 00:59:37.648 +07:00 [DBG] Connection id "0HNC9KB5MC2U4" stopped.
2025-05-03 00:59:37.649 +07:00 [DBG] Connection id "0HNC9KB5MC2U4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:00:23.922 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" disconnecting.
2025-05-03 01:00:23.928 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" stopped.
2025-05-03 01:00:23.929 +07:00 [DBG] Connection id "0HNC9KB5MC2U3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:09:03.569 +07:00 [INF] Application is shutting down...
2025-05-03 01:09:03.571 +07:00 [DBG] Hosting stopping
2025-05-03 01:09:03.578 +07:00 [DBG] Hosting stopped
2025-05-03 01:09:32.886 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 01:09:32.967 +07:00 [DBG] Hosting starting
2025-05-03 01:09:33.008 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 01:09:33.011 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 01:09:33.012 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 01:09:33.013 +07:00 [INF] Hosting environment: Development
2025-05-03 01:09:33.014 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 01:09:33.014 +07:00 [DBG] Hosting started
2025-05-03 01:09:34.710 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" accepted.
2025-05-03 01:09:34.713 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" started.
2025-05-03 01:09:34.714 +07:00 [DBG] Connection id "0HNC9KHV8K4S8" accepted.
2025-05-03 01:09:34.715 +07:00 [DBG] Connection id "0HNC9KHV8K4S8" started.
2025-05-03 01:09:34.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 01:09:34.751 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 01:09:34.765 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 01:09:34.769 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:09:34.845 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 68.9622 ms
2025-05-03 01:09:34.852 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" completed keep alive response.
2025-05-03 01:09:34.855 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 112.8853ms
2025-05-03 01:09:35.732 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 01:09:35.737 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 01:09:35.739 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:09:35.912 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 171.1807 ms
2025-05-03 01:09:35.914 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" completed keep alive response.
2025-05-03 01:09:35.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 184.162ms
2025-05-03 01:10:08.656 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/register - application/json 131
2025-05-03 01:10:08.663 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-03 01:10:08.671 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-03 01:10:08.674 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:10:08.678 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:10:08.682 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 01:10:08.685 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:10:08.711 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:10:08.718 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:10:08.722 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:10:08.725 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:10:08.727 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:10:08.729 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:10:08.732 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:10:08.801 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 01:10:08.819 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:10:08.824 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:10:08.826 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' using the name '' in request data ...
2025-05-03 01:10:08.828 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:10:08.850 +07:00 [DBG] Connection id "0HNC9KHV8K4S7", Request id "0HNC9KHV8K4S7:00000003": started reading request body.
2025-05-03 01:10:08.854 +07:00 [DBG] Connection id "0HNC9KHV8K4S7", Request id "0HNC9KHV8K4S7:00000003": done reading request body.
2025-05-03 01:10:08.866 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'
2025-05-03 01:10:08.868 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:10:08.869 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:10:08.870 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:10:08.877 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:10:09.214 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 01:10:09.218 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 01:10:09.310 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 01:10:09.343 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 01:10:09.508 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 01:10:09.547 +07:00 [DBG] Creating DbConnection.
2025-05-03 01:10:09.563 +07:00 [DBG] Created DbConnection. (14ms).
2025-05-03 01:10:09.569 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:10:09.720 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:10:09.724 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:10:09.729 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-03 01:10:09.737 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-05-03 01:10:09.742 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:10:09.790 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:10:09.821 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:10:09.853 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:10:09.861 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 63ms reading results.
2025-05-03 01:10:09.867 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:10:09.873 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-05-03 01:10:10.104 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument) in 1372.174ms
2025-05-03 01:10:10.107 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:10:10.109 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentOutOfRangeException: The relative expiration value must be positive. (Parameter 'AbsoluteExpirationRelativeToNow')
Actual value was 00:00:00.
   at Microsoft.Extensions.Caching.Memory.MemoryCacheEntryOptions.set_AbsoluteExpirationRelativeToNow(Nullable`1 value)
   at Microsoft.Extensions.Caching.Memory.MemoryCacheEntryExtensions.SetAbsoluteExpiration(MemoryCacheEntryOptions options, TimeSpan relative)
   at ExchangeDocument.BusinessLayer.Services.AuthService.RegisterAsync(RegisterRequestDTO request) in D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument\BusinessLayer\Services\AuthService.cs:line 66
   at ExchangeDocument.PresentationLayer.Controllers.AuthController.Register(RegisterRequestDTO request) in D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument\PresentationLayer\Controllers\AuthController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-03 01:10:10.141 +07:00 [ERR] HTTP POST /api/Auth/register responded 500 in 1463.6104 ms
2025-05-03 01:10:10.144 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" completed keep alive response.
2025-05-03 01:10:10.146 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 01:10:10.151 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:10:10.154 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 01:10:10.156 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/register - 500 null text/plain; charset=utf-8 1499.9644ms
2025-05-03 01:11:45.887 +07:00 [DBG] Connection id "0HNC9KHV8K4S8" disconnecting.
2025-05-03 01:11:45.893 +07:00 [DBG] Connection id "0HNC9KHV8K4S8" stopped.
2025-05-03 01:11:45.895 +07:00 [DBG] Connection id "0HNC9KHV8K4S8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:12:21.098 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" disconnecting.
2025-05-03 01:12:21.103 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" stopped.
2025-05-03 01:12:21.105 +07:00 [DBG] Connection id "0HNC9KHV8K4S7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:12:43.561 +07:00 [INF] Application is shutting down...
2025-05-03 01:12:43.562 +07:00 [DBG] Hosting stopping
2025-05-03 01:12:43.568 +07:00 [DBG] Hosting stopped
2025-05-03 01:12:49.339 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 01:12:49.439 +07:00 [DBG] Hosting starting
2025-05-03 01:12:49.498 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 01:12:49.500 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 01:12:49.502 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 01:12:49.503 +07:00 [INF] Hosting environment: Development
2025-05-03 01:12:49.504 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 01:12:49.506 +07:00 [DBG] Hosting started
2025-05-03 01:12:55.473 +07:00 [DBG] Connection id "0HNC9KJR38732" accepted.
2025-05-03 01:12:55.477 +07:00 [DBG] Connection id "0HNC9KJR38732" started.
2025-05-03 01:12:55.477 +07:00 [DBG] Connection id "0HNC9KJR38733" accepted.
2025-05-03 01:12:55.480 +07:00 [DBG] Connection id "0HNC9KJR38733" started.
2025-05-03 01:12:55.506 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 01:12:55.514 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 01:12:55.527 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 01:12:55.530 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:12:55.604 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 66.6216 ms
2025-05-03 01:12:55.613 +07:00 [DBG] Connection id "0HNC9KJR38732" completed keep alive response.
2025-05-03 01:12:55.618 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 112.4144ms
2025-05-03 01:12:56.034 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 01:12:56.041 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 01:12:56.044 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:12:56.182 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 134.3278 ms
2025-05-03 01:12:56.191 +07:00 [DBG] Connection id "0HNC9KJR38732" completed keep alive response.
2025-05-03 01:12:56.193 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 158.4353ms
2025-05-03 01:13:06.021 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/register - application/json 131
2025-05-03 01:13:06.030 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-03 01:13:06.038 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-03 01:13:06.042 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:13:06.049 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:13:06.052 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 01:13:06.054 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:13:06.078 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:13:06.084 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:13:06.085 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:13:06.089 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:13:06.091 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:13:06.094 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:13:06.097 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:13:06.159 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 01:13:06.178 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:13:06.183 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:13:06.186 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' using the name '' in request data ...
2025-05-03 01:13:06.188 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:13:06.212 +07:00 [DBG] Connection id "0HNC9KJR38732", Request id "0HNC9KJR38732:00000003": started reading request body.
2025-05-03 01:13:06.213 +07:00 [DBG] Connection id "0HNC9KJR38732", Request id "0HNC9KJR38732:00000003": done reading request body.
2025-05-03 01:13:06.222 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'
2025-05-03 01:13:06.223 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:13:06.225 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:13:06.229 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:13:06.235 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:13:06.560 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 01:13:06.564 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 01:13:06.662 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 01:13:06.700 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 01:13:06.866 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 01:13:06.910 +07:00 [DBG] Creating DbConnection.
2025-05-03 01:13:06.925 +07:00 [DBG] Created DbConnection. (13ms).
2025-05-03 01:13:06.930 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:13:07.068 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:13:07.073 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:13:07.078 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-03 01:13:07.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-05-03 01:13:07.089 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:13:07.131 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:13:07.157 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:13:07.186 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:13:07.194 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 56ms reading results.
2025-05-03 01:13:07.199 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:13:07.204 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 01:13:07.427 +07:00 [INF] Generated OTP for nguyetnkhuyen@gmail.com
2025-05-03 01:13:10.931 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:13:10.936 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:13:10.937 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:13:10.938 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:13:10.939 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:13:10.941 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:13:10.958 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument) in 4858.9203ms
2025-05-03 01:13:10.960 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:13:10.962 +07:00 [INF] HTTP POST /api/Auth/register responded 200 in 4913.3504 ms
2025-05-03 01:13:10.966 +07:00 [DBG] Connection id "0HNC9KJR38732" completed keep alive response.
2025-05-03 01:13:10.969 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 01:13:10.972 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:13:10.975 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 01:13:10.977 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/register - 200 null application/json; charset=utf-8 4956.2079ms
2025-05-03 01:14:12.211 +07:00 [DBG] Connection id "0HNC9KJR38733" received FIN.
2025-05-03 01:14:12.214 +07:00 [DBG] Connection id "0HNC9KJR38733" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:14:12.216 +07:00 [DBG] Connection id "0HNC9KJR38733" disconnecting.
2025-05-03 01:14:12.218 +07:00 [DBG] Connection id "0HNC9KJR38733" stopped.
2025-05-03 01:15:22.515 +07:00 [DBG] Connection id "0HNC9KJR38732" disconnecting.
2025-05-03 01:15:22.517 +07:00 [DBG] Connection id "0HNC9KJR38732" stopped.
2025-05-03 01:15:22.518 +07:00 [DBG] Connection id "0HNC9KJR38732" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:18:01.597 +07:00 [DBG] Connection id "0HNC9KJR38734" accepted.
2025-05-03 01:18:01.599 +07:00 [DBG] Connection id "0HNC9KJR38734" started.
2025-05-03 01:18:01.601 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 59
2025-05-03 01:18:01.607 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:18:01.610 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:18:01.613 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:18:01.617 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:18:01.619 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:18:01.627 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:18:01.631 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:18:01.633 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:18:01.634 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:18:01.637 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:18:01.641 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:18:01.644 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:18:01.646 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:18:01.647 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:18:01.649 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:18:01.650 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:18:01.652 +07:00 [DBG] Connection id "0HNC9KJR38734", Request id "0HNC9KJR38734:00000001": started reading request body.
2025-05-03 01:18:01.653 +07:00 [DBG] Connection id "0HNC9KJR38734", Request id "0HNC9KJR38734:00000001": done reading request body.
2025-05-03 01:18:01.656 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:18:01.657 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:18:01.659 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:18:01.660 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:18:01.663 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:18:01.676 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 01:18:01.681 +07:00 [DBG] Creating DbConnection.
2025-05-03 01:18:01.682 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 01:18:01.683 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.685 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:18:01.688 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 01:18:01.691 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-03 01:18:01.693 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:18:01.698 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:18:01.701 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:18:01.704 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.706 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-05-03 01:18:01.708 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.710 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-05-03 01:18:01.714 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 01:18:01.716 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 01:18:01.731 +07:00 [DBG] The unchanged property 'User.IsEmailVerified' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 01:18:01.736 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:18:01.744 +07:00 [DBG] The unchanged property 'User.UpdatedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 01:18:01.748 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 01:18:01.783 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.785 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.788 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:18:01.790 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 01:18:01.792 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 01:18:01.793 +07:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [IsEmailVerified] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 01:18:01.799 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [IsEmailVerified] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 01:18:01.806 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.809 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 7ms reading results.
2025-05-03 01:18:01.811 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.813 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 01:18:01.817 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:18:01.820 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 01:18:01.823 +07:00 [INF] User nguyetnkhuyen@gmail.com verified successfully
2025-05-03 01:18:01.824 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:18:01.828 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:18:01.829 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:18:01.829 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:18:01.830 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:18:01.831 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:18:01.833 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 189.6598ms
2025-05-03 01:18:01.835 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:18:01.836 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 200 in 219.0802 ms
2025-05-03 01:18:01.838 +07:00 [DBG] Connection id "0HNC9KJR38734" completed keep alive response.
2025-05-03 01:18:01.840 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 01:18:01.842 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:18:01.843 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 01:18:01.844 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 200 null application/json; charset=utf-8 243.0387ms
2025-05-03 01:20:13.627 +07:00 [DBG] Connection id "0HNC9KJR38734" disconnecting.
2025-05-03 01:20:13.632 +07:00 [DBG] Connection id "0HNC9KJR38734" stopped.
2025-05-03 01:20:13.633 +07:00 [DBG] Connection id "0HNC9KJR38734" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:20:38.633 +07:00 [DBG] Connection id "0HNC9KJR38735" accepted.
2025-05-03 01:20:38.637 +07:00 [DBG] Connection id "0HNC9KJR38735" started.
2025-05-03 01:20:38.637 +07:00 [DBG] Connection id "0HNC9KJR38736" accepted.
2025-05-03 01:20:38.638 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 01:20:38.638 +07:00 [DBG] Connection id "0HNC9KJR38736" started.
2025-05-03 01:20:38.640 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 01:20:38.642 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:20:38.644 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.8009 ms
2025-05-03 01:20:38.646 +07:00 [DBG] Connection id "0HNC9KJR38735" completed keep alive response.
2025-05-03 01:20:38.647 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 9.5002ms
2025-05-03 01:20:39.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 01:20:39.132 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 01:20:39.134 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:20:39.154 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 19.2679 ms
2025-05-03 01:20:39.159 +07:00 [DBG] Connection id "0HNC9KJR38735" completed keep alive response.
2025-05-03 01:20:39.161 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 35.2141ms
2025-05-03 01:21:06.907 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/register - application/json 119
2025-05-03 01:21:06.910 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-03 01:21:06.912 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-03 01:21:06.914 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:21:06.916 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:21:06.917 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:21:06.919 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:21:06.922 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:21:06.925 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:21:06.927 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:21:06.928 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:21:06.931 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:21:06.933 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:21:06.941 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:21:06.943 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:21:06.944 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' using the name '' in request data ...
2025-05-03 01:21:06.945 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:21:06.947 +07:00 [DBG] Connection id "0HNC9KJR38735", Request id "0HNC9KJR38735:00000003": started reading request body.
2025-05-03 01:21:06.949 +07:00 [DBG] Connection id "0HNC9KJR38735", Request id "0HNC9KJR38735:00000003": done reading request body.
2025-05-03 01:21:06.951 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'
2025-05-03 01:21:06.952 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:21:06.954 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:21:06.955 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:21:06.956 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:21:07.000 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 01:21:07.003 +07:00 [DBG] Creating DbConnection.
2025-05-03 01:21:07.003 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 01:21:07.004 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:21:07.005 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:21:07.006 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:21:07.007 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 01:21:07.009 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 01:21:07.010 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:21:07.015 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:21:07.018 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:21:07.020 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:21:07.021 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-05-03 01:21:07.022 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:21:07.023 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 01:21:07.027 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:21:07.029 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:21:07.031 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:21:07.032 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:21:07.033 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:21:07.035 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:21:07.037 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument) in 103.9806ms
2025-05-03 01:21:07.039 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:21:07.040 +07:00 [INF] HTTP POST /api/Auth/register responded 400 in 123.9293 ms
2025-05-03 01:21:07.041 +07:00 [DBG] Connection id "0HNC9KJR38735" completed keep alive response.
2025-05-03 01:21:07.042 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 01:21:07.043 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:21:07.044 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 01:21:07.045 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/register - 400 null application/json; charset=utf-8 138.3916ms
2025-05-03 01:21:29.603 +07:00 [DBG] Connection id "0HNC9KJR38736" received FIN.
2025-05-03 01:21:29.603 +07:00 [DBG] Connection id "0HNC9KJR38735" received FIN.
2025-05-03 01:21:29.607 +07:00 [DBG] Connection id "0HNC9KJR38736" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:21:29.607 +07:00 [DBG] Connection id "0HNC9KJR38735" disconnecting.
2025-05-03 01:21:29.609 +07:00 [DBG] Connection id "0HNC9KJR38736" disconnecting.
2025-05-03 01:21:29.610 +07:00 [DBG] Connection id "0HNC9KJR38735" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:21:29.611 +07:00 [DBG] Connection id "0HNC9KJR38736" stopped.
2025-05-03 01:21:29.625 +07:00 [DBG] Connection id "0HNC9KJR38735" stopped.
2025-05-03 01:22:18.069 +07:00 [DBG] Connection id "0HNC9KJR38737" accepted.
2025-05-03 01:22:18.072 +07:00 [DBG] Connection id "0HNC9KJR38737" started.
2025-05-03 01:22:18.074 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/register - application/json 118
2025-05-03 01:22:18.077 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-03 01:22:18.079 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-03 01:22:18.081 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:22:18.083 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:22:18.085 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:22:18.087 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:22:18.090 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:22:18.096 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:22:18.099 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:22:18.101 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:22:18.103 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:22:18.106 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:22:18.108 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:22:18.110 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:22:18.112 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' using the name '' in request data ...
2025-05-03 01:22:18.114 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:22:18.116 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000001": started reading request body.
2025-05-03 01:22:18.118 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000001": done reading request body.
2025-05-03 01:22:18.120 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'
2025-05-03 01:22:18.122 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:22:18.125 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:22:18.127 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:22:18.128 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:22:18.130 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 01:22:18.132 +07:00 [DBG] Creating DbConnection.
2025-05-03 01:22:18.132 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 01:22:18.133 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.134 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.135 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:22:18.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 01:22:18.138 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 01:22:18.140 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:22:18.144 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:22:18.147 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.148 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-05-03 01:22:18.149 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.150 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 01:22:18.307 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'User.UserId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:22:18.311 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:22:18.313 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 01:22:18.316 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 01:22:18.318 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 01:22:18.332 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.334 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.335 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:22:18.336 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 01:22:18.338 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 01:22:18.341 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (Size = 255), @p5='?' (Size = 4000), @p6='?' (Size = 20), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([CreatedAt], [email], [fullName], [IsEmailVerified], [password], [PasswordResetToken], [phone], [ResetTokenExpires], [UpdatedAt])
OUTPUT INSERTED.[userId], INSERTED.[roleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-03 01:22:18.348 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (Size = 255), @p5='?' (Size = 4000), @p6='?' (Size = 20), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([CreatedAt], [email], [fullName], [IsEmailVerified], [password], [PasswordResetToken], [phone], [ResetTokenExpires], [UpdatedAt])
OUTPUT INSERTED.[userId], INSERTED.[roleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-03 01:22:18.358 +07:00 [DBG] The foreign key property 'User.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 01:22:18.363 +07:00 [DBG] The foreign key property 'User.RoleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 01:22:18.366 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.367 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-05-03 01:22:18.369 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:18.371 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 01:22:18.376 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:22:18.379 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 01:22:18.381 +07:00 [INF] Generated OTP for haminhkhoa17@gmail.com
2025-05-03 01:22:21.138 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:22:21.146 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:22:21.146 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:22:21.147 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:22:21.147 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:22:21.148 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:22:21.150 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument) in 3044.3962ms
2025-05-03 01:22:21.151 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:22:21.152 +07:00 [INF] HTTP POST /api/Auth/register responded 200 in 3069.0521 ms
2025-05-03 01:22:21.154 +07:00 [DBG] Connection id "0HNC9KJR38737" completed keep alive response.
2025-05-03 01:22:21.156 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 01:22:21.157 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:22:21.158 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 01:22:21.159 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/register - 200 null application/json; charset=utf-8 3085.4305ms
2025-05-03 01:23:25.282 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/register - application/json 118
2025-05-03 01:23:25.286 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-03 01:23:25.287 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-03 01:23:25.290 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:23:25.292 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:23:25.293 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:23:25.294 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:23:25.298 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:23:25.301 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:23:25.305 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:23:25.309 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:23:25.312 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:23:25.316 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:23:25.320 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:23:25.321 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:23:25.323 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' using the name '' in request data ...
2025-05-03 01:23:25.324 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:23:25.326 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000002": started reading request body.
2025-05-03 01:23:25.327 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000002": done reading request body.
2025-05-03 01:23:25.328 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'
2025-05-03 01:23:25.331 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:23:25.333 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:23:25.334 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO' ...
2025-05-03 01:23:25.335 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.RegisterRequestDTO'.
2025-05-03 01:23:25.337 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 01:23:25.338 +07:00 [DBG] Creating DbConnection.
2025-05-03 01:23:25.339 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 01:23:25.340 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:23:25.340 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:23:25.341 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:23:25.342 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 01:23:25.343 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 01:23:25.343 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:23:25.348 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:23:25.350 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:23:25.351 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:23:25.352 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-05-03 01:23:25.353 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:23:25.354 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 01:23:25.496 +07:00 [INF] Generated OTP for haminhkhoa17@gmail.com
2025-05-03 01:23:28.536 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:23:28.539 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:23:28.540 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:23:28.541 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:23:28.544 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:23:28.546 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:23:28.548 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument) in 3232.6471ms
2025-05-03 01:23:28.551 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Register (ExchangeDocument)'
2025-05-03 01:23:28.553 +07:00 [INF] HTTP POST /api/Auth/register responded 200 in 3260.6334 ms
2025-05-03 01:23:28.554 +07:00 [DBG] Connection id "0HNC9KJR38737" completed keep alive response.
2025-05-03 01:23:28.555 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 01:23:28.557 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:23:28.558 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 01:23:28.560 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/register - 200 null application/json; charset=utf-8 3278.4351ms
2025-05-03 01:23:40.006 +07:00 [DBG] Connection id "0HNC9KJR38738" accepted.
2025-05-03 01:23:40.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 01:23:40.009 +07:00 [DBG] Connection id "0HNC9KJR38738" started.
2025-05-03 01:23:40.012 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 01:23:40.014 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:23:40.015 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.4624 ms
2025-05-03 01:23:40.017 +07:00 [DBG] Connection id "0HNC9KJR38737" completed keep alive response.
2025-05-03 01:23:40.018 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 11.898ms
2025-05-03 01:23:40.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 01:23:40.458 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 01:23:40.460 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:23:40.475 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 13.7049 ms
2025-05-03 01:23:40.478 +07:00 [DBG] Connection id "0HNC9KJR38737" completed keep alive response.
2025-05-03 01:23:40.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.9036ms
2025-05-03 01:24:54.890 +07:00 [DBG] Connection id "0HNC9KJR38738" received FIN.
2025-05-03 01:24:54.891 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 58
2025-05-03 01:24:54.891 +07:00 [DBG] Connection id "0HNC9KJR38738" disconnecting.
2025-05-03 01:24:54.896 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:24:54.897 +07:00 [DBG] Connection id "0HNC9KJR38738" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:24:54.899 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:24:54.905 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:24:54.907 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:24:54.910 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:24:54.913 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:24:54.916 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:24:54.917 +07:00 [DBG] Connection id "0HNC9KJR38738" stopped.
2025-05-03 01:24:54.918 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:24:54.921 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:24:54.923 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:24:54.924 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:24:54.925 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:24:54.928 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:24:54.929 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:24:54.930 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:24:54.932 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:24:54.933 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000005": started reading request body.
2025-05-03 01:24:54.936 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000005": done reading request body.
2025-05-03 01:24:54.937 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:24:54.938 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:24:54.939 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:24:54.940 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:24:54.942 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:24:54.943 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:24:54.945 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:24:54.946 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:24:54.946 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:24:54.947 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:24:54.948 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:24:54.949 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 23.5178ms
2025-05-03 01:24:54.950 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:24:54.952 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 400 in 45.7496 ms
2025-05-03 01:24:54.954 +07:00 [DBG] Connection id "0HNC9KJR38737" completed keep alive response.
2025-05-03 01:24:54.955 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 400 null application/json; charset=utf-8 64.1063ms
2025-05-03 01:25:35.956 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 58
2025-05-03 01:25:35.960 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:25:35.962 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:25:35.966 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:25:35.967 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:25:35.968 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:25:35.969 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:25:35.972 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:25:35.974 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:25:35.975 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:25:35.976 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:25:35.978 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:25:35.980 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:25:35.982 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:25:35.983 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:25:35.985 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:25:35.988 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:25:35.989 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000006": started reading request body.
2025-05-03 01:25:35.990 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000006": done reading request body.
2025-05-03 01:25:35.992 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:25:35.993 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:25:35.994 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:25:35.996 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:25:35.998 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:25:36.001 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:25:36.003 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:25:36.004 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:25:36.005 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:25:36.005 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:25:36.006 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:25:36.007 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 27.2474ms
2025-05-03 01:25:36.009 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:25:36.010 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 400 in 42.6362 ms
2025-05-03 01:25:36.012 +07:00 [DBG] Connection id "0HNC9KJR38737" completed keep alive response.
2025-05-03 01:25:36.014 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 400 null application/json; charset=utf-8 57.7341ms
2025-05-03 01:25:58.413 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 58
2025-05-03 01:25:58.416 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:25:58.417 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:25:58.420 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:25:58.421 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:25:58.423 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:25:58.424 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:25:58.428 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:25:58.432 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:25:58.435 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:25:58.439 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:25:58.440 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:25:58.442 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:25:58.445 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:25:58.447 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:25:58.449 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:25:58.451 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:25:58.452 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000007": started reading request body.
2025-05-03 01:25:58.453 +07:00 [DBG] Connection id "0HNC9KJR38737", Request id "0HNC9KJR38737:00000007": done reading request body.
2025-05-03 01:25:58.454 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:25:58.455 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:25:58.456 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:25:58.459 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:25:58.461 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:25:58.464 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 01:25:58.466 +07:00 [DBG] Creating DbConnection.
2025-05-03 01:25:58.467 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 01:25:58.468 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.469 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.470 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:25:58.471 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 01:25:58.472 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 01:25:58.473 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:25:58.478 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 01:25:58.481 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:25:58.482 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.483 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-05-03 01:25:58.484 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.485 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 01:25:58.486 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 01:25:58.487 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 01:25:58.488 +07:00 [DBG] The unchanged property 'User.IsEmailVerified' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 01:25:58.489 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:25:58.490 +07:00 [DBG] The unchanged property 'User.UpdatedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 01:25:58.491 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 01:25:58.493 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.495 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.496 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 01:25:58.497 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 01:25:58.498 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 01:25:58.499 +07:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [IsEmailVerified] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 01:25:58.505 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [IsEmailVerified] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 01:25:58.507 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.508 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-05-03 01:25:58.510 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.512 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 01:25:58.513 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 01:25:58.515 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 01:25:58.516 +07:00 [INF] User haminhkhoa17@gmail.com verified successfully
2025-05-03 01:25:58.517 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:25:58.519 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:25:58.519 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:25:58.520 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:25:58.521 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:25:58.522 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:25:58.523 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 80.8759ms
2025-05-03 01:25:58.524 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:25:58.525 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 200 in 103.9847 ms
2025-05-03 01:25:58.528 +07:00 [DBG] Connection id "0HNC9KJR38737" completed keep alive response.
2025-05-03 01:25:58.529 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 01:25:58.530 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 01:25:58.531 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 01:25:58.532 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 200 null application/json; charset=utf-8 119.5344ms
2025-05-03 01:28:09.706 +07:00 [DBG] Connection id "0HNC9KJR38737" disconnecting.
2025-05-03 01:28:09.714 +07:00 [DBG] Connection id "0HNC9KJR38737" stopped.
2025-05-03 01:28:09.717 +07:00 [DBG] Connection id "0HNC9KJR38737" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:29:23.231 +07:00 [DBG] Connection id "0HNC9KJR38739" accepted.
2025-05-03 01:29:23.235 +07:00 [DBG] Connection id "0HNC9KJR38739" started.
2025-05-03 01:29:23.235 +07:00 [DBG] Connection id "0HNC9KJR3873A" accepted.
2025-05-03 01:29:23.236 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 01:29:23.237 +07:00 [DBG] Connection id "0HNC9KJR3873A" started.
2025-05-03 01:29:23.239 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 01:29:23.241 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:29:23.242 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.4791 ms
2025-05-03 01:29:23.244 +07:00 [DBG] Connection id "0HNC9KJR38739" completed keep alive response.
2025-05-03 01:29:23.245 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 8.9316ms
2025-05-03 01:29:23.689 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 01:29:23.692 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 01:29:23.694 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:29:23.707 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 12.6058 ms
2025-05-03 01:29:23.712 +07:00 [DBG] Connection id "0HNC9KJR38739" completed keep alive response.
2025-05-03 01:29:23.713 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.0252ms
2025-05-03 01:30:19.728 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 52
2025-05-03 01:30:19.731 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:30:19.733 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:30:19.736 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:30:19.738 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:30:19.741 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:30:19.747 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:30:19.751 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:30:19.754 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:30:19.757 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:30:19.761 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:30:19.765 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:30:19.768 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:30:19.770 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:30:19.771 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:30:19.772 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:30:19.775 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:30:19.776 +07:00 [DBG] Connection id "0HNC9KJR38739", Request id "0HNC9KJR38739:00000003": started reading request body.
2025-05-03 01:30:19.779 +07:00 [DBG] Connection id "0HNC9KJR38739", Request id "0HNC9KJR38739:00000003": done reading request body.
2025-05-03 01:30:19.782 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:30:19.783 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:30:19.784 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:30:19.785 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:30:19.786 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:30:19.787 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:30:19.789 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:30:19.789 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:30:19.790 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:30:19.790 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:30:19.792 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:30:19.795 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 26.868ms
2025-05-03 01:30:19.797 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:30:19.798 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 400 in 59.8775 ms
2025-05-03 01:30:19.799 +07:00 [DBG] Connection id "0HNC9KJR38739" completed keep alive response.
2025-05-03 01:30:19.800 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 400 null application/json; charset=utf-8 72.4839ms
2025-05-03 01:30:37.752 +07:00 [DBG] Connection id "0HNC9KJR3873A" received FIN.
2025-05-03 01:30:37.753 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 58
2025-05-03 01:30:37.754 +07:00 [DBG] Connection id "0HNC9KJR3873A" disconnecting.
2025-05-03 01:30:37.758 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:30:37.759 +07:00 [DBG] Connection id "0HNC9KJR3873A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:30:37.760 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:30:37.763 +07:00 [DBG] Connection id "0HNC9KJR3873A" stopped.
2025-05-03 01:30:37.767 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:30:37.772 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:30:37.773 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:30:37.781 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:30:37.785 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:30:37.786 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:30:37.787 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:30:37.793 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:30:37.797 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:30:37.799 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:30:37.800 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:30:37.801 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:30:37.802 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:30:37.804 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:30:37.805 +07:00 [DBG] Connection id "0HNC9KJR38739", Request id "0HNC9KJR38739:00000004": started reading request body.
2025-05-03 01:30:37.807 +07:00 [DBG] Connection id "0HNC9KJR38739", Request id "0HNC9KJR38739:00000004": done reading request body.
2025-05-03 01:30:37.809 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:30:37.810 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:30:37.811 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:30:37.812 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:30:37.813 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:30:37.814 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:30:37.816 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:30:37.817 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:30:37.817 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:30:37.818 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:30:37.819 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:30:37.820 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 21.2037ms
2025-05-03 01:30:37.821 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:30:37.822 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 400 in 50.3751 ms
2025-05-03 01:30:37.825 +07:00 [DBG] Connection id "0HNC9KJR38739" completed keep alive response.
2025-05-03 01:30:37.826 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 400 null application/json; charset=utf-8 73.4406ms
2025-05-03 01:31:12.469 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 58
2025-05-03 01:31:12.473 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:31:12.474 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:31:12.476 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:31:12.477 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:31:12.479 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:31:12.481 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:31:12.487 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:31:12.490 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:31:12.493 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:31:12.496 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:31:12.497 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:31:12.500 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:31:12.505 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:31:12.508 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:31:12.510 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:31:12.512 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:31:12.514 +07:00 [DBG] Connection id "0HNC9KJR38739", Request id "0HNC9KJR38739:00000005": started reading request body.
2025-05-03 01:31:12.516 +07:00 [DBG] Connection id "0HNC9KJR38739", Request id "0HNC9KJR38739:00000005": done reading request body.
2025-05-03 01:31:12.517 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:31:12.519 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:31:12.521 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:31:12.523 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:31:12.525 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:31:12.527 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:31:12.528 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:31:12.529 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:31:12.530 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:31:12.531 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:31:12.532 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:31:12.533 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 32.4505ms
2025-05-03 01:31:12.534 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:31:12.536 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 400 in 58.9788 ms
2025-05-03 01:31:12.538 +07:00 [DBG] Connection id "0HNC9KJR38739" completed keep alive response.
2025-05-03 01:31:12.539 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 400 null application/json; charset=utf-8 69.7292ms
2025-05-03 01:33:23.730 +07:00 [DBG] Connection id "0HNC9KJR38739" disconnecting.
2025-05-03 01:33:23.737 +07:00 [DBG] Connection id "0HNC9KJR38739" stopped.
2025-05-03 01:33:23.740 +07:00 [DBG] Connection id "0HNC9KJR38739" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:56:59.743 +07:00 [INF] Application is shutting down...
2025-05-03 01:56:59.745 +07:00 [DBG] Hosting stopping
2025-05-03 01:56:59.752 +07:00 [DBG] Hosting stopped
2025-05-03 01:57:04.195 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 01:57:04.289 +07:00 [DBG] Hosting starting
2025-05-03 01:57:04.359 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 01:57:04.362 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 01:57:04.364 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 01:57:04.366 +07:00 [INF] Hosting environment: Development
2025-05-03 01:57:04.370 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 01:57:04.372 +07:00 [DBG] Hosting started
2025-05-03 01:57:08.775 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" accepted.
2025-05-03 01:57:08.779 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" started.
2025-05-03 01:57:08.779 +07:00 [DBG] Connection id "0HNC9LCHR3HTK" accepted.
2025-05-03 01:57:08.781 +07:00 [DBG] Connection id "0HNC9LCHR3HTK" started.
2025-05-03 01:57:08.805 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 01:57:08.813 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 01:57:08.826 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 01:57:08.828 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:57:08.898 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 65.3690 ms
2025-05-03 01:57:08.905 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" completed keep alive response.
2025-05-03 01:57:08.909 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 104.7143ms
2025-05-03 01:57:09.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 01:57:09.327 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 01:57:09.330 +07:00 [DBG] Request did not match any endpoints
2025-05-03 01:57:09.475 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 143.1296 ms
2025-05-03 01:57:09.479 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" completed keep alive response.
2025-05-03 01:57:09.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 158.3182ms
2025-05-03 01:57:24.411 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 58
2025-05-03 01:57:24.420 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 01:57:24.428 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 01:57:24.433 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:57:24.439 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 01:57:24.440 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 01:57:24.441 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:57:24.463 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 01:57:24.471 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 01:57:24.473 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 01:57:24.475 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 01:57:24.477 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 01:57:24.478 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 01:57:24.481 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:57:24.541 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 01:57:24.562 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 01:57:24.567 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:57:24.571 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 01:57:24.576 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 01:57:24.597 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ", Request id "0HNC9LCHR3HTJ:00000003": started reading request body.
2025-05-03 01:57:24.598 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ", Request id "0HNC9LCHR3HTJ:00000003": done reading request body.
2025-05-03 01:57:24.609 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 01:57:24.610 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:57:24.612 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:57:24.614 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 01:57:24.622 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 01:57:24.628 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 01:57:24.631 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 01:57:24.633 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 01:57:24.635 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 01:57:24.638 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 01:57:24.640 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 01:57:24.658 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 175.7619ms
2025-05-03 01:57:24.660 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 01:57:24.662 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 400 in 224.1873 ms
2025-05-03 01:57:24.664 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" completed keep alive response.
2025-05-03 01:57:24.668 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 400 null application/json; charset=utf-8 257.0254ms
2025-05-03 01:59:12.222 +07:00 [DBG] Connection id "0HNC9LCHR3HTK" received FIN.
2025-05-03 01:59:12.225 +07:00 [DBG] Connection id "0HNC9LCHR3HTK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 01:59:12.227 +07:00 [DBG] Connection id "0HNC9LCHR3HTK" disconnecting.
2025-05-03 01:59:12.229 +07:00 [DBG] Connection id "0HNC9LCHR3HTK" stopped.
2025-05-03 01:59:36.499 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" disconnecting.
2025-05-03 01:59:36.501 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" stopped.
2025-05-03 01:59:36.502 +07:00 [DBG] Connection id "0HNC9LCHR3HTJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 02:11:43.430 +07:00 [INF] Application is shutting down...
2025-05-03 02:11:43.432 +07:00 [DBG] Hosting stopping
2025-05-03 02:11:43.440 +07:00 [DBG] Hosting stopped
2025-05-03 02:11:51.781 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 02:11:51.858 +07:00 [DBG] Hosting starting
2025-05-03 02:11:51.905 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 02:11:51.907 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 02:11:51.911 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 02:11:51.912 +07:00 [INF] Hosting environment: Development
2025-05-03 02:11:51.913 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 02:11:51.914 +07:00 [DBG] Hosting started
2025-05-03 02:11:56.889 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" accepted.
2025-05-03 02:11:56.894 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" started.
2025-05-03 02:11:56.894 +07:00 [DBG] Connection id "0HNC9LKQGQMG6" accepted.
2025-05-03 02:11:56.897 +07:00 [DBG] Connection id "0HNC9LKQGQMG6" started.
2025-05-03 02:11:56.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 02:11:56.929 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 02:11:56.942 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 02:11:56.946 +07:00 [DBG] Request did not match any endpoints
2025-05-03 02:11:57.017 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 66.4428 ms
2025-05-03 02:11:57.024 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" completed keep alive response.
2025-05-03 02:11:57.030 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 111.2779ms
2025-05-03 02:11:57.492 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 02:11:57.497 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 02:11:57.500 +07:00 [DBG] Request did not match any endpoints
2025-05-03 02:11:57.657 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 154.5937 ms
2025-05-03 02:11:57.660 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" completed keep alive response.
2025-05-03 02:11:57.661 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 169.2969ms
2025-05-03 02:12:15.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 02:12:15.969 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 02:12:15.970 +07:00 [DBG] Request did not match any endpoints
2025-05-03 02:12:15.973 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.7807 ms
2025-05-03 02:12:15.974 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" completed keep alive response.
2025-05-03 02:12:15.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 11.0422ms
2025-05-03 02:12:16.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 02:12:16.129 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 02:12:16.130 +07:00 [DBG] Request did not match any endpoints
2025-05-03 02:12:16.146 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 14.7664 ms
2025-05-03 02:12:16.148 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" completed keep alive response.
2025-05-03 02:12:16.152 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.9853ms
2025-05-03 02:12:35.884 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - application/json 58
2025-05-03 02:12:35.891 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/verify-otp'
2025-05-03 02:12:35.899 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)' with route pattern 'api/Auth/verify-otp' is valid for the request path '/api/Auth/verify-otp'
2025-05-03 02:12:35.904 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 02:12:35.909 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 02:12:35.910 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 02:12:35.911 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 02:12:35.934 +07:00 [INF] Route matched with {action = "VerifyOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOtp(ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 02:12:35.941 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 02:12:35.943 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 02:12:35.946 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 02:12:35.948 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 02:12:35.951 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 02:12:35.955 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 02:12:36.015 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 02:12:36.032 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 02:12:36.037 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 02:12:36.042 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' using the name '' in request data ...
2025-05-03 02:12:36.045 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 02:12:36.065 +07:00 [DBG] Connection id "0HNC9LKQGQMG5", Request id "0HNC9LKQGQMG5:00000005": started reading request body.
2025-05-03 02:12:36.067 +07:00 [DBG] Connection id "0HNC9LKQGQMG5", Request id "0HNC9LKQGQMG5:00000005": done reading request body.
2025-05-03 02:12:36.077 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'
2025-05-03 02:12:36.079 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 02:12:36.081 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 02:12:36.082 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO' ...
2025-05-03 02:12:36.090 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.VerifyOtpRequestDTO'.
2025-05-03 02:12:36.452 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 02:12:36.454 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 02:12:36.558 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 02:12:36.592 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 02:12:36.764 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 02:12:36.804 +07:00 [DBG] Creating DbConnection.
2025-05-03 02:12:36.819 +07:00 [DBG] Created DbConnection. (11ms).
2025-05-03 02:12:36.823 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 02:12:36.934 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 02:12:36.937 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 02:12:36.942 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 02:12:36.947 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-05-03 02:12:36.954 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 02:12:36.996 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-03 02:12:37.021 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 02:12:37.050 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 02:12:37.058 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 55ms reading results.
2025-05-03 02:12:37.062 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 02:12:37.067 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 02:12:37.073 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 02:12:37.077 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 02:12:37.078 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 02:12:37.079 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 02:12:37.081 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 02:12:37.083 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 02:12:37.098 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument) in 1142.2522ms
2025-05-03 02:12:37.100 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.VerifyOtp (ExchangeDocument)'
2025-05-03 02:12:37.103 +07:00 [INF] HTTP POST /api/Auth/verify-otp responded 400 in 1195.3275 ms
2025-05-03 02:12:37.106 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" completed keep alive response.
2025-05-03 02:12:37.109 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 02:12:37.112 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 02:12:37.116 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 02:12:37.118 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/verify-otp - 400 null application/json; charset=utf-8 1234.653ms
2025-05-03 02:13:39.736 +07:00 [DBG] Connection id "0HNC9LKQGQMG6" received FIN.
2025-05-03 02:13:39.740 +07:00 [DBG] Connection id "0HNC9LKQGQMG6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 02:13:39.742 +07:00 [DBG] Connection id "0HNC9LKQGQMG6" disconnecting.
2025-05-03 02:13:39.744 +07:00 [DBG] Connection id "0HNC9LKQGQMG6" stopped.
2025-05-03 02:14:47.982 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" disconnecting.
2025-05-03 02:14:47.985 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" stopped.
2025-05-03 02:14:47.987 +07:00 [DBG] Connection id "0HNC9LKQGQMG5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 02:18:58.908 +07:00 [INF] Application is shutting down...
2025-05-03 02:18:58.910 +07:00 [DBG] Hosting stopping
2025-05-03 02:18:58.915 +07:00 [DBG] Hosting stopped
2025-05-03 02:51:41.844 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 02:51:41.925 +07:00 [DBG] Hosting starting
2025-05-03 02:51:41.968 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 02:51:41.972 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 02:51:41.973 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 02:51:41.974 +07:00 [INF] Hosting environment: Development
2025-05-03 02:51:41.975 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 02:51:41.975 +07:00 [DBG] Hosting started
2025-05-03 02:51:45.602 +07:00 [INF] Application is shutting down...
2025-05-03 02:51:45.603 +07:00 [DBG] Hosting stopping
2025-05-03 02:51:45.612 +07:00 [DBG] Hosting stopped
2025-05-03 03:15:53.383 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 03:15:53.465 +07:00 [DBG] Hosting starting
2025-05-03 03:15:53.481 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 03:15:53.489 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 03:15:53.523 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 03:15:53.536 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 03:15:53.540 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:15:53.543 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 03:15:53.545 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:15:53.549 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 03:15:53.551 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 03:15:53.554 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 03:15:53.555 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 03:15:53.592 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 03:15:53.595 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 03:15:53.598 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 03:15:53.600 +07:00 [INF] Hosting environment: Development
2025-05-03 03:15:53.601 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 03:15:53.602 +07:00 [DBG] Hosting started
2025-05-03 03:17:12.487 +07:00 [INF] Application is shutting down...
2025-05-03 03:17:12.488 +07:00 [DBG] Hosting stopping
2025-05-03 03:17:12.498 +07:00 [DBG] Hosting stopped
2025-05-03 03:17:17.598 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 03:17:17.687 +07:00 [DBG] Hosting starting
2025-05-03 03:17:17.698 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 03:17:17.709 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 03:17:17.717 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 03:17:17.727 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 03:17:17.733 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:17:17.738 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 03:17:17.741 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:17:17.746 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 03:17:17.748 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 03:17:17.749 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 03:17:17.751 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 03:17:17.790 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 03:17:17.792 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 03:17:17.793 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 03:17:17.796 +07:00 [INF] Hosting environment: Development
2025-05-03 03:17:17.797 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 03:17:17.798 +07:00 [DBG] Hosting started
2025-05-03 03:17:22.253 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" accepted.
2025-05-03 03:17:22.255 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" started.
2025-05-03 03:17:22.256 +07:00 [DBG] Connection id "0HNC9MPCC0CJL" accepted.
2025-05-03 03:17:22.257 +07:00 [DBG] Connection id "0HNC9MPCC0CJL" started.
2025-05-03 03:17:22.279 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:17:22.286 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 03:17:22.297 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:17:22.298 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:17:22.370 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 65.4906 ms
2025-05-03 03:17:22.375 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:17:22.378 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 99.9781ms
2025-05-03 03:17:22.942 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:17:22.945 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:17:22.948 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:17:23.092 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 142.9559 ms
2025-05-03 03:17:23.095 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:17:23.096 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 154.2649ms
2025-05-03 03:18:44.447 +07:00 [DBG] Connection id "0HNC9MPCC0CJL" received FIN.
2025-05-03 03:18:44.447 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 64
2025-05-03 03:18:44.450 +07:00 [DBG] Connection id "0HNC9MPCC0CJL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:18:44.453 +07:00 [DBG] Connection id "0HNC9MPCC0CJL" disconnecting.
2025-05-03 03:18:44.458 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:18:44.460 +07:00 [DBG] Connection id "0HNC9MPCC0CJL" stopped.
2025-05-03 03:18:44.465 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:18:44.468 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:18:44.470 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:18:44.473 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 03:18:44.504 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:18:44.509 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:18:44.529 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:18:44.533 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:18:44.534 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:18:44.535 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:18:44.537 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:18:44.540 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:18:44.543 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:18:44.626 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 03:18:44.652 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:18:44.659 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:18:44.661 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:18:44.664 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:18:44.692 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000003": started reading request body.
2025-05-03 03:18:44.694 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000003": done reading request body.
2025-05-03 03:18:44.705 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:18:44.707 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:18:44.709 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:18:44.711 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:18:44.717 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:18:45.049 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:18:45.052 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:18:45.152 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:18:45.195 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 03:18:45.237 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 03:18:45.393 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 03:18:45.437 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:18:45.451 +07:00 [DBG] Created DbConnection. (12ms).
2025-05-03 03:18:45.454 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:18:45.548 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:18:45.552 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:18:45.557 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 03:18:45.563 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-05-03 03:18:45.568 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:18:45.601 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:18:45.627 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:18:45.658 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:18:45.663 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:18:45.669 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:18:45.675 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 67ms reading results.
2025-05-03 03:18:45.680 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:18:45.684 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 03:18:45.936 +07:00 [INF] User nguyetnkhuyen@gmail.com logged in successfully
2025-05-03 03:18:45.940 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:18:45.943 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:18:45.944 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:18:45.945 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:18:45.946 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:18:45.947 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:18:45.961 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 1417.7291ms
2025-05-03 03:18:45.963 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:18:45.966 +07:00 [INF] HTTP POST /api/Auth/login responded 200 in 1496.2186 ms
2025-05-03 03:18:45.967 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:18:45.971 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:18:45.975 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:18:45.978 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 03:18:45.980 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 200 null application/json; charset=utf-8 1532.7354ms
2025-05-03 03:19:21.737 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 62
2025-05-03 03:19:21.741 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:19:21.744 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:19:21.746 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:21.748 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:19:21.752 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:19:21.755 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:21.757 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:19:21.761 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:19:21.763 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:19:21.765 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:19:21.767 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:19:21.769 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:19:21.772 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:19:21.776 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:19:21.778 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:19:21.779 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:19:21.780 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:19:21.782 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000004": started reading request body.
2025-05-03 03:19:21.783 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000004": done reading request body.
2025-05-03 03:19:21.786 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:19:21.788 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:21.790 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:21.791 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:19:21.793 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:21.804 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:19:21.810 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:19:21.812 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-03 03:19:21.814 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:21.816 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:21.819 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:19:21.822 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 03:19:21.823 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-03 03:19:21.825 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:19:21.831 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:19:21.835 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:21.838 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-05-03 03:19:21.840 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:21.842 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:19:21.843 +07:00 [WRN] Login failed: user haminhkhoa1@gmail.com not found
2025-05-03 03:19:21.844 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:19:21.847 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:19:21.848 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:19:21.848 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:19:21.849 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:19:21.851 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:19:21.856 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 83.8591ms
2025-05-03 03:19:21.857 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:21.858 +07:00 [INF] HTTP POST /api/Auth/login responded 400 in 110.4589 ms
2025-05-03 03:19:21.860 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:19:21.862 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:19:21.863 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:21.865 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 03:19:21.866 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 400 null application/json; charset=utf-8 128.8665ms
2025-05-03 03:19:48.910 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 65
2025-05-03 03:19:48.915 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:19:48.916 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:19:48.918 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:48.919 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:19:48.922 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:19:48.925 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:48.928 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:19:48.933 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:19:48.937 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:19:48.940 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:19:48.944 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:19:48.945 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:19:48.946 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:19:48.952 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:19:48.955 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:19:48.956 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:19:48.957 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:19:48.958 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000005": started reading request body.
2025-05-03 03:19:48.959 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000005": done reading request body.
2025-05-03 03:19:48.961 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:19:48.961 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:48.962 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:48.963 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:19:48.965 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:49.014 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:19:49.021 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:19:49.023 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-03 03:19:49.025 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:49.026 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:49.027 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:19:49.027 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:19:49.028 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:19:49.029 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:19:49.032 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:19:49.036 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:49.037 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-05-03 03:19:49.038 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:49.039 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 03:19:49.040 +07:00 [WRN] Login failed: user nguyenkhuyen@gmail.com not found
2025-05-03 03:19:49.040 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:19:49.042 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:19:49.043 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:19:49.043 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:19:49.044 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:19:49.045 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:19:49.046 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 99.2386ms
2025-05-03 03:19:49.047 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:49.048 +07:00 [INF] HTTP POST /api/Auth/login responded 400 in 129.2154 ms
2025-05-03 03:19:49.050 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:19:49.052 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:19:49.052 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:19:49.053 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 03:19:49.054 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 400 null application/json; charset=utf-8 144.3979ms
2025-05-03 03:19:57.392 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 41
2025-05-03 03:19:57.397 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:19:57.399 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:19:57.401 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:57.404 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:19:57.405 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:19:57.406 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:57.409 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:19:57.414 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:19:57.416 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:19:57.422 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:19:57.424 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:19:57.425 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:19:57.426 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:19:57.427 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:19:57.429 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:19:57.432 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:19:57.434 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:19:57.436 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000006": started reading request body.
2025-05-03 03:19:57.437 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000006": done reading request body.
2025-05-03 03:19:57.443 +07:00 [DBG] JSON input formatter threw an exception: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 3 | BytePositionInLine: 0.
2025-05-03 03:19:57.444 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:57.445 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:57.446 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:19:57.448 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:19:57.450 +07:00 [DBG] The request has model state errors, returning an error response.
2025-05-03 03:19:57.452 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-05-03 03:19:57.454 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:19:57.456 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:19:57.457 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-05-03 03:19:57.459 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-05-03 03:19:57.460 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-03 03:19:57.483 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 57.0668ms
2025-05-03 03:19:57.485 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:19:57.486 +07:00 [INF] HTTP POST /api/Auth/login responded 400 in 82.9298 ms
2025-05-03 03:19:57.488 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:19:57.488 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 400 null application/problem+json; charset=utf-8 96.101ms
2025-05-03 03:20:09.526 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 40
2025-05-03 03:20:09.530 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:20:09.531 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:20:09.533 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:20:09.535 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:20:09.536 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:20:09.556 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:20:09.559 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:20:09.560 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:20:09.567 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:20:09.569 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:20:09.571 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:20:09.573 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:20:09.574 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:20:09.575 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:20:09.576 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:20:09.577 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:20:09.579 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:20:09.582 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000007": started reading request body.
2025-05-03 03:20:09.583 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:00000007": done reading request body.
2025-05-03 03:20:09.584 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:20:09.585 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:20:09.586 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:20:09.587 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:20:09.588 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:20:09.589 +07:00 [DBG] The request has model state errors, returning an error response.
2025-05-03 03:20:09.590 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-05-03 03:20:09.591 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:20:09.592 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:20:09.593 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-05-03 03:20:09.596 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-05-03 03:20:09.599 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-03 03:20:09.601 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 26.7563ms
2025-05-03 03:20:09.602 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:20:09.603 +07:00 [INF] HTTP POST /api/Auth/login responded 400 in 68.1430 ms
2025-05-03 03:20:09.604 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:20:09.605 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 400 null application/problem+json; charset=utf-8 79.1936ms
2025-05-03 03:20:29.289 +07:00 [DBG] Connection id "0HNC9MPCC0CJM" accepted.
2025-05-03 03:20:29.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:20:29.293 +07:00 [DBG] Connection id "0HNC9MPCC0CJM" started.
2025-05-03 03:20:29.295 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:20:29.296 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:20:29.298 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.5499 ms
2025-05-03 03:20:29.300 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:20:29.301 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 11.0798ms
2025-05-03 03:20:29.731 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:20:29.734 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:20:29.737 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:20:29.754 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 16.0209 ms
2025-05-03 03:20:29.757 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:20:29.760 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.178ms
2025-05-03 03:20:49.610 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 64
2025-05-03 03:20:49.615 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:20:49.615 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:20:49.617 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:20:49.618 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:20:49.619 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:20:49.619 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:20:49.621 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:20:49.624 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:20:49.627 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:20:49.628 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:20:49.630 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:20:49.632 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:20:49.634 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:20:49.636 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:20:49.637 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:20:49.638 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:20:49.641 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:20:49.644 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:0000000A": started reading request body.
2025-05-03 03:20:49.646 +07:00 [DBG] Connection id "0HNC9MPCC0CJK", Request id "0HNC9MPCC0CJK:0000000A": done reading request body.
2025-05-03 03:20:49.647 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:20:49.648 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:20:49.649 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:20:49.650 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:20:49.651 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:20:49.652 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:20:49.654 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:20:49.654 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 03:20:49.655 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:20:49.659 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:20:49.661 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:20:49.662 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:20:49.663 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 03:20:49.664 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:20:49.669 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:20:49.672 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:20:49.677 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:20:49.679 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:20:49.681 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:20:49.682 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-05-03 03:20:49.683 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:20:49.684 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:20:49.827 +07:00 [INF] User nguyetnkhuyen@gmail.com logged in successfully
2025-05-03 03:20:49.830 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:20:49.832 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:20:49.832 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:20:49.833 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:20:49.834 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:20:49.835 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:20:49.836 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 202.1048ms
2025-05-03 03:20:49.837 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:20:49.838 +07:00 [INF] HTTP POST /api/Auth/login responded 200 in 220.7406 ms
2025-05-03 03:20:49.840 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" completed keep alive response.
2025-05-03 03:20:49.842 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:20:49.843 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:20:49.844 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 03:20:49.845 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 200 null application/json; charset=utf-8 234.6548ms
2025-05-03 03:21:29.623 +07:00 [DBG] Connection id "0HNC9MPCC0CJM" received FIN.
2025-05-03 03:21:29.623 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" received FIN.
2025-05-03 03:21:29.625 +07:00 [DBG] Connection id "0HNC9MPCC0CJM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:21:29.626 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" disconnecting.
2025-05-03 03:21:29.627 +07:00 [DBG] Connection id "0HNC9MPCC0CJM" disconnecting.
2025-05-03 03:21:29.629 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:21:29.631 +07:00 [DBG] Connection id "0HNC9MPCC0CJM" stopped.
2025-05-03 03:21:29.650 +07:00 [DBG] Connection id "0HNC9MPCC0CJK" stopped.
2025-05-03 03:28:09.245 +07:00 [INF] Application is shutting down...
2025-05-03 03:28:09.247 +07:00 [DBG] Hosting stopping
2025-05-03 03:28:09.256 +07:00 [DBG] Hosting stopped
2025-05-03 03:28:19.263 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 03:28:19.345 +07:00 [DBG] Hosting starting
2025-05-03 03:28:19.358 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 03:28:19.370 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 03:28:19.376 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 03:28:19.382 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 03:28:19.386 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:28:19.390 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 03:28:19.392 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:28:19.396 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 03:28:19.398 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 03:28:19.402 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 03:28:19.404 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 03:28:19.440 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 03:28:19.443 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 03:28:19.446 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 03:28:19.446 +07:00 [INF] Hosting environment: Development
2025-05-03 03:28:19.447 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 03:28:19.448 +07:00 [DBG] Hosting started
2025-05-03 03:28:22.335 +07:00 [DBG] Connection id "0HNC9MVH31QHQ" accepted.
2025-05-03 03:28:22.340 +07:00 [DBG] Connection id "0HNC9MVH31QHQ" started.
2025-05-03 03:28:22.341 +07:00 [DBG] Connection id "0HNC9MVH31QHR" accepted.
2025-05-03 03:28:22.342 +07:00 [DBG] Connection id "0HNC9MVH31QHR" started.
2025-05-03 03:28:22.363 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:28:22.372 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 03:28:22.387 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:28:22.390 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:28:22.465 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 71.1545 ms
2025-05-03 03:28:22.471 +07:00 [DBG] Connection id "0HNC9MVH31QHQ" completed keep alive response.
2025-05-03 03:28:22.473 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 110.8552ms
2025-05-03 03:28:22.986 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:28:22.990 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:28:22.991 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:28:23.166 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 174.0092 ms
2025-05-03 03:28:23.168 +07:00 [DBG] Connection id "0HNC9MVH31QHQ" completed keep alive response.
2025-05-03 03:28:23.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.3432ms
2025-05-03 03:29:47.692 +07:00 [DBG] Connection id "0HNC9MVH31QHR" received FIN.
2025-05-03 03:29:47.696 +07:00 [DBG] Connection id "0HNC9MVH31QHR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:29:47.699 +07:00 [DBG] Connection id "0HNC9MVH31QHR" disconnecting.
2025-05-03 03:29:47.701 +07:00 [DBG] Connection id "0HNC9MVH31QHR" stopped.
2025-05-03 03:30:03.794 +07:00 [INF] Application is shutting down...
2025-05-03 03:30:03.795 +07:00 [DBG] Hosting stopping
2025-05-03 03:30:03.803 +07:00 [DBG] Connection id "0HNC9MVH31QHQ" disconnecting.
2025-05-03 03:30:03.804 +07:00 [DBG] Connection id "0HNC9MVH31QHQ" stopped.
2025-05-03 03:30:03.805 +07:00 [DBG] Connection id "0HNC9MVH31QHQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:30:03.809 +07:00 [DBG] Hosting stopped
2025-05-03 03:30:52.357 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 03:30:52.447 +07:00 [DBG] Hosting starting
2025-05-03 03:30:52.459 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 03:30:52.469 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 03:30:52.476 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 03:30:52.488 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 03:30:52.492 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:30:52.496 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 03:30:52.499 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:30:52.506 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 03:30:52.509 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 03:30:52.510 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 03:30:52.512 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 03:30:52.550 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 03:30:52.551 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 03:30:52.552 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 03:30:52.554 +07:00 [INF] Hosting environment: Development
2025-05-03 03:30:52.555 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 03:30:52.556 +07:00 [DBG] Hosting started
2025-05-03 03:31:06.577 +07:00 [DBG] Connection id "0HNC9N121CFNL" accepted.
2025-05-03 03:31:06.582 +07:00 [DBG] Connection id "0HNC9N121CFNL" started.
2025-05-03 03:31:06.582 +07:00 [DBG] Connection id "0HNC9N121CFNM" accepted.
2025-05-03 03:31:06.585 +07:00 [DBG] Connection id "0HNC9N121CFNM" started.
2025-05-03 03:31:06.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:31:06.615 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 03:31:06.626 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:31:06.628 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:31:06.702 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 69.2958 ms
2025-05-03 03:31:06.707 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:31:06.710 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 101.0155ms
2025-05-03 03:31:07.164 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:31:07.168 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:31:07.170 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:31:07.320 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 148.4039 ms
2025-05-03 03:31:07.334 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:31:07.337 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.2982ms
2025-05-03 03:31:38.038 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 35
2025-05-03 03:31:38.049 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:31:38.055 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:31:38.060 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:31:38.067 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:31:38.069 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 03:31:38.087 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:31:38.093 +07:00 [DBG] Policy authentication schemes  did not succeed
2025-05-03 03:31:38.097 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-03 03:31:38.100 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-03 03:31:38.101 +07:00 [INF] HTTP POST /api/admin/categories responded 401 in 34.8864 ms
2025-05-03 03:31:38.103 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:31:38.105 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 401 0 null 66.5352ms
2025-05-03 03:31:38.111 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000003": started reading request body.
2025-05-03 03:31:38.113 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000003": done reading request body.
2025-05-03 03:32:19.292 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 64
2025-05-03 03:32:19.292 +07:00 [DBG] Connection id "0HNC9N121CFNM" received FIN.
2025-05-03 03:32:19.296 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:32:19.297 +07:00 [DBG] Connection id "0HNC9N121CFNM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:32:19.298 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:32:19.303 +07:00 [DBG] Connection id "0HNC9N121CFNM" disconnecting.
2025-05-03 03:32:19.305 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:32:19.310 +07:00 [DBG] Connection id "0HNC9N121CFNM" stopped.
2025-05-03 03:32:19.311 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:32:19.317 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:32:19.321 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:32:19.342 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:32:19.345 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:32:19.346 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:32:19.348 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:32:19.351 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:32:19.353 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:32:19.355 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:32:19.415 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 03:32:19.436 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:32:19.440 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:32:19.443 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:32:19.446 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:32:19.471 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000004": started reading request body.
2025-05-03 03:32:19.473 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000004": done reading request body.
2025-05-03 03:32:19.482 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:32:19.483 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:32:19.486 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:32:19.488 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:32:19.495 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:32:19.871 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:32:19.875 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:32:19.981 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:32:20.024 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 03:32:20.069 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 03:32:20.226 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 03:32:20.267 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:32:20.280 +07:00 [DBG] Created DbConnection. (11ms).
2025-05-03 03:32:20.284 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:32:20.381 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:32:20.387 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:32:20.392 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 03:32:20.398 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-05-03 03:32:20.405 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:32:20.439 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:32:20.468 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:32:20.507 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:32:20.515 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:32:20.523 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:32:20.530 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 83ms reading results.
2025-05-03 03:32:20.532 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:32:20.538 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-05-03 03:32:20.792 +07:00 [INF] User nguyetnkhuyen@gmail.com logged in successfully
2025-05-03 03:32:20.795 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:32:20.798 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:32:20.798 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:32:20.799 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:32:20.802 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:32:20.803 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:32:20.816 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 1459.7564ms
2025-05-03 03:32:20.820 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:32:20.822 +07:00 [INF] HTTP POST /api/Auth/login responded 200 in 1511.6772 ms
2025-05-03 03:32:20.824 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:32:20.826 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:32:20.829 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:32:20.831 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 03:32:20.832 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 200 null application/json; charset=utf-8 1539.6883ms
2025-05-03 03:33:39.921 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 35
2025-05-03 03:33:39.925 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:33:39.928 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:33:39.946 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:33:39.950 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:33:39.968 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.Text.Json.JsonReaderException: '0xC8' is an invalid start of a value. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeValue(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadFirstToken(Byte first)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at Microsoft.IdentityModel.Tokens.Json.JsonSerializerPrimitives.IsReaderAtTokenType(Utf8JsonReader& reader, JsonTokenType tokenType, Boolean advanceReader)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateHeaderClaimSet(Byte[] bytes, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-03 03:33:39.985 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-03 03:33:39.987 +07:00 [DBG] Policy authentication schemes  did not succeed
2025-05-03 03:33:39.988 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-03 03:33:39.989 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-03 03:33:39.990 +07:00 [INF] HTTP POST /api/admin/categories responded 401 in 40.6360 ms
2025-05-03 03:33:39.992 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:33:39.993 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 401 0 null 72.6156ms
2025-05-03 03:33:39.996 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000005": started reading request body.
2025-05-03 03:33:39.997 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000005": done reading request body.
2025-05-03 03:33:47.195 +07:00 [DBG] Connection id "0HNC9N121CFNN" accepted.
2025-05-03 03:33:47.195 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:33:47.198 +07:00 [DBG] Connection id "0HNC9N121CFNN" started.
2025-05-03 03:33:47.200 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:33:47.201 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:33:47.202 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 0.4889 ms
2025-05-03 03:33:47.203 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:33:47.205 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 9.3155ms
2025-05-03 03:33:47.582 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:33:47.586 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:33:47.589 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:33:47.607 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 15.0735 ms
2025-05-03 03:33:47.611 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:33:47.613 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.3971ms
2025-05-03 03:34:25.939 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 35
2025-05-03 03:34:25.943 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:34:25.944 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:34:25.947 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:34:25.951 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:34:25.954 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.Text.Json.JsonReaderException: '0xC8' is an invalid start of a value. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeValue(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadFirstToken(Byte first)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at Microsoft.IdentityModel.Tokens.Json.JsonSerializerPrimitives.IsReaderAtTokenType(Utf8JsonReader& reader, JsonTokenType tokenType, Boolean advanceReader)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateHeaderClaimSet(Byte[] bytes, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-03 03:34:25.965 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-03 03:34:25.967 +07:00 [DBG] Policy authentication schemes  did not succeed
2025-05-03 03:34:25.969 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-03 03:34:25.973 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-03 03:34:25.976 +07:00 [INF] HTTP POST /api/admin/categories responded 401 in 24.5921 ms
2025-05-03 03:34:25.977 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:34:25.979 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 401 0 null 40.6366ms
2025-05-03 03:34:25.982 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000008": started reading request body.
2025-05-03 03:34:25.983 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000008": done reading request body.
2025-05-03 03:34:51.591 +07:00 [DBG] Connection id "0HNC9N121CFNN" received FIN.
2025-05-03 03:34:51.594 +07:00 [DBG] Connection id "0HNC9N121CFNN" disconnecting.
2025-05-03 03:34:51.595 +07:00 [DBG] Connection id "0HNC9N121CFNN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:34:51.598 +07:00 [DBG] Connection id "0HNC9N121CFNN" stopped.
2025-05-03 03:35:02.214 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 35
2025-05-03 03:35:02.217 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:35:02.219 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:35:02.221 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:35:02.222 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:35:02.260 +07:00 [DBG] Successfully validated the token.
2025-05-03 03:35:02.262 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 03:35:02.264 +07:00 [DBG] Authorization was successful.
2025-05-03 03:35:02.267 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:35:02.271 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 03:35:02.274 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:35:02.275 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:35:02.276 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:35:02.278 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:35:02.279 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:35:02.281 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:35:02.284 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:35:02.286 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:35:02.287 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 03:35:02.288 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:35:02.290 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000009": started reading request body.
2025-05-03 03:35:02.291 +07:00 [DBG] Connection id "0HNC9N121CFNL", Request id "0HNC9N121CFNL:00000009": done reading request body.
2025-05-03 03:35:02.293 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 03:35:02.294 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:35:02.295 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:35:02.296 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:35:02.300 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:35:02.318 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:35:02.322 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-03 03:35:02.327 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-03 03:35:02.340 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:35:02.342 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-03 03:35:02.343 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.345 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.347 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:35:02.348 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:35:02.349 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 03:35:02.350 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:35:02.359 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:35:02.366 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:35:02.371 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:35:02.372 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:35:02.374 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.375 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 13ms reading results.
2025-05-03 03:35:02.376 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.378 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:35:02.395 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:35:02.404 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:35:02.407 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:35:02.409 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:35:02.417 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 03:35:02.457 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.459 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.463 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:35:02.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:35:02.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 03:35:02.469 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:35:02.475 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:35:02.488 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 03:35:02.493 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.494 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 16ms reading results.
2025-05-03 03:35:02.497 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.499 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-05-03 03:35:02.511 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:35:02.516 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 03:35:02.520 +07:00 [INF] Danh mục tạo: Doanh Nhân (ID=8) bởi CategoryService
2025-05-03 03:35:02.523 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:35:02.527 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 03:35:02.530 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 03:35:02.531 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:35:02.533 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:35:02.534 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:35:02.536 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 03:35:02.550 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[8],action=[Create],controller=[AdminCategories])
2025-05-03 03:35:02.556 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=8
2025-05-03 03:35:02.559 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=8
2025-05-03 03:35:02.562 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 280.9351ms
2025-05-03 03:35:02.564 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:35:02.565 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 342.8472 ms
2025-05-03 03:35:02.568 +07:00 [DBG] Connection id "0HNC9N121CFNL" completed keep alive response.
2025-05-03 03:35:02.570 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:35:02.572 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:35:02.574 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 03:35:02.575 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 360.9553ms
2025-05-03 03:37:05.671 +07:00 [DBG] Config reload token fired. Checking for changes...
2025-05-03 03:37:05.936 +07:00 [DBG] Config reload token fired. Checking for changes...
2025-05-03 03:37:07.348 +07:00 [DBG] Config reload token fired. Checking for changes...
2025-05-03 03:37:07.615 +07:00 [DBG] Config reload token fired. Checking for changes...
2025-05-03 03:37:10.412 +07:00 [INF] Application is shutting down...
2025-05-03 03:37:10.412 +07:00 [DBG] Hosting stopping
2025-05-03 03:37:10.419 +07:00 [DBG] Connection id "0HNC9N121CFNL" disconnecting.
2025-05-03 03:37:10.420 +07:00 [DBG] Connection id "0HNC9N121CFNL" stopped.
2025-05-03 03:37:10.422 +07:00 [DBG] Connection id "0HNC9N121CFNL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:37:10.424 +07:00 [DBG] Hosting stopped
2025-05-03 03:37:15.451 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 03:37:15.532 +07:00 [DBG] Hosting starting
2025-05-03 03:37:15.543 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 03:37:15.556 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 03:37:15.564 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 03:37:15.571 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 03:37:15.575 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:37:15.577 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 03:37:15.579 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:37:15.585 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 03:37:15.587 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 03:37:15.589 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 03:37:15.590 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 03:37:15.622 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 03:37:15.626 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 03:37:15.627 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 03:37:15.628 +07:00 [INF] Hosting environment: Development
2025-05-03 03:37:15.628 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 03:37:15.629 +07:00 [DBG] Hosting started
2025-05-03 03:37:32.643 +07:00 [DBG] Connection id "0HNC9N4L36CSL" accepted.
2025-05-03 03:37:32.648 +07:00 [DBG] Connection id "0HNC9N4L36CSL" started.
2025-05-03 03:37:32.649 +07:00 [DBG] Connection id "0HNC9N4L36CSM" accepted.
2025-05-03 03:37:32.653 +07:00 [DBG] Connection id "0HNC9N4L36CSM" started.
2025-05-03 03:37:32.672 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:37:32.676 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 03:37:32.690 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:37:32.691 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:37:32.759 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 65.0553 ms
2025-05-03 03:37:32.766 +07:00 [DBG] Connection id "0HNC9N4L36CSL" completed keep alive response.
2025-05-03 03:37:32.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 97.8606ms
2025-05-03 03:37:33.220 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:37:33.226 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:37:33.228 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:37:33.400 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 168.9535 ms
2025-05-03 03:37:33.402 +07:00 [DBG] Connection id "0HNC9N4L36CSL" completed keep alive response.
2025-05-03 03:37:33.404 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.1344ms
2025-05-03 03:38:06.411 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 29
2025-05-03 03:38:06.419 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:38:06.425 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:38:06.428 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:38:06.431 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:38:06.435 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 03:38:06.487 +07:00 [DBG] Successfully validated the token.
2025-05-03 03:38:06.490 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 03:38:06.496 +07:00 [DBG] Authorization was successful.
2025-05-03 03:38:06.498 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:38:06.515 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 03:38:06.519 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:38:06.520 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:38:06.522 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:38:06.525 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:38:06.526 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:38:06.528 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:38:06.588 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 03:38:06.605 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:38:06.611 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:38:06.617 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 03:38:06.619 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:38:06.645 +07:00 [DBG] Connection id "0HNC9N4L36CSL", Request id "0HNC9N4L36CSL:00000003": started reading request body.
2025-05-03 03:38:06.649 +07:00 [DBG] Connection id "0HNC9N4L36CSL", Request id "0HNC9N4L36CSL:00000003": done reading request body.
2025-05-03 03:38:06.658 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 03:38:06.661 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:38:06.663 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:38:06.664 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:38:06.669 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:38:06.985 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:38:06.988 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:38:07.088 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:38:07.111 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-03 03:38:07.247 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-03 03:38:07.276 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:38:07.290 +07:00 [DBG] Created DbConnection. (12ms).
2025-05-03 03:38:07.297 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.399 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.404 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:38:07.410 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-03 03:38:07.412 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-05-03 03:38:07.417 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:38:07.445 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:38:07.469 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:38:07.483 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:38:07.486 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:38:07.487 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:38:07.492 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.498 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 45ms reading results.
2025-05-03 03:38:07.501 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.505 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 03:38:07.523 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:38:07.533 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:38:07.537 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:38:07.540 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:38:07.548 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 03:38:07.593 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.598 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.600 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:38:07.601 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:38:07.604 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 03:38:07.607 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:38:07.623 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:38:07.633 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 03:38:07.638 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.641 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-05-03 03:38:07.642 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.644 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:38:07.652 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:38:07.654 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 03:38:07.656 +07:00 [INF] Danh mục tạo: 3 day (ID=9) bởi CategoryService
2025-05-03 03:38:07.663 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:38:07.666 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 03:38:07.668 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 03:38:07.669 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:38:07.670 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:38:07.671 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:38:07.673 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 03:38:07.684 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[9],action=[Create],controller=[AdminCategories])
2025-05-03 03:38:07.687 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=9
2025-05-03 03:38:07.689 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=9
2025-05-03 03:38:07.701 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 1171.8459ms
2025-05-03 03:38:07.702 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:38:07.704 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 1274.1359 ms
2025-05-03 03:38:07.705 +07:00 [DBG] Connection id "0HNC9N4L36CSL" completed keep alive response.
2025-05-03 03:38:07.709 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:38:07.715 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:38:07.717 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 03:38:07.718 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 1307.0914ms
2025-05-03 03:38:51.839 +07:00 [DBG] Connection id "0HNC9N4L36CSM" received FIN.
2025-05-03 03:38:51.844 +07:00 [DBG] Connection id "0HNC9N4L36CSM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:38:51.846 +07:00 [DBG] Connection id "0HNC9N4L36CSM" disconnecting.
2025-05-03 03:38:51.848 +07:00 [DBG] Connection id "0HNC9N4L36CSM" stopped.
2025-05-03 03:39:45.949 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 64
2025-05-03 03:39:45.955 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:39:45.957 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:39:45.958 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:39:45.959 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:39:45.962 +07:00 [DBG] Successfully validated the token.
2025-05-03 03:39:45.964 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 03:39:45.967 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:39:45.973 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:39:45.974 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:39:45.975 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:39:45.976 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:39:45.980 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:39:45.982 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:39:45.985 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:39:46.002 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 17.4525ms
2025-05-03 03:39:46.004 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:39:46.005 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Failed to convert configuration value at 'JwtSettings:ExpiryMinutes' to type 'System.Int32'.
 ---> System.ArgumentException: 0.1 is not a valid value for Int32. (Parameter 'value')
 ---> System.FormatException: The input string '0.1' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.Int32.Parse(String s, NumberStyles style, IFormatProvider provider)
   at System.ComponentModel.Int32Converter.FromString(String value, NumberFormatInfo formatInfo)
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   --- End of inner exception stack trace ---
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at Microsoft.Extensions.Configuration.ConfigurationBinder.TryConvertValue(Type type, String value, String path, Object& result, Exception& error)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.Configuration.ConfigurationBinder.BindInstance(Type type, BindingPoint bindingPoint, IConfiguration config, BinderOptions options, Boolean isParentCollection)
   at Microsoft.Extensions.Configuration.ConfigurationBinder.BindProperty(PropertyInfo property, Object instance, IConfiguration config, BinderOptions options)
   at Microsoft.Extensions.Configuration.ConfigurationBinder.BindProperties(Object instance, IConfiguration configuration, BinderOptions options, ParameterInfo[] constructorParameters)
   at Microsoft.Extensions.Configuration.ConfigurationBinder.BindInstance(Type type, BindingPoint bindingPoint, IConfiguration config, BinderOptions options, Boolean isParentCollection)
   at Microsoft.Extensions.Configuration.ConfigurationBinder.Bind(IConfiguration configuration, Object instance, Action`1 configureOptions)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at ExchangeDocument.BusinessLayer.Services.AuthService..ctor(IUserRepository userRepository, IMemoryCache cache, IEmailService emailService, IOptions`1 otpSettings, IOptions`1 jwtSettings, ILogger`1 logger) in D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument\BusinessLayer\Services\AuthService.cs:line 42
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithManyArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method88(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-03 03:39:46.035 +07:00 [ERR] HTTP POST /api/Auth/login responded 500 in 76.5175 ms
2025-05-03 03:39:46.037 +07:00 [DBG] Connection id "0HNC9N4L36CSL" completed keep alive response.
2025-05-03 03:39:46.038 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 500 null text/plain; charset=utf-8 88.665ms
2025-05-03 03:39:46.040 +07:00 [DBG] Connection id "0HNC9N4L36CSL", Request id "0HNC9N4L36CSL:00000004": started reading request body.
2025-05-03 03:39:46.041 +07:00 [DBG] Connection id "0HNC9N4L36CSL", Request id "0HNC9N4L36CSL:00000004": done reading request body.
2025-05-03 03:40:14.375 +07:00 [DBG] Config reload token fired. Checking for changes...
2025-05-03 03:40:29.834 +07:00 [INF] Application is shutting down...
2025-05-03 03:40:29.835 +07:00 [DBG] Hosting stopping
2025-05-03 03:40:29.841 +07:00 [DBG] Connection id "0HNC9N4L36CSL" disconnecting.
2025-05-03 03:40:29.843 +07:00 [DBG] Connection id "0HNC9N4L36CSL" stopped.
2025-05-03 03:40:29.843 +07:00 [DBG] Connection id "0HNC9N4L36CSL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:40:29.846 +07:00 [DBG] Hosting stopped
2025-05-03 03:40:36.599 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 03:40:36.680 +07:00 [DBG] Hosting starting
2025-05-03 03:40:36.693 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 03:40:36.702 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 03:40:36.711 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 03:40:36.717 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 03:40:36.720 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:40:36.725 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 03:40:36.727 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:40:36.731 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 03:40:36.733 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 03:40:36.734 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 03:40:36.735 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 03:40:36.770 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 03:40:36.772 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 03:40:36.775 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 03:40:36.776 +07:00 [INF] Hosting environment: Development
2025-05-03 03:40:36.777 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 03:40:36.778 +07:00 [DBG] Hosting started
2025-05-03 03:40:45.301 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" accepted.
2025-05-03 03:40:45.306 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" started.
2025-05-03 03:40:45.306 +07:00 [DBG] Connection id "0HNC9N6EGH0N0" accepted.
2025-05-03 03:40:45.310 +07:00 [DBG] Connection id "0HNC9N6EGH0N0" started.
2025-05-03 03:40:45.334 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:40:45.342 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 03:40:45.355 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:40:45.358 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:40:45.430 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 68.4397 ms
2025-05-03 03:40:45.434 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:40:45.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 104.4502ms
2025-05-03 03:40:45.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:40:45.839 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:40:45.840 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:40:45.963 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 121.4461 ms
2025-05-03 03:40:45.966 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:40:45.967 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.0348ms
2025-05-03 03:41:08.897 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 63
2025-05-03 03:41:08.905 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:41:08.912 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:41:08.916 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:41:08.921 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:41:08.924 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 03:41:08.941 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:41:08.945 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:41:08.965 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:41:08.971 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:41:08.973 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:41:08.975 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:41:08.976 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:41:08.977 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:41:08.979 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:41:09.034 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 03:41:09.055 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:41:09.059 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:41:09.061 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:41:09.063 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:41:09.086 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000003": started reading request body.
2025-05-03 03:41:09.089 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000003": done reading request body.
2025-05-03 03:41:09.097 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:41:09.098 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:41:09.099 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:41:09.101 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:41:09.106 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:41:09.418 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:41:09.422 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:41:09.521 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:41:09.562 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 03:41:09.606 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 03:41:09.763 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 03:41:09.809 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:41:09.825 +07:00 [DBG] Created DbConnection. (14ms).
2025-05-03 03:41:09.829 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:09.926 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:09.931 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:41:09.936 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 03:41:09.943 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-05-03 03:41:09.950 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:41:09.983 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:41:09.995 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:10.003 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 11ms reading results.
2025-05-03 03:41:10.008 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:10.012 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 03:41:10.014 +07:00 [WRN] Login failed: user haminhkhoa17@gmail.com not found
2025-05-03 03:41:10.017 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:41:10.021 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:41:10.022 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:41:10.023 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:41:10.024 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:41:10.025 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:41:10.039 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 1058.8211ms
2025-05-03 03:41:10.041 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:41:10.042 +07:00 [INF] HTTP POST /api/Auth/login responded 400 in 1123.3220 ms
2025-05-03 03:41:10.044 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:41:10.046 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:41:10.049 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:10.052 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 03:41:10.055 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 400 null application/json; charset=utf-8 1157.9894ms
2025-05-03 03:41:32.066 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 64
2025-05-03 03:41:32.072 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:41:32.073 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:41:32.074 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:41:32.076 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:41:32.078 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:41:32.079 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:41:32.080 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:41:32.084 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:41:32.086 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:41:32.088 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:41:32.089 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:41:32.090 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:41:32.091 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:41:32.093 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:41:32.094 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:41:32.095 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:41:32.096 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:41:32.100 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000004": started reading request body.
2025-05-03 03:41:32.101 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000004": done reading request body.
2025-05-03 03:41:32.103 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:41:32.104 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:41:32.105 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:41:32.106 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:41:32.107 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:41:32.122 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:41:32.125 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:41:32.126 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 03:41:32.127 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:32.128 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:32.130 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:41:32.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 03:41:32.134 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-03 03:41:32.135 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:41:32.142 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:41:32.167 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:41:32.205 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:41:32.210 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:41:32.213 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:32.216 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 72ms reading results.
2025-05-03 03:41:32.218 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:32.218 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 03:41:32.459 +07:00 [INF] User nguyetnkhuyen@gmail.com logged in successfully
2025-05-03 03:41:32.462 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:41:32.464 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:41:32.464 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:41:32.465 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:41:32.465 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:41:32.466 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:41:32.469 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 378.225ms
2025-05-03 03:41:32.471 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:41:32.472 +07:00 [INF] HTTP POST /api/Auth/login responded 200 in 396.4383 ms
2025-05-03 03:41:32.473 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:41:32.474 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:41:32.475 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:41:32.476 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 03:41:32.477 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 200 null application/json; charset=utf-8 410.8209ms
2025-05-03 03:41:52.024 +07:00 [DBG] Connection id "0HNC9N6EGH0N0" received FIN.
2025-05-03 03:41:52.028 +07:00 [DBG] Connection id "0HNC9N6EGH0N0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:41:52.031 +07:00 [DBG] Connection id "0HNC9N6EGH0N0" disconnecting.
2025-05-03 03:41:52.032 +07:00 [DBG] Connection id "0HNC9N6EGH0N0" stopped.
2025-05-03 03:43:05.210 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 62
2025-05-03 03:43:05.214 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:43:05.216 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:43:05.218 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:43:05.219 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:43:05.249 +07:00 [DBG] Successfully validated the token.
2025-05-03 03:43:05.253 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 03:43:05.261 +07:00 [DBG] Authorization was successful.
2025-05-03 03:43:05.263 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:43:05.266 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 03:43:05.268 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:43:05.270 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:43:05.272 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:43:05.273 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:43:05.274 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:43:05.275 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:43:05.278 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:43:05.278 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:43:05.279 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 03:43:05.280 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:43:05.282 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000005": started reading request body.
2025-05-03 03:43:05.282 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000005": done reading request body.
2025-05-03 03:43:05.284 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 03:43:05.285 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:43:05.286 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:43:05.287 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:43:05.290 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:43:05.338 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:43:05.343 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-03 03:43:05.348 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-03 03:43:05.356 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:43:05.357 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 03:43:05.358 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.358 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.359 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:43:05.360 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:43:05.361 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:43:05.361 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:43:05.365 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:43:05.370 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.374 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.375 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.376 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.377 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.378 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.379 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-05-03 03:43:05.380 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.380 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 03:43:05.397 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.403 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.407 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:43:05.409 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:43:05.414 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 03:43:05.454 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.457 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.460 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:43:05.461 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:43:05.462 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:43:05.463 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:43:05.469 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:43:05.479 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 03:43:05.483 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.485 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-05-03 03:43:05.488 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.489 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:43:05.496 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:05.498 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 03:43:05.499 +07:00 [INF] Danh mục tạo: d2Fr8OMSEVk4AABvm52ExA1Z4dFE4d MVXJrH6 (ID=10) bởi CategoryService
2025-05-03 03:43:05.502 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:43:05.505 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 03:43:05.507 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 03:43:05.508 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:43:05.509 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:43:05.510 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:43:05.510 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 03:43:05.521 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[10],action=[Create],controller=[AdminCategories])
2025-05-03 03:43:05.526 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=10
2025-05-03 03:43:05.527 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=10
2025-05-03 03:43:05.530 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 255.0065ms
2025-05-03 03:43:05.531 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:43:05.532 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 312.8453 ms
2025-05-03 03:43:05.533 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:43:05.535 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:43:05.536 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:05.537 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 03:43:05.538 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 328.3716ms
2025-05-03 03:43:24.756 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 74
2025-05-03 03:43:24.760 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:43:24.761 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:43:24.763 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:43:24.764 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:43:24.766 +07:00 [DBG] Successfully validated the token.
2025-05-03 03:43:24.767 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 03:43:24.771 +07:00 [DBG] Authorization was successful.
2025-05-03 03:43:24.773 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:43:24.774 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 03:43:24.776 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:43:24.778 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:43:24.781 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:43:24.783 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:43:24.785 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:43:24.787 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:43:24.789 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:43:24.791 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:43:24.792 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 03:43:24.793 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:43:24.794 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000006": started reading request body.
2025-05-03 03:43:24.795 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000006": done reading request body.
2025-05-03 03:43:24.796 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 03:43:24.797 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:43:24.798 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:43:24.800 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:43:24.802 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:43:24.804 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:43:24.807 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:43:24.808 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-03 03:43:24.809 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.810 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.811 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:43:24.812 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:43:24.813 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:43:24.814 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:43:24.819 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:43:24.821 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.823 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.825 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.826 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.827 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.828 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.829 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.830 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 9ms reading results.
2025-05-03 03:43:24.831 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.832 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:43:24.835 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.837 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.838 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:43:24.839 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:43:24.840 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 03:43:24.841 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.842 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.843 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:43:24.844 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:43:24.845 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:43:24.846 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:43:24.850 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:43:24.853 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 03:43:24.854 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.856 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-05-03 03:43:24.858 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.859 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:43:24.860 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:43:24.861 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 03:43:24.862 +07:00 [INF] Danh mục tạo: o-X_VF8xZoy67cEqO3zRdaVkoPOOCG-AOu9kzvMJnMXcle5P8W (ID=11) bởi CategoryService
2025-05-03 03:43:24.863 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:43:24.865 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 03:43:24.867 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 03:43:24.868 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:43:24.869 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:43:24.870 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:43:24.871 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 03:43:24.872 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[11],action=[Create],controller=[AdminCategories])
2025-05-03 03:43:24.874 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=11
2025-05-03 03:43:24.875 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=11
2025-05-03 03:43:24.876 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 89.3744ms
2025-05-03 03:43:24.877 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:43:24.878 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 114.2234 ms
2025-05-03 03:43:24.879 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:43:24.880 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:43:24.881 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:43:24.882 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 03:43:24.884 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 127.6764ms
2025-05-03 03:44:03.667 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 41
2025-05-03 03:44:03.670 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:44:03.671 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:44:03.673 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:44:03.674 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:44:03.675 +07:00 [DBG] Successfully validated the token.
2025-05-03 03:44:03.679 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 03:44:03.682 +07:00 [DBG] Authorization was successful.
2025-05-03 03:44:03.684 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:44:03.686 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 03:44:03.688 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:44:03.689 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:44:03.690 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:44:03.692 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:44:03.693 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:44:03.694 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:44:03.700 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:44:03.701 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:44:03.702 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 03:44:03.703 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:44:03.704 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000007": started reading request body.
2025-05-03 03:44:03.705 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000007": done reading request body.
2025-05-03 03:44:03.706 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 03:44:03.706 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:44:03.707 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:44:03.708 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:44:03.709 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:44:03.712 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:44:03.714 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:44:03.715 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 03:44:03.716 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.717 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.718 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:44:03.718 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:44:03.719 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:44:03.720 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:44:03.723 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:44:03.725 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.726 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.727 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.729 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.731 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.732 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.733 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.734 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.735 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-05-03 03:44:03.736 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.737 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:44:03.738 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.740 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.741 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:44:03.741 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:44:03.742 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 03:44:03.743 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.745 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.747 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:44:03.748 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:44:03.749 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:44:03.749 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:44:03.754 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:44:03.756 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 03:44:03.757 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.758 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-05-03 03:44:03.759 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.761 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:44:03.763 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:03.765 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 03:44:03.766 +07:00 [INF] Danh mục tạo: Sẽ thành công (ID=12) bởi CategoryService
2025-05-03 03:44:03.767 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:44:03.768 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 03:44:03.769 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 03:44:03.770 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:44:03.771 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:44:03.771 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:44:03.772 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 03:44:03.773 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[12],action=[Create],controller=[AdminCategories])
2025-05-03 03:44:03.774 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=12
2025-05-03 03:44:03.775 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=12
2025-05-03 03:44:03.777 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 82.6998ms
2025-05-03 03:44:03.779 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:44:03.780 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 106.3814 ms
2025-05-03 03:44:03.781 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:44:03.783 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:44:03.783 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:03.784 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 03:44:03.785 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 117.8454ms
2025-05-03 03:44:55.281 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 31
2025-05-03 03:44:55.284 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:44:55.286 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:44:55.288 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:44:55.290 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:44:55.293 +07:00 [DBG] Successfully validated the token.
2025-05-03 03:44:55.294 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 03:44:55.295 +07:00 [DBG] Authorization was successful.
2025-05-03 03:44:55.296 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:44:55.299 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 03:44:55.304 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:44:55.309 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:44:55.311 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:44:55.313 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:44:55.314 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:44:55.315 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:44:55.316 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 03:44:55.317 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:44:55.318 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 03:44:55.319 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:44:55.320 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000008": started reading request body.
2025-05-03 03:44:55.321 +07:00 [DBG] Connection id "0HNC9N6EGH0MV", Request id "0HNC9N6EGH0MV:00000008": done reading request body.
2025-05-03 03:44:55.323 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 03:44:55.324 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:44:55.325 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:44:55.326 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 03:44:55.327 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 03:44:55.329 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:44:55.330 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:44:55.331 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 03:44:55.331 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.332 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.333 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:44:55.334 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:44:55.335 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:44:55.335 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:44:55.340 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 03:44:55.342 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.343 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.344 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.345 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.345 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.346 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.348 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.349 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.349 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.350 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 8ms reading results.
2025-05-03 03:44:55.352 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.353 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 03:44:55.355 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.356 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.357 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:44:55.358 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 03:44:55.359 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 03:44:55.361 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.362 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.363 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:44:55.364 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 03:44:55.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 03:44:55.366 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:44:55.369 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 03:44:55.372 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 03:44:55.373 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.374 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-05-03 03:44:55.376 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.377 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 03:44:55.378 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:44:55.379 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 03:44:55.380 +07:00 [INF] Danh mục tạo: yhgljhb (ID=13) bởi CategoryService
2025-05-03 03:44:55.381 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:44:55.382 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 03:44:55.383 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 03:44:55.384 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:44:55.385 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:44:55.385 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:44:55.386 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 03:44:55.387 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[13],action=[Create],controller=[AdminCategories])
2025-05-03 03:44:55.389 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=13
2025-05-03 03:44:55.390 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=13
2025-05-03 03:44:55.392 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 77.0511ms
2025-05-03 03:44:55.393 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:44:55.394 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 104.4323 ms
2025-05-03 03:44:55.396 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" completed keep alive response.
2025-05-03 03:44:55.397 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:44:55.397 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:44:55.398 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 03:44:55.399 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 118.5248ms
2025-05-03 03:47:06.420 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" disconnecting.
2025-05-03 03:47:06.426 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" stopped.
2025-05-03 03:47:06.427 +07:00 [DBG] Connection id "0HNC9N6EGH0MV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:47:47.886 +07:00 [INF] Application is shutting down...
2025-05-03 03:47:47.887 +07:00 [DBG] Hosting stopping
2025-05-03 03:47:47.895 +07:00 [DBG] Hosting stopped
2025-05-03 03:48:01.402 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 03:48:01.484 +07:00 [DBG] Hosting starting
2025-05-03 03:48:01.495 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 03:48:01.506 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 03:48:01.514 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 03:48:01.523 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 03:48:01.526 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:48:01.529 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 03:48:01.533 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 03:48:01.539 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 03:48:01.540 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 03:48:01.542 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 03:48:01.543 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 03:48:01.586 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 03:48:01.588 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 03:48:01.589 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 03:48:01.590 +07:00 [INF] Hosting environment: Development
2025-05-03 03:48:01.590 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 03:48:01.591 +07:00 [DBG] Hosting started
2025-05-03 03:48:08.148 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" accepted.
2025-05-03 03:48:08.152 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" started.
2025-05-03 03:48:08.152 +07:00 [DBG] Connection id "0HNC9NAIFR0O1" accepted.
2025-05-03 03:48:08.156 +07:00 [DBG] Connection id "0HNC9NAIFR0O1" started.
2025-05-03 03:48:08.178 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 03:48:08.186 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 03:48:08.199 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 03:48:08.203 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:48:08.274 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 68.4035 ms
2025-05-03 03:48:08.280 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" completed keep alive response.
2025-05-03 03:48:08.284 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 107.1323ms
2025-05-03 03:48:08.736 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 03:48:08.742 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 03:48:08.746 +07:00 [DBG] Request did not match any endpoints
2025-05-03 03:48:08.895 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 146.7208 ms
2025-05-03 03:48:08.897 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" completed keep alive response.
2025-05-03 03:48:08.898 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.9717ms
2025-05-03 03:48:46.452 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 64
2025-05-03 03:48:46.460 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 03:48:46.467 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 03:48:46.472 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:48:46.476 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:48:46.480 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 03:48:46.500 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 03:48:46.503 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:48:46.523 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 03:48:46.526 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 03:48:46.529 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 03:48:46.532 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 03:48:46.534 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 03:48:46.535 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 03:48:46.537 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:48:46.597 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 03:48:46.615 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 03:48:46.621 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:48:46.626 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 03:48:46.629 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 03:48:46.652 +07:00 [DBG] Connection id "0HNC9NAIFR0O0", Request id "0HNC9NAIFR0O0:00000003": started reading request body.
2025-05-03 03:48:46.655 +07:00 [DBG] Connection id "0HNC9NAIFR0O0", Request id "0HNC9NAIFR0O0:00000003": done reading request body.
2025-05-03 03:48:46.667 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 03:48:46.668 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:48:46.670 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:48:46.672 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 03:48:46.679 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 03:48:47.003 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:48:47.006 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 03:48:47.107 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 03:48:47.149 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 03:48:47.194 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 03:48:47.353 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 03:48:47.399 +07:00 [DBG] Creating DbConnection.
2025-05-03 03:48:47.418 +07:00 [DBG] Created DbConnection. (16ms).
2025-05-03 03:48:47.422 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:48:47.529 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:48:47.535 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 03:48:47.543 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-03 03:48:47.550 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-05-03 03:48:47.556 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:48:47.590 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 03:48:47.620 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:48:47.657 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:48:47.665 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 03:48:47.675 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:48:47.683 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 83ms reading results.
2025-05-03 03:48:47.686 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:48:47.691 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 03:48:47.923 +07:00 [INF] User nguyetnkhuyen@gmail.com logged in successfully
2025-05-03 03:48:47.928 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 03:48:47.931 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 03:48:47.932 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 03:48:47.934 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 03:48:47.937 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 03:48:47.938 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 03:48:47.954 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 1416.2756ms
2025-05-03 03:48:47.957 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 03:48:47.961 +07:00 [INF] HTTP POST /api/Auth/login responded 200 in 1486.3315 ms
2025-05-03 03:48:47.964 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" completed keep alive response.
2025-05-03 03:48:47.966 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 03:48:47.969 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 03:48:47.972 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 03:48:47.975 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 200 null application/json; charset=utf-8 1522.2922ms
2025-05-03 03:49:12.232 +07:00 [DBG] Connection id "0HNC9NAIFR0O1" received FIN.
2025-05-03 03:49:12.235 +07:00 [DBG] Connection id "0HNC9NAIFR0O1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:49:12.236 +07:00 [DBG] Connection id "0HNC9NAIFR0O1" disconnecting.
2025-05-03 03:49:12.239 +07:00 [DBG] Connection id "0HNC9NAIFR0O1" stopped.
2025-05-03 03:50:59.763 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" disconnecting.
2025-05-03 03:50:59.765 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" stopped.
2025-05-03 03:50:59.767 +07:00 [DBG] Connection id "0HNC9NAIFR0O0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:52:54.770 +07:00 [DBG] Connection id "0HNC9NAIFR0O2" accepted.
2025-05-03 03:52:54.772 +07:00 [DBG] Connection id "0HNC9NAIFR0O2" started.
2025-05-03 03:52:54.775 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 44
2025-05-03 03:52:54.780 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 03:52:54.782 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 03:52:54.784 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 03:52:54.788 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 03:52:54.820 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '5/2/2025 8:49:47 PM', Current time (UTC): '5/2/2025 8:52:54 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-03 03:52:54.834 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '5/2/2025 8:49:47 PM', Current time (UTC): '5/2/2025 8:52:54 PM'.
2025-05-03 03:52:54.838 +07:00 [DBG] Policy authentication schemes  did not succeed
2025-05-03 03:52:54.841 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-03 03:52:54.848 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-03 03:52:54.850 +07:00 [INF] HTTP POST /api/admin/categories responded 401 in 62.1312 ms
2025-05-03 03:52:54.854 +07:00 [DBG] Connection id "0HNC9NAIFR0O2" completed keep alive response.
2025-05-03 03:52:54.855 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 401 0 null 80.0183ms
2025-05-03 03:52:54.858 +07:00 [DBG] Connection id "0HNC9NAIFR0O2", Request id "0HNC9NAIFR0O2:00000001": started reading request body.
2025-05-03 03:52:54.861 +07:00 [DBG] Connection id "0HNC9NAIFR0O2", Request id "0HNC9NAIFR0O2:00000001": done reading request body.
2025-05-03 03:52:58.159 +07:00 [DBG] Connection id "0HNC9NAIFR0O2" received FIN.
2025-05-03 03:52:58.160 +07:00 [DBG] Connection id "0HNC9NAIFR0O2" disconnecting.
2025-05-03 03:52:58.162 +07:00 [DBG] Connection id "0HNC9NAIFR0O2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 03:52:58.175 +07:00 [DBG] Connection id "0HNC9NAIFR0O2" stopped.
2025-05-03 03:54:16.124 +07:00 [INF] Application is shutting down...
2025-05-03 03:54:16.125 +07:00 [DBG] Hosting stopping
2025-05-03 03:54:16.131 +07:00 [DBG] Hosting stopped
2025-05-03 15:09:23.276 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 15:09:23.507 +07:00 [DBG] Hosting starting
2025-05-03 15:09:23.519 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 15:09:23.532 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 15:09:23.556 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 15:09:23.564 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 15:09:23.569 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 15:09:23.572 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 15:09:23.573 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 15:09:23.582 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 15:09:23.584 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 15:09:23.586 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 15:09:23.589 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 15:09:23.631 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 15:09:23.634 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 15:09:23.635 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 15:09:23.635 +07:00 [INF] Hosting environment: Development
2025-05-03 15:09:23.636 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 15:09:23.637 +07:00 [DBG] Hosting started
2025-05-03 15:09:27.550 +07:00 [INF] Application is shutting down...
2025-05-03 15:09:27.551 +07:00 [DBG] Hosting stopping
2025-05-03 15:09:27.566 +07:00 [DBG] Hosting stopped
2025-05-03 15:10:18.532 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 15:10:18.613 +07:00 [DBG] Hosting starting
2025-05-03 15:10:18.625 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 15:10:18.641 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 15:10:18.651 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 15:10:18.665 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 15:10:18.670 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 15:10:18.674 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 15:10:18.679 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 15:10:18.688 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 15:10:18.691 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 15:10:18.695 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 15:10:18.698 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 15:10:18.740 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 15:10:18.742 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 15:10:18.743 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 15:10:18.744 +07:00 [INF] Hosting environment: Development
2025-05-03 15:10:18.745 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User)\ExchangeDocument
2025-05-03 15:10:18.746 +07:00 [DBG] Hosting started
2025-05-03 15:13:16.057 +07:00 [DBG] Connection id "0HNCA39DJD1A4" accepted.
2025-05-03 15:13:16.059 +07:00 [DBG] Connection id "0HNCA39DJD1A4" started.
2025-05-03 15:13:16.136 +07:00 [DBG] Connection id "0HNCA39DJD1A5" accepted.
2025-05-03 15:13:16.138 +07:00 [DBG] Connection id "0HNCA39DJD1A5" started.
2025-05-03 15:13:16.172 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 15:13:16.179 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 15:13:16.202 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 15:13:16.204 +07:00 [DBG] Request did not match any endpoints
2025-05-03 15:13:16.293 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 85.3534 ms
2025-05-03 15:13:16.299 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:13:16.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 131.868ms
2025-05-03 15:13:17.082 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 15:13:17.086 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 15:13:17.088 +07:00 [DBG] Request did not match any endpoints
2025-05-03 15:13:17.235 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 144.9830 ms
2025-05-03 15:13:17.237 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:13:17.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 156.5563ms
2025-05-03 15:13:45.945 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/login - application/json 64
2025-05-03 15:13:45.951 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-03 15:13:45.958 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-03 15:13:45.961 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 15:13:45.966 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 15:13:45.970 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 15:13:46.007 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 15:13:46.010 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 15:13:46.039 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 15:13:46.044 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 15:13:46.048 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 15:13:46.050 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 15:13:46.054 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 15:13:46.055 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 15:13:46.058 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 15:13:46.155 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 15:13:46.171 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 15:13:46.178 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 15:13:46.182 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' using the name '' in request data ...
2025-05-03 15:13:46.184 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 15:13:46.207 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000003": started reading request body.
2025-05-03 15:13:46.209 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000003": done reading request body.
2025-05-03 15:13:46.222 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'
2025-05-03 15:13:46.223 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 15:13:46.225 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 15:13:46.226 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO' ...
2025-05-03 15:13:46.237 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.LoginRequestDTO'.
2025-05-03 15:13:46.621 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 15:13:46.623 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 15:13:46.726 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 15:13:46.922 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 15:13:46.969 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 15:13:47.147 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 15:13:47.195 +07:00 [DBG] Creating DbConnection.
2025-05-03 15:13:47.215 +07:00 [DBG] Created DbConnection. (18ms).
2025-05-03 15:13:47.219 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:13:47.417 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:13:47.421 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 15:13:47.428 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-03 15:13:47.434 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-05-03 15:13:47.439 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 15:13:47.487 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 15:13:47.515 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:13:47.549 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:13:47.553 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:13:47.561 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:13:47.569 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 75ms reading results.
2025-05-03 15:13:47.572 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:13:47.578 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (5ms).
2025-05-03 15:13:47.842 +07:00 [INF] User nguyetnkhuyen@gmail.com logged in successfully
2025-05-03 15:13:47.846 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 15:13:47.849 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 15:13:47.850 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 15:13:47.851 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 15:13:47.853 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 15:13:47.854 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 15:13:47.871 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument) in 1812.4209ms
2025-05-03 15:13:47.873 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Login (ExchangeDocument)'
2025-05-03 15:13:47.874 +07:00 [INF] HTTP POST /api/Auth/login responded 200 in 1909.8926 ms
2025-05-03 15:13:47.876 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:13:47.879 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 15:13:47.882 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:13:47.885 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-03 15:13:47.887 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/login - 200 null application/json; charset=utf-8 1941.4933ms
2025-05-03 15:14:20.660 +07:00 [DBG] Connection id "0HNCA39DJD1A5" received FIN.
2025-05-03 15:14:20.660 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 29
2025-05-03 15:14:20.663 +07:00 [DBG] Connection id "0HNCA39DJD1A5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 15:14:20.666 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 15:14:20.667 +07:00 [DBG] Connection id "0HNCA39DJD1A5" disconnecting.
2025-05-03 15:14:20.668 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 15:14:20.671 +07:00 [DBG] Connection id "0HNCA39DJD1A5" stopped.
2025-05-03 15:14:20.675 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:14:20.679 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 15:14:20.712 +07:00 [DBG] Successfully validated the token.
2025-05-03 15:14:20.718 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 15:14:20.722 +07:00 [DBG] Authorization was successful.
2025-05-03 15:14:20.725 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:14:20.730 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 15:14:20.732 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 15:14:20.733 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 15:14:20.734 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 15:14:20.736 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 15:14:20.737 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 15:14:20.738 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 15:14:20.742 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 15:14:20.743 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 15:14:20.745 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 15:14:20.746 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 15:14:20.748 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000004": started reading request body.
2025-05-03 15:14:20.749 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000004": done reading request body.
2025-05-03 15:14:20.750 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 15:14:20.751 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:14:20.752 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:14:20.752 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 15:14:20.754 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:14:20.769 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 15:14:20.774 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-03 15:14:20.780 +07:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
        SELECT c.categoryId, c.categoryName
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-03 15:14:20.790 +07:00 [DBG] Creating DbConnection.
2025-05-03 15:14:20.792 +07:00 [DBG] Created DbConnection. (2ms).
2025-05-03 15:14:20.793 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.794 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.795 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 15:14:20.796 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 15:14:20.797 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 15:14:20.797 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 15:14:20.803 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 15:14:20.810 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.815 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.816 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.818 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.819 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.820 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.820 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.822 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.825 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.827 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.828 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 23ms reading results.
2025-05-03 15:14:20.829 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.830 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 15:14:20.848 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.853 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.859 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 15:14:20.862 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 15:14:20.867 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 15:14:20.915 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.918 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.920 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 15:14:20.920 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 15:14:20.921 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 15:14:20.923 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 15:14:20.928 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 15:14:20.937 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 15:14:20.942 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.943 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-05-03 15:14:20.945 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:20.946 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 15:14:20.953 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:14:20.956 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 15:14:20.959 +07:00 [INF] Danh mục tạo: 2 day (ID=14) bởi CategoryService
2025-05-03 15:14:20.961 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 15:14:20.963 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 15:14:20.965 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 15:14:20.965 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 15:14:20.966 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 15:14:20.967 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 15:14:20.967 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 15:14:20.985 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[14],action=[Create],controller=[AdminCategories])
2025-05-03 15:14:20.988 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=14
2025-05-03 15:14:20.993 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=14
2025-05-03 15:14:20.997 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 258.8149ms
2025-05-03 15:14:20.998 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:14:20.999 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 320.0304 ms
2025-05-03 15:14:21.000 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:14:21.001 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 15:14:21.002 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:14:21.003 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 15:14:21.004 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 343.7011ms
2025-05-03 15:15:30.776 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 44
2025-05-03 15:15:30.780 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 15:15:30.783 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 15:15:30.785 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:15:30.808 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 15:15:30.812 +07:00 [DBG] Successfully validated the token.
2025-05-03 15:15:30.818 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 15:15:30.822 +07:00 [DBG] Authorization was successful.
2025-05-03 15:15:30.823 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:15:30.824 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 15:15:30.827 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 15:15:30.828 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 15:15:30.830 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 15:15:30.834 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 15:15:30.836 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 15:15:30.838 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 15:15:30.840 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 15:15:30.843 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 15:15:30.844 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 15:15:30.845 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 15:15:30.847 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000005": started reading request body.
2025-05-03 15:15:30.848 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000005": done reading request body.
2025-05-03 15:15:30.850 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 15:15:30.850 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:15:30.852 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:15:30.853 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 15:15:30.854 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:15:30.856 +07:00 [DBG] The request has model state errors, returning an error response.
2025-05-03 15:15:30.857 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-05-03 15:15:30.859 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 15:15:30.861 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-05-03 15:15:30.864 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 15:15:30.865 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-05-03 15:15:30.868 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-05-03 15:15:30.869 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-03 15:15:30.889 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 51.3116ms
2025-05-03 15:15:30.891 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:15:30.892 +07:00 [INF] HTTP POST /api/admin/categories responded 400 in 84.5760 ms
2025-05-03 15:15:30.894 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:15:30.897 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 400 null application/problem+json; charset=utf-8 120.8749ms
2025-05-03 15:15:38.933 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 44
2025-05-03 15:15:38.937 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 15:15:38.941 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 15:15:38.944 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:15:38.946 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 15:15:38.948 +07:00 [DBG] Successfully validated the token.
2025-05-03 15:15:38.957 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 15:15:38.972 +07:00 [DBG] Authorization was successful.
2025-05-03 15:15:38.974 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:15:38.975 +07:00 [INF] Route matched with {action = "Create", controller = "AdminCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.CategoryDto]] Create(ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument).
2025-05-03 15:15:38.984 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 15:15:38.986 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 15:15:38.988 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 15:15:38.991 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 15:15:38.992 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 15:15:38.995 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 15:15:39.001 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController (ExchangeDocument)
2025-05-03 15:15:39.002 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 15:15:39.003 +07:00 [DBG] Attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' using the name '' in request data ...
2025-05-03 15:15:39.005 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 15:15:39.006 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000006": started reading request body.
2025-05-03 15:15:39.007 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000006": done reading request body.
2025-05-03 15:15:39.008 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'
2025-05-03 15:15:39.010 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:15:39.011 +07:00 [DBG] Done attempting to bind parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:15:39.014 +07:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto' ...
2025-05-03 15:15:39.016 +07:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryCreateDto'.
2025-05-03 15:15:39.066 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 15:15:39.069 +07:00 [DBG] Creating DbConnection.
2025-05-03 15:15:39.070 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 15:15:39.070 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.072 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.073 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 15:15:39.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 15:15:39.074 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 15:15:39.075 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 15:15:39.085 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
2025-05-03 15:15:39.087 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.088 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.089 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.090 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.092 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.093 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.094 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.096 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.098 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.099 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.101 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.102 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 15ms reading results.
2025-05-03 15:15:39.104 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.105 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 15:15:39.107 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Category.CategoryId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.108 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.110 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 15:15:39.111 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 15:15:39.112 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 15:15:39.114 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.115 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.117 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 15:15:39.117 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 15:15:39.118 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 15:15:39.120 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 15:15:39.128 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([categoryName])
OUTPUT INSERTED.[categoryId]
VALUES (@p0);
2025-05-03 15:15:39.132 +07:00 [DBG] The foreign key property 'Category.CategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 15:15:39.134 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.135 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-05-03 15:15:39.136 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.137 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 15:15:39.139 +07:00 [DBG] An entity of type 'Category' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 15:15:39.140 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 15:15:39.142 +07:00 [INF] Danh mục tạo: 1 day xong Auth_User (ID=15) bởi CategoryService
2025-05-03 15:15:39.143 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 15:15:39.145 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-03 15:15:39.147 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-03 15:15:39.148 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 15:15:39.148 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 15:15:39.149 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 15:15:39.150 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.CategoryDto'.
2025-05-03 15:15:39.151 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] for address (id=[15],action=[Create],controller=[AdminCategories])
2025-05-03 15:15:39.153 +07:00 [DBG] Successfully processed template api/admin/categories for ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) resulting in /api/admin/categories and ?id=15
2025-05-03 15:15:39.154 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)"] with result /api/admin/categories?id=15
2025-05-03 15:15:39.155 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument) in 160.8609ms
2025-05-03 15:15:39.156 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:15:39.157 +07:00 [INF] HTTP POST /api/admin/categories responded 201 in 211.1004 ms
2025-05-03 15:15:39.158 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:15:39.159 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 15:15:39.160 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 15:15:39.161 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 15:15:39.162 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 201 null application/json; charset=utf-8 229.4719ms
2025-05-03 15:15:46.059 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/logout - null 0
2025-05-03 15:15:46.063 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/logout'
2025-05-03 15:15:46.066 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Logout (ExchangeDocument)' with route pattern 'api/Auth/logout' is valid for the request path '/api/Auth/logout'
2025-05-03 15:15:46.068 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Logout (ExchangeDocument)'
2025-05-03 15:15:46.089 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 15:15:46.092 +07:00 [DBG] Successfully validated the token.
2025-05-03 15:15:46.100 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-03 15:15:46.102 +07:00 [DBG] Authorization was successful.
2025-05-03 15:15:46.104 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Logout (ExchangeDocument)'
2025-05-03 15:15:46.107 +07:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 15:15:46.110 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 15:15:46.112 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 15:15:46.113 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 15:15:46.115 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 15:15:46.116 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 15:15:46.117 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 15:15:46.119 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 15:15:46.121 +07:00 [INF] Adding JTI c1772243-5a1d-40ac-9601-acd9afa4e8a3 to memory cache blacklist, expires in "00:58:00.8788788"
2025-05-03 15:15:46.123 +07:00 [INF] Blacklisted token with JTI c1772243-5a1d-40ac-9601-acd9afa4e8a3 until "2025-05-03T09:13:47.0000000Z"
2025-05-03 15:15:46.124 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 15:15:46.126 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 15:15:46.127 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 15:15:46.128 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 15:15:46.129 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 15:15:46.130 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 15:15:46.132 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.Logout (ExchangeDocument) in 14.8954ms
2025-05-03 15:15:46.133 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.Logout (ExchangeDocument)'
2025-05-03 15:15:46.134 +07:00 [INF] HTTP POST /api/Auth/logout responded 200 in 44.9563 ms
2025-05-03 15:15:46.135 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:15:46.136 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/logout - 200 null application/json; charset=utf-8 77.3091ms
2025-05-03 15:16:01.426 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/admin/categories - application/json 35
2025-05-03 15:16:01.429 +07:00 [DBG] 1 candidate(s) found for the request path '/api/admin/categories'
2025-05-03 15:16:01.430 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)' with route pattern 'api/admin/categories' is valid for the request path '/api/admin/categories'
2025-05-03 15:16:01.432 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AdminCategoriesController.Create (ExchangeDocument)'
2025-05-03 15:16:01.434 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 15:16:01.436 +07:00 [DBG] Successfully validated the token.
2025-05-03 15:16:01.437 +07:00 [WRN] JTI c1772243-5a1d-40ac-9601-acd9afa4e8a3 found in memory cache blacklist.
2025-05-03 15:16:01.438 +07:00 [INF] Bearer was not authenticated. Failure message: Token has been revoked.
2025-05-03 15:16:01.442 +07:00 [DBG] Policy authentication schemes  did not succeed
2025-05-03 15:16:01.446 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-03 15:16:01.451 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-03 15:16:01.453 +07:00 [INF] HTTP POST /api/admin/categories responded 401 in 18.8226 ms
2025-05-03 15:16:01.455 +07:00 [DBG] Connection id "0HNCA39DJD1A4" completed keep alive response.
2025-05-03 15:16:01.456 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/admin/categories - 401 0 null 30.7817ms
2025-05-03 15:16:01.460 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000008": started reading request body.
2025-05-03 15:16:01.463 +07:00 [DBG] Connection id "0HNCA39DJD1A4", Request id "0HNCA39DJD1A4:00000008": done reading request body.
2025-05-03 15:18:05.460 +07:00 [DBG] Connection id "0HNCA39DJD1A4" received FIN.
2025-05-03 15:18:05.462 +07:00 [DBG] Connection id "0HNCA39DJD1A4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 15:18:05.463 +07:00 [DBG] Connection id "0HNCA39DJD1A4" disconnecting.
2025-05-03 15:18:05.476 +07:00 [DBG] Connection id "0HNCA39DJD1A4" stopped.
2025-05-03 19:45:42.125 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 19:45:42.359 +07:00 [DBG] Hosting starting
2025-05-03 19:45:42.391 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 19:45:42.407 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 19:45:42.472 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 19:45:42.483 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 19:45:42.489 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 19:45:42.492 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 19:45:42.494 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 19:45:42.499 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 19:45:42.501 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 19:45:42.504 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 19:45:42.505 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 19:45:42.565 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 19:45:42.567 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 19:45:42.569 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 19:45:42.570 +07:00 [INF] Hosting environment: Development
2025-05-03 19:45:42.571 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User) - Đã làm logout(2)\ExchangeDocument
2025-05-03 19:45:42.571 +07:00 [DBG] Hosting started
2025-05-03 19:45:55.706 +07:00 [DBG] Connection id "0HNCA81P560RB" accepted.
2025-05-03 19:45:55.709 +07:00 [DBG] Connection id "0HNCA81P560RB" started.
2025-05-03 19:45:55.710 +07:00 [DBG] Connection id "0HNCA81P560RC" accepted.
2025-05-03 19:45:55.715 +07:00 [DBG] Connection id "0HNCA81P560RC" started.
2025-05-03 19:45:56.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 19:45:56.732 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 19:45:56.755 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 19:45:56.772 +07:00 [DBG] Request did not match any endpoints
2025-05-03 19:45:56.929 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 151.1468 ms
2025-05-03 19:45:56.933 +07:00 [DBG] Connection id "0HNCA81P560RB" completed keep alive response.
2025-05-03 19:45:56.936 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 209.8895ms
2025-05-03 19:46:53.477 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - application/json 40
2025-05-03 19:46:53.489 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/forgot-password'
2025-05-03 19:46:53.501 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)' with route pattern 'api/Auth/forgot-password' is valid for the request path '/api/Auth/forgot-password'
2025-05-03 19:46:53.504 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 19:46:53.512 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 19:46:53.516 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 19:46:53.546 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 19:46:53.550 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 19:46:53.570 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 19:46:53.578 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 19:46:53.579 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 19:46:53.581 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 19:46:53.582 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 19:46:53.584 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 19:46:53.586 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 19:46:53.680 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 19:46:53.702 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 19:46:53.708 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 19:46:53.713 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' using the name '' in request data ...
2025-05-03 19:46:53.715 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 19:46:53.758 +07:00 [DBG] Connection id "0HNCA81P560RB", Request id "0HNCA81P560RB:00000002": started reading request body.
2025-05-03 19:46:53.759 +07:00 [DBG] Connection id "0HNCA81P560RB", Request id "0HNCA81P560RB:00000002": done reading request body.
2025-05-03 19:46:53.768 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'
2025-05-03 19:46:53.769 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 19:46:53.771 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 19:46:53.771 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 19:46:53.782 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 19:46:54.127 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 19:46:54.130 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 19:46:54.233 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 19:46:54.426 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 19:46:54.473 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 19:46:54.638 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 19:46:54.687 +07:00 [DBG] Creating DbConnection.
2025-05-03 19:46:54.704 +07:00 [DBG] Created DbConnection. (16ms).
2025-05-03 19:46:54.710 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:54.891 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:54.896 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 19:46:54.900 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-03 19:46:54.908 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-05-03 19:46:54.913 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 19:46:54.959 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 19:46:54.986 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:46:55.026 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:46:55.032 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:46:55.040 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:55.047 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 80ms reading results.
2025-05-03 19:46:55.050 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:55.055 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 19:46:55.060 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 19:46:55.064 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 19:46:55.074 +07:00 [DBG] The unchanged property 'User.PasswordResetToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 19:46:55.082 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:46:55.085 +07:00 [DBG] The unchanged property 'User.ResetTokenExpires' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 19:46:55.094 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 19:46:55.128 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:55.133 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:55.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 19:46:55.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 19:46:55.139 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 19:46:55.141 +07:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [PasswordResetToken] = @p0, [ResetTokenExpires] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 19:46:55.148 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [PasswordResetToken] = @p0, [ResetTokenExpires] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 19:46:55.153 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:55.154 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 4ms reading results.
2025-05-03 19:46:55.157 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:55.158 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 19:46:55.162 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:46:55.166 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 19:46:55.168 +07:00 [INF] Generated password reset token for nguyetnkhuyen@gmail.com
2025-05-03 19:46:58.769 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 19:46:58.774 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 19:46:58.774 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 19:46:58.776 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 19:46:58.778 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 19:46:58.781 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 19:46:58.801 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument) in 5214.1885ms
2025-05-03 19:46:58.804 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 19:46:58.808 +07:00 [INF] HTTP POST /api/Auth/forgot-password responded 200 in 5298.9788 ms
2025-05-03 19:46:58.811 +07:00 [DBG] Connection id "0HNCA81P560RB" completed keep alive response.
2025-05-03 19:46:58.814 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 19:46:58.818 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:46:58.823 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-03 19:46:58.825 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - 200 null application/json; charset=utf-8 5347.6429ms
2025-05-03 19:47:56.581 +07:00 [DBG] Connection id "0HNCA81P560RC" received FIN.
2025-05-03 19:47:56.581 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - application/json 119
2025-05-03 19:47:56.585 +07:00 [DBG] Connection id "0HNCA81P560RC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 19:47:56.587 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/reset-password'
2025-05-03 19:47:56.588 +07:00 [DBG] Connection id "0HNCA81P560RC" disconnecting.
2025-05-03 19:47:56.596 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)' with route pattern 'api/Auth/reset-password' is valid for the request path '/api/Auth/reset-password'
2025-05-03 19:47:56.612 +07:00 [DBG] Connection id "0HNCA81P560RC" stopped.
2025-05-03 19:47:56.620 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 19:47:56.625 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 19:47:56.626 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 19:47:56.628 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 19:47:56.633 +07:00 [INF] Route matched with {action = "ResetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 19:47:56.635 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 19:47:56.636 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 19:47:56.637 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 19:47:56.639 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 19:47:56.640 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 19:47:56.641 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 19:47:56.643 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 19:47:56.644 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 19:47:56.646 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' using the name '' in request data ...
2025-05-03 19:47:56.647 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 19:47:56.650 +07:00 [DBG] Connection id "0HNCA81P560RB", Request id "0HNCA81P560RB:00000003": started reading request body.
2025-05-03 19:47:56.651 +07:00 [DBG] Connection id "0HNCA81P560RB", Request id "0HNCA81P560RB:00000003": done reading request body.
2025-05-03 19:47:56.653 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'
2025-05-03 19:47:56.654 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 19:47:56.654 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 19:47:56.655 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 19:47:56.657 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 19:47:56.671 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 19:47:56.673 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.PasswordResetToken == __token_0)'
2025-05-03 19:47:56.675 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 19:47:56.684 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.PasswordResetToken == @__token_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.PasswordResetToken == @__token_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 19:47:56.706 +07:00 [DBG] Creating DbConnection.
2025-05-03 19:47:56.707 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 19:47:56.708 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:56.709 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:56.710 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 19:47:56.710 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 19:47:56.711 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 19:47:56.712 +07:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 19:47:56.733 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 19:47:56.738 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:47:56.739 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:47:56.741 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:47:56.743 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:56.744 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 7ms reading results.
2025-05-03 19:47:56.745 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:56.746 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 19:47:57.051 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 19:47:57.053 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 19:47:57.054 +07:00 [DBG] The unchanged property 'User.Password' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 19:47:57.055 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:47:57.056 +07:00 [DBG] The unchanged property 'User.PasswordResetToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 19:47:57.057 +07:00 [DBG] The unchanged property 'User.ResetTokenExpires' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 19:47:57.058 +07:00 [DBG] The unchanged property 'User.UpdatedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 19:47:57.060 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 19:47:57.061 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:57.062 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:57.063 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 19:47:57.065 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 19:47:57.067 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 19:47:57.068 +07:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [password] = @p0, [PasswordResetToken] = @p1, [ResetTokenExpires] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [userId] = @p4;
2025-05-03 19:47:57.075 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [password] = @p0, [PasswordResetToken] = @p1, [ResetTokenExpires] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [userId] = @p4;
2025-05-03 19:47:57.077 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:57.078 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-05-03 19:47:57.079 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:57.080 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 19:47:57.082 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 19:47:57.084 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 19:47:57.085 +07:00 [INF] Password reset successfully for nguyetnkhuyen@gmail.com
2025-05-03 19:47:57.086 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 19:47:57.087 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 19:47:57.088 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 19:47:57.088 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 19:47:57.089 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 19:47:57.090 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 19:47:57.091 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument) in 450.4736ms
2025-05-03 19:47:57.092 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 19:47:57.093 +07:00 [INF] HTTP POST /api/Auth/reset-password responded 200 in 468.6784 ms
2025-05-03 19:47:57.094 +07:00 [DBG] Connection id "0HNCA81P560RB" completed keep alive response.
2025-05-03 19:47:57.095 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 19:47:57.096 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 19:47:57.097 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 19:47:57.099 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - 200 null application/json; charset=utf-8 517.524ms
2025-05-03 19:50:07.679 +07:00 [DBG] Connection id "0HNCA81P560RB" disconnecting.
2025-05-03 19:50:07.681 +07:00 [DBG] Connection id "0HNCA81P560RB" stopped.
2025-05-03 19:50:07.682 +07:00 [DBG] Connection id "0HNCA81P560RB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 19:51:28.330 +07:00 [INF] Application is shutting down...
2025-05-03 19:51:28.331 +07:00 [DBG] Hosting stopping
2025-05-03 19:51:28.338 +07:00 [DBG] Hosting stopped
2025-05-03 20:21:48.631 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-03 20:21:48.717 +07:00 [DBG] Hosting starting
2025-05-03 20:21:48.731 +07:00 [INF] User profile is available. Using 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-03 20:21:48.744 +07:00 [DBG] Reading data from file 'C:\Users\KHOA\AppData\Local\ASP.NET\DataProtection-Keys\key-1a51a872-ea43-4350-815f-0422835a65dd.xml'.
2025-05-03 20:21:48.753 +07:00 [DBG] Found key {1a51a872-ea43-4350-815f-0422835a65dd}.
2025-05-03 20:21:48.762 +07:00 [DBG] Considering key {1a51a872-ea43-4350-815f-0422835a65dd} with expiration date 2025-07-05 19:31:04Z as default key.
2025-05-03 20:21:48.768 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 20:21:48.773 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-03 20:21:48.775 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-03 20:21:48.783 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-03 20:21:48.786 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-03 20:21:48.790 +07:00 [DBG] Using key {1a51a872-ea43-4350-815f-0422835a65dd} as the default key.
2025-05-03 20:21:48.791 +07:00 [DBG] Key ring with default key {1a51a872-ea43-4350-815f-0422835a65dd} was loaded during application startup.
2025-05-03 20:21:48.833 +07:00 [INF] Now listening on: http://localhost:5120
2025-05-03 20:21:48.836 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-05-03 20:21:48.838 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-03 20:21:48.839 +07:00 [INF] Hosting environment: Development
2025-05-03 20:21:48.841 +07:00 [INF] Content root path: D:\Gộp module Auth\ExchangeDocument(Tự làm Auth_User) - Đã làm logout(2)\ExchangeDocument
2025-05-03 20:21:48.842 +07:00 [DBG] Hosting started
2025-05-03 20:23:25.704 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" accepted.
2025-05-03 20:23:25.709 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" started.
2025-05-03 20:23:25.710 +07:00 [DBG] Connection id "0HNCA8MNMQU4H" accepted.
2025-05-03 20:23:25.714 +07:00 [DBG] Connection id "0HNCA8MNMQU4H" started.
2025-05-03 20:23:25.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-05-03 20:23:25.748 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-03 20:23:25.764 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-03 20:23:25.766 +07:00 [DBG] Request did not match any endpoints
2025-05-03 20:23:25.849 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 79.8949 ms
2025-05-03 20:23:25.853 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:23:25.856 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 118.2446ms
2025-05-03 20:23:26.775 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-05-03 20:23:26.779 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-03 20:23:26.780 +07:00 [DBG] Request did not match any endpoints
2025-05-03 20:23:26.931 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 150.1427 ms
2025-05-03 20:23:26.934 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:23:26.936 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.5367ms
2025-05-03 20:24:32.048 +07:00 [DBG] Connection id "0HNCA8MNMQU4H" received FIN.
2025-05-03 20:24:32.053 +07:00 [DBG] Connection id "0HNCA8MNMQU4H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 20:24:32.055 +07:00 [DBG] Connection id "0HNCA8MNMQU4H" disconnecting.
2025-05-03 20:24:32.057 +07:00 [DBG] Connection id "0HNCA8MNMQU4H" stopped.
2025-05-03 20:25:37.804 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - application/json 33
2025-05-03 20:25:37.813 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/forgot-password'
2025-05-03 20:25:37.824 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)' with route pattern 'api/Auth/forgot-password' is valid for the request path '/api/Auth/forgot-password'
2025-05-03 20:25:37.830 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:25:37.835 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:25:37.838 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-03 20:25:37.864 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:25:37.868 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:25:37.887 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:25:37.894 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:25:37.897 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:25:37.899 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:25:37.901 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:25:37.902 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:25:37.904 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:25:37.962 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-03 20:25:37.980 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:25:37.985 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:25:37.987 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:25:37.990 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:25:38.013 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000003": started reading request body.
2025-05-03 20:25:38.016 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000003": done reading request body.
2025-05-03 20:25:38.026 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'
2025-05-03 20:25:38.028 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:25:38.030 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:25:38.031 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:25:38.036 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:25:38.355 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'OrderDetail'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 20:25:38.359 +07:00 [WRN] Entity 'Document' has a global query filter defined and is the required end of a relationship with the entity 'Review'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-05-03 20:25:38.463 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:25:38.505 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-03 20:25:38.550 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 20:25:38.710 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 20:25:38.766 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:25:38.782 +07:00 [DBG] Created DbConnection. (15ms).
2025-05-03 20:25:38.787 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:25:38.921 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:25:38.928 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:25:38.934 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-03 20:25:38.940 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-05-03 20:25:38.948 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:25:38.993 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:25:39.005 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:25:39.013 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 11ms reading results.
2025-05-03 20:25:39.016 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:25:39.020 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-05-03 20:25:39.025 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:25:39.029 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:25:39.030 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:25:39.031 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:25:39.032 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:25:39.034 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:25:39.050 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument) in 1145.5493ms
2025-05-03 20:25:39.052 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:25:39.054 +07:00 [INF] HTTP POST /api/Auth/forgot-password responded 200 in 1221.0845 ms
2025-05-03 20:25:39.056 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:25:39.060 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:25:39.064 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:25:39.066 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-03 20:25:39.068 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - 200 null application/json; charset=utf-8 1263.51ms
2025-05-03 20:26:25.847 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - application/json 33
2025-05-03 20:26:25.855 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/forgot-password'
2025-05-03 20:26:25.857 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)' with route pattern 'api/Auth/forgot-password' is valid for the request path '/api/Auth/forgot-password'
2025-05-03 20:26:25.865 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:26:25.868 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:26:25.872 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:26:25.875 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:26:25.877 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:26:25.880 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:26:25.882 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:26:25.883 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:26:25.885 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:26:25.887 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:26:25.889 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:26:25.892 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:26:25.894 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:26:25.895 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:26:25.896 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:26:25.897 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000004": started reading request body.
2025-05-03 20:26:25.898 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000004": done reading request body.
2025-05-03 20:26:25.899 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'
2025-05-03 20:26:25.901 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:26:25.902 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:26:25.904 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:26:25.906 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:26:25.916 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:26:25.922 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:26:25.923 +07:00 [DBG] Created DbConnection. (1ms).
2025-05-03 20:26:25.924 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:26:25.926 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:26:25.927 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:26:25.928 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 20:26:25.929 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 20:26:25.930 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:26:25.934 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:26:25.938 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:26:25.940 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 2ms reading results.
2025-05-03 20:26:25.941 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:26:25.942 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 20:26:25.943 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:26:25.945 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:26:25.946 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:26:25.947 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:26:25.947 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:26:25.948 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:26:25.950 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument) in 61.0592ms
2025-05-03 20:26:25.952 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:26:25.954 +07:00 [INF] HTTP POST /api/Auth/forgot-password responded 200 in 85.5796 ms
2025-05-03 20:26:25.955 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:26:25.956 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:26:25.957 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:26:25.958 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 20:26:25.959 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - 200 null application/json; charset=utf-8 112.3578ms
2025-05-03 20:27:58.921 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - application/json 39
2025-05-03 20:27:58.925 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/forgot-password'
2025-05-03 20:27:58.927 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)' with route pattern 'api/Auth/forgot-password' is valid for the request path '/api/Auth/forgot-password'
2025-05-03 20:27:58.930 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:27:58.931 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:27:58.934 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:27:58.936 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:27:58.939 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:27:58.943 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:27:58.947 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:27:58.949 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:27:58.951 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:27:58.952 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:27:58.953 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:27:58.960 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:27:58.962 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:27:58.963 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:27:58.965 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:27:58.966 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000005": started reading request body.
2025-05-03 20:27:58.968 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000005": done reading request body.
2025-05-03 20:27:58.969 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'
2025-05-03 20:27:58.970 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:27:58.971 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:27:58.974 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:27:58.976 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:27:59.022 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:27:59.028 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:27:59.029 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 20:27:59.030 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:27:59.032 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:27:59.034 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:27:59.036 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 20:27:59.037 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-03 20:27:59.039 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:27:59.046 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:27:59.049 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:27:59.051 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-05-03 20:27:59.053 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:27:59.054 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 20:27:59.056 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:27:59.060 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:27:59.061 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:27:59.062 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:27:59.062 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:27:59.064 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:27:59.065 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument) in 112.0303ms
2025-05-03 20:27:59.067 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:27:59.067 +07:00 [INF] HTTP POST /api/Auth/forgot-password responded 200 in 136.0223 ms
2025-05-03 20:27:59.069 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:27:59.070 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:27:59.071 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:27:59.073 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 20:27:59.075 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - 200 null application/json; charset=utf-8 153.0665ms
2025-05-03 20:29:36.875 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - application/json 40
2025-05-03 20:29:36.878 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/forgot-password'
2025-05-03 20:29:36.880 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)' with route pattern 'api/Auth/forgot-password' is valid for the request path '/api/Auth/forgot-password'
2025-05-03 20:29:36.882 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:29:36.884 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:29:36.885 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:29:36.887 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:29:36.889 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:29:36.894 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:29:36.898 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:29:36.901 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:29:36.904 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:29:36.906 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:29:36.908 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:29:36.910 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:29:36.913 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:29:36.915 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:29:36.916 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:29:36.918 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000006": started reading request body.
2025-05-03 20:29:36.919 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000006": done reading request body.
2025-05-03 20:29:36.920 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'
2025-05-03 20:29:36.921 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:29:36.923 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:29:36.924 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO' ...
2025-05-03 20:29:36.925 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ForgotPasswordRequestDTO'.
2025-05-03 20:29:36.930 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:29:36.933 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:29:36.934 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 20:29:36.935 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:36.937 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:36.938 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:29:36.939 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 20:29:36.941 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 20:29:36.942 +07:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:29:36.953 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[email] = @__email_0
2025-05-03 20:29:36.976 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:29:37.009 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:29:37.015 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:29:37.019 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:37.020 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 63ms reading results.
2025-05-03 20:29:37.023 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:37.024 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 20:29:37.030 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 20:29:37.034 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 20:29:37.044 +07:00 [DBG] The unchanged property 'User.PasswordResetToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 20:29:37.052 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:29:37.056 +07:00 [DBG] The unchanged property 'User.ResetTokenExpires' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 20:29:37.065 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 20:29:37.099 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:37.101 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:37.104 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:29:37.105 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 20:29:37.107 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 20:29:37.109 +07:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [PasswordResetToken] = @p0, [ResetTokenExpires] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 20:29:37.118 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [PasswordResetToken] = @p0, [ResetTokenExpires] = @p1
OUTPUT 1
WHERE [userId] = @p2;
2025-05-03 20:29:37.124 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:37.126 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 5ms reading results.
2025-05-03 20:29:37.130 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:37.132 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (2ms).
2025-05-03 20:29:37.137 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:29:37.140 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 20:29:37.143 +07:00 [INF] Generated password reset token for nguyetnkhuyen@gmail.com
2025-05-03 20:29:41.154 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:29:41.159 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:29:41.161 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:29:41.162 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:29:41.164 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:29:41.165 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:29:41.166 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument) in 4258.1081ms
2025-05-03 20:29:41.167 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ForgotPassword (ExchangeDocument)'
2025-05-03 20:29:41.169 +07:00 [INF] HTTP POST /api/Auth/forgot-password responded 200 in 4284.7339 ms
2025-05-03 20:29:41.170 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:29:41.171 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:29:41.172 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:29:41.173 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 20:29:41.175 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/forgot-password - 200 null application/json; charset=utf-8 4300.0197ms
2025-05-03 20:31:39.819 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - application/json 111
2025-05-03 20:31:39.823 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/reset-password'
2025-05-03 20:31:39.825 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)' with route pattern 'api/Auth/reset-password' is valid for the request path '/api/Auth/reset-password'
2025-05-03 20:31:39.828 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:31:39.830 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:31:39.833 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:31:39.835 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:31:39.842 +07:00 [INF] Route matched with {action = "ResetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:31:39.845 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:31:39.848 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:31:39.851 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:31:39.854 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:31:39.856 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:31:39.858 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:31:39.859 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:31:39.862 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:31:39.864 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:31:39.866 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:31:39.868 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000007": started reading request body.
2025-05-03 20:31:39.869 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000007": done reading request body.
2025-05-03 20:31:39.871 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'
2025-05-03 20:31:39.873 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:31:39.874 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:31:39.875 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:31:39.879 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:31:39.885 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:31:39.887 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Role)
    .FirstOrDefault(u => u.PasswordResetToken == __token_0)'
2025-05-03 20:31:39.889 +07:00 [DBG] Including navigation: 'User.Role'.
2025-05-03 20:31:39.898 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.PasswordResetToken == @__token_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Required Index MaxLength(255), 2], [Property: User.FullName (string) Required MaxLength(255), 3], [Property: User.IsEmailVerified (bool) Required, 4], [Property: User.Password (string) Required MaxLength(255), 5], [Property: User.PasswordResetToken (string), 6], [Property: User.Phone (string) MaxLength(20), 7], [Property: User.ResetTokenExpires (DateTime?), 8], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 9], [Property: User.UpdatedAt (DateTime?), 10] }
                1 -> Dictionary<IProperty, int> { [Property: Role.RoleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Role.RoleName (string) Required Index MaxLength(50), 12] }
            SELECT TOP(1) u.userId, u.CreatedAt, u.email, u.fullName, u.IsEmailVerified, u.password, u.PasswordResetToken, u.phone, u.ResetTokenExpires, u.roleId, u.UpdatedAt, r.roleId, r.roleName
            FROM users AS u
            INNER JOIN roles AS r ON u.roleId == r.roleId
            WHERE u.PasswordResetToken == @__token_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<FullName>k__BackingField = dataReader.GetString(3);
                                    instance.<IsEmailVerified>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Password>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordResetToken>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<ResetTokenExpires>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(9);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Role instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Role);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.RoleId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(11) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Role)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(11);
                                    instance.<RoleName>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<User, User, Role>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: User.Role (Role) ToPrincipal Role Inverse: Users | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Role")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Role.Users (ICollection<User>) Collection ToDependent User Inverse: Role | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<Role>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Role, ICollection<User>, User> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Role").FindNavigation("Users").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-03 20:31:39.932 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:31:39.933 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 20:31:39.934 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:31:39.935 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:31:39.936 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:31:39.937 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 20:31:39.939 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 20:31:39.940 +07:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:31:39.947 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:31:39.950 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:31:39.951 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-05-03 20:31:39.952 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:31:39.953 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 20:31:39.955 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:31:39.957 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:31:39.958 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:31:39.958 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:31:39.959 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:31:39.961 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:31:39.964 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument) in 105.9426ms
2025-05-03 20:31:39.965 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:31:39.966 +07:00 [INF] HTTP POST /api/Auth/reset-password responded 400 in 135.9321 ms
2025-05-03 20:31:39.967 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:31:39.968 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:31:39.969 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:31:39.970 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 20:31:39.972 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - 400 null application/json; charset=utf-8 152.3479ms
2025-05-03 20:32:22.957 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - application/json 111
2025-05-03 20:32:22.961 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/reset-password'
2025-05-03 20:32:22.963 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)' with route pattern 'api/Auth/reset-password' is valid for the request path '/api/Auth/reset-password'
2025-05-03 20:32:22.966 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:32:22.967 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:32:22.969 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:32:22.971 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:32:22.974 +07:00 [INF] Route matched with {action = "ResetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:32:22.979 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:32:22.980 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:32:22.982 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:32:22.984 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:32:22.985 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:32:22.987 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:32:22.989 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:32:22.991 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:32:22.993 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:32:22.994 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:32:22.996 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000008": started reading request body.
2025-05-03 20:32:22.997 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000008": done reading request body.
2025-05-03 20:32:22.998 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'
2025-05-03 20:32:22.999 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:32:23.000 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:32:23.001 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:32:23.003 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:32:23.005 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:32:23.009 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:32:23.010 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 20:32:23.011 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.012 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.013 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:32:23.015 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 20:32:23.016 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 20:32:23.017 +07:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:32:23.022 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:32:23.026 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:32:23.028 +07:00 [DBG] The navigation 'User.Role' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:32:23.029 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:32:23.030 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.031 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 5ms reading results.
2025-05-03 20:32:23.033 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.034 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 20:32:23.248 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-05-03 20:32:23.250 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-05-03 20:32:23.252 +07:00 [DBG] The unchanged property 'User.Password' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 20:32:23.255 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:32:23.258 +07:00 [DBG] The unchanged property 'User.PasswordResetToken' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 20:32:23.260 +07:00 [DBG] The unchanged property 'User.ResetTokenExpires' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 20:32:23.264 +07:00 [DBG] The unchanged property 'User.UpdatedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-03 20:32:23.267 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-05-03 20:32:23.270 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.273 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.276 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:32:23.278 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-03 20:32:23.279 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 20:32:23.280 +07:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [password] = @p0, [PasswordResetToken] = @p1, [ResetTokenExpires] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [userId] = @p4;
2025-05-03 20:32:23.289 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [users] SET [password] = @p0, [PasswordResetToken] = @p1, [ResetTokenExpires] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [userId] = @p4;
2025-05-03 20:32:23.293 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.296 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 3ms reading results.
2025-05-03 20:32:23.299 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.301 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 20:32:23.303 +07:00 [DBG] An entity of type 'User' tracked by 'ExchangeDocumentContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-03 20:32:23.306 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-05-03 20:32:23.308 +07:00 [INF] Password reset successfully for nguyetnkhuyen@gmail.com
2025-05-03 20:32:23.309 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:32:23.312 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:32:23.312 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:32:23.314 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:32:23.314 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:32:23.316 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:32:23.317 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument) in 330.381ms
2025-05-03 20:32:23.318 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:32:23.319 +07:00 [INF] HTTP POST /api/Auth/reset-password responded 200 in 352.2298 ms
2025-05-03 20:32:23.321 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:32:23.324 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:32:23.325 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:32:23.326 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 20:32:23.328 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - 200 null application/json; charset=utf-8 370.5854ms
2025-05-03 20:33:07.115 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - application/json 125
2025-05-03 20:33:07.117 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/reset-password'
2025-05-03 20:33:07.119 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)' with route pattern 'api/Auth/reset-password' is valid for the request path '/api/Auth/reset-password'
2025-05-03 20:33:07.121 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:33:07.123 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:33:07.124 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:33:07.126 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:33:07.127 +07:00 [INF] Route matched with {action = "ResetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:33:07.129 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:33:07.131 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:33:07.134 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:33:07.137 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:33:07.138 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:33:07.140 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:33:07.141 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:33:07.142 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:33:07.143 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:33:07.144 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:33:07.145 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000009": started reading request body.
2025-05-03 20:33:07.147 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:00000009": done reading request body.
2025-05-03 20:33:07.148 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'
2025-05-03 20:33:07.149 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:33:07.151 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:33:07.153 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:33:07.154 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:33:07.156 +07:00 [DBG] The request has model state errors, returning an error response.
2025-05-03 20:33:07.157 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-05-03 20:33:07.158 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:33:07.159 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:33:07.160 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-05-03 20:33:07.162 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-05-03 20:33:07.163 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-03 20:33:07.182 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument) in 42.6127ms
2025-05-03 20:33:07.184 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:33:07.186 +07:00 [INF] HTTP POST /api/Auth/reset-password responded 400 in 62.7803 ms
2025-05-03 20:33:07.187 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:33:07.188 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - 400 null application/problem+json; charset=utf-8 73.1401ms
2025-05-03 20:33:26.234 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - application/json 113
2025-05-03 20:33:26.238 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/reset-password'
2025-05-03 20:33:26.240 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)' with route pattern 'api/Auth/reset-password' is valid for the request path '/api/Auth/reset-password'
2025-05-03 20:33:26.242 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:33:26.243 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:33:26.244 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:33:26.245 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:33:26.246 +07:00 [INF] Route matched with {action = "ResetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:33:26.250 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:33:26.251 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:33:26.253 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:33:26.255 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:33:26.256 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:33:26.257 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:33:26.258 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:33:26.259 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:33:26.260 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:33:26.261 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:33:26.262 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:0000000A": started reading request body.
2025-05-03 20:33:26.263 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:0000000A": done reading request body.
2025-05-03 20:33:26.265 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'
2025-05-03 20:33:26.266 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:33:26.267 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:33:26.269 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:33:26.270 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:33:26.271 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:33:26.273 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:33:26.274 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 20:33:26.275 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:33:26.276 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:33:26.277 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:33:26.278 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 20:33:26.279 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-03 20:33:26.280 +07:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:33:26.285 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:33:26.287 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:33:26.288 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 0ms reading results.
2025-05-03 20:33:26.289 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:33:26.290 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-05-03 20:33:26.291 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:33:26.293 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:33:26.294 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:33:26.294 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:33:26.295 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:33:26.296 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:33:26.297 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument) in 40.6999ms
2025-05-03 20:33:26.299 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:33:26.300 +07:00 [INF] HTTP POST /api/Auth/reset-password responded 400 in 57.4413 ms
2025-05-03 20:33:26.302 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:33:26.303 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:33:26.303 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:33:26.304 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-03 20:33:26.305 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - 400 null application/json; charset=utf-8 70.7753ms
2025-05-03 20:34:55.548 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - application/json 113
2025-05-03 20:34:55.552 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/reset-password'
2025-05-03 20:34:55.554 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)' with route pattern 'api/Auth/reset-password' is valid for the request path '/api/Auth/reset-password'
2025-05-03 20:34:55.557 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:34:55.558 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-03 20:34:55.560 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-03 20:34:55.561 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:34:55.563 +07:00 [INF] Route matched with {action = "ResetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO) on controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument).
2025-05-03 20:34:55.565 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-03 20:34:55.567 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-03 20:34:55.569 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-05-03 20:34:55.572 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-03 20:34:55.574 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-03 20:34:55.575 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:34:55.576 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.AuthController (ExchangeDocument)
2025-05-03 20:34:55.577 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:34:55.578 +07:00 [DBG] Attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' using the name '' in request data ...
2025-05-03 20:34:55.579 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-03 20:34:55.580 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:0000000B": started reading request body.
2025-05-03 20:34:55.581 +07:00 [DBG] Connection id "0HNCA8MNMQU4G", Request id "0HNCA8MNMQU4G:0000000B": done reading request body.
2025-05-03 20:34:55.582 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'
2025-05-03 20:34:55.583 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:34:55.584 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:34:55.586 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO' ...
2025-05-03 20:34:55.588 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'ExchangeDocument.BusinessLayer.DTOs.Auth.ResetPasswordRequestDTO'.
2025-05-03 20:34:55.590 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-03 20:34:55.592 +07:00 [DBG] Creating DbConnection.
2025-05-03 20:34:55.593 +07:00 [DBG] Created DbConnection. (0ms).
2025-05-03 20:34:55.594 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:34:55.595 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:34:55.596 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-03 20:34:55.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-03 20:34:55.598 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-03 20:34:55.599 +07:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:34:55.607 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[CreatedAt], [u].[email], [u].[fullName], [u].[IsEmailVerified], [u].[password], [u].[PasswordResetToken], [u].[phone], [u].[ResetTokenExpires], [u].[roleId], [u].[UpdatedAt], [r].[roleId], [r].[roleName]
FROM [users] AS [u]
INNER JOIN [roles] AS [r] ON [u].[roleId] = [r].[roleId]
WHERE [u].[PasswordResetToken] = @__token_0
2025-05-03 20:34:55.610 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:34:55.611 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-05-03 20:34:55.612 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:34:55.614 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-05-03 20:34:55.615 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-03 20:34:55.617 +07:00 [DBG] No information found on request to perform content negotiation.
2025-05-03 20:34:55.618 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-03 20:34:55.619 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-03 20:34:55.620 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-03 20:34:55.622 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-03 20:34:55.623 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument) in 48.173ms
2025-05-03 20:34:55.625 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.AuthController.ResetPassword (ExchangeDocument)'
2025-05-03 20:34:55.625 +07:00 [INF] HTTP POST /api/Auth/reset-password responded 400 in 67.4153 ms
2025-05-03 20:34:55.627 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" completed keep alive response.
2025-05-03 20:34:55.628 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-05-03 20:34:55.628 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-05-03 20:34:55.630 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-03 20:34:55.631 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Auth/reset-password - 400 null application/json; charset=utf-8 82.9707ms
2025-05-03 20:35:14.516 +07:00 [INF] Application is shutting down...
2025-05-03 20:35:14.517 +07:00 [DBG] Hosting stopping
2025-05-03 20:35:14.523 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" disconnecting.
2025-05-03 20:35:14.524 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" stopped.
2025-05-03 20:35:14.525 +07:00 [DBG] Connection id "0HNCA8MNMQU4G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-03 20:35:14.527 +07:00 [DBG] Hosting stopped
