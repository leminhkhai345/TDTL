2025-04-27 19:34:54.637 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-27 19:34:54.747 +07:00 [DBG] Hosting starting
2025-04-27 19:34:54.803 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-27 19:34:54.805 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-27 19:34:54.806 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-27 19:34:54.807 +07:00 [INF] Hosting environment: Production
2025-04-27 19:34:54.808 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-27 19:34:54.809 +07:00 [DBG] Hosting started
2025-04-27 19:35:06.687 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" accepted.
2025-04-27 19:35:06.694 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" started.
2025-04-27 19:35:06.800 +07:00 [DBG] Connection id "0HNC5GVOFVPG3" accepted.
2025-04-27 19:35:06.803 +07:00 [DBG] Connection id "0HNC5GVOFVPG3" started.
2025-04-27 19:35:06.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 19:35:06.858 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-27 19:35:06.878 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 19:35:06.881 +07:00 [DBG] Request did not match any endpoints
2025-04-27 19:35:06.887 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-27 19:35:06.889 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-27 19:35:06.893 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 4.4862 ms
2025-04-27 19:35:06.899 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" completed keep alive response.
2025-04-27 19:35:06.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 61.5664ms
2025-04-27 19:35:06.915 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-27 19:35:08.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 19:35:08.626 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 19:35:08.629 +07:00 [DBG] Request did not match any endpoints
2025-04-27 19:35:08.631 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-27 19:35:08.632 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.1034 ms
2025-04-27 19:35:08.635 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" completed keep alive response.
2025-04-27 19:35:08.636 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 15.5897ms
2025-04-27 19:35:08.643 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-27 19:35:10.414 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 19:35:10.416 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 19:35:10.417 +07:00 [DBG] Request did not match any endpoints
2025-04-27 19:35:10.419 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-27 19:35:10.420 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 0.8695 ms
2025-04-27 19:35:10.422 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" completed keep alive response.
2025-04-27 19:35:10.424 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 9.725ms
2025-04-27 19:35:10.426 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-27 19:35:10.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 19:35:10.578 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 19:35:10.581 +07:00 [DBG] Request did not match any endpoints
2025-04-27 19:35:10.582 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-27 19:35:10.584 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.8208 ms
2025-04-27 19:35:10.586 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" completed keep alive response.
2025-04-27 19:35:10.589 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 14.8494ms
2025-04-27 19:35:10.594 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-27 19:35:10.752 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 19:35:10.756 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 19:35:10.757 +07:00 [DBG] Request did not match any endpoints
2025-04-27 19:35:10.758 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-27 19:35:10.759 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 0.8433 ms
2025-04-27 19:35:10.761 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" completed keep alive response.
2025-04-27 19:35:10.762 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 9.5267ms
2025-04-27 19:35:10.765 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-27 19:35:10.926 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 19:35:10.929 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 19:35:10.930 +07:00 [DBG] Request did not match any endpoints
2025-04-27 19:35:10.931 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-27 19:35:10.932 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.0637 ms
2025-04-27 19:35:10.935 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" completed keep alive response.
2025-04-27 19:35:10.936 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 9.8517ms
2025-04-27 19:35:10.942 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-27 19:35:11.109 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 19:35:11.112 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 19:35:11.114 +07:00 [DBG] Request did not match any endpoints
2025-04-27 19:35:11.115 +07:00 [DBG] The request is insecure. Skipping HSTS header.
2025-04-27 19:35:11.116 +07:00 [INF] HTTP GET /swagger/index.html responded 404 in 1.0990 ms
2025-04-27 19:35:11.118 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" completed keep alive response.
2025-04-27 19:35:11.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 404 0 null 10.3761ms
2025-04-27 19:35:11.126 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5120/swagger/index.html, Response status code: 404
2025-04-27 19:35:11.863 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" received FIN.
2025-04-27 19:35:11.863 +07:00 [DBG] Connection id "0HNC5GVOFVPG3" received FIN.
2025-04-27 19:35:11.870 +07:00 [DBG] Connection id "0HNC5GVOFVPG3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 19:35:11.870 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 19:35:11.875 +07:00 [DBG] Connection id "0HNC5GVOFVPG3" disconnecting.
2025-04-27 19:35:11.877 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" disconnecting.
2025-04-27 19:35:11.879 +07:00 [DBG] Connection id "0HNC5GVOFVPG3" stopped.
2025-04-27 19:35:11.879 +07:00 [DBG] Connection id "0HNC5GVOFVPG2" stopped.
2025-04-27 19:53:14.358 +07:00 [INF] Application is shutting down...
2025-04-27 19:53:14.359 +07:00 [DBG] Hosting stopping
2025-04-27 19:53:14.377 +07:00 [DBG] Hosting stopped
2025-04-27 21:53:23.080 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-27 21:53:23.309 +07:00 [DBG] Hosting starting
2025-04-27 21:53:23.354 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-27 21:53:23.357 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-27 21:53:23.358 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-27 21:53:23.360 +07:00 [INF] Hosting environment: Development
2025-04-27 21:53:23.361 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-27 21:53:23.362 +07:00 [DBG] Hosting started
2025-04-27 21:53:26.295 +07:00 [DBG] Connection id "0HNC5JD1V78CE" accepted.
2025-04-27 21:53:26.299 +07:00 [DBG] Connection id "0HNC5JD1V78CE" started.
2025-04-27 21:53:26.300 +07:00 [DBG] Connection id "0HNC5JD1V78CF" accepted.
2025-04-27 21:53:26.302 +07:00 [DBG] Connection id "0HNC5JD1V78CF" started.
2025-04-27 21:53:26.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 21:53:26.350 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-27 21:53:26.366 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 21:53:26.370 +07:00 [DBG] Request did not match any endpoints
2025-04-27 21:53:26.462 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 87.1711 ms
2025-04-27 21:53:26.466 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:53:26.470 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 129.3155ms
2025-04-27 21:53:27.299 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-27 21:53:27.305 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-27 21:53:27.307 +07:00 [DBG] Request did not match any endpoints
2025-04-27 21:53:27.446 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 137.5544 ms
2025-04-27 21:53:27.448 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:53:27.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 150.2343ms
2025-04-27 21:53:57.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/4 - null null
2025-04-27 21:53:57.424 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/4'
2025-04-27 21:53:57.433 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/4'
2025-04-27 21:53:57.436 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:53:57.445 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:53:57.448 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-27 21:53:57.450 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:53:57.486 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:53:57.492 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:53:57.494 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:53:57.496 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:53:57.498 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:53:57.499 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:53:57.503 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:53:57.608 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-27 21:53:57.627 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:53:57.631 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 21:53:57.634 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 21:53:57.637 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:53:57.639 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:53:57.641 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 21:53:57.644 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 21:53:58.078 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 21:53:58.343 +07:00 [DBG] Compiling query expression: 
'DbSet<Document>()
    .Include(d => d.Category)
    .Include(d => d.User)
    .FirstOrDefault(d => d.DocumentId == __id_0 && d.Status == "Listed")'
2025-04-27 21:53:58.393 +07:00 [DBG] Including navigation: 'Document.Category'.
2025-04-27 21:53:58.395 +07:00 [DBG] Including navigation: 'Document.User'.
2025-04-27 21:53:58.582 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Document>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Document>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed')) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Document.DocumentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Document.Author (string) MaxLength(255), 1], [Property: Document.CategoryId (int) Required FK Index, 2], [Property: Document.Condition (string) MaxLength(255), 3], [Property: Document.Description (string), 4], [Property: Document.Edition (string) MaxLength(100), 5], [Property: Document.ImageUrl (string) MaxLength(500), 6], [Property: Document.Isbn (string) MaxLength(20), 7], [Property: Document.Price (decimal?), 8], [Property: Document.PublicationYear (int?), 9], [Property: Document.Status (string) Required ValueGenerated.OnAdd MaxLength(50), 10], [Property: Document.Title (string) Required MaxLength(255), 11], [Property: Document.UserId (int) Required FK Index, 12] }
                1 -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Category.CategoryName (string) Required Index MaxLength(255), 14] }
                2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: User.Email (string) Required Index MaxLength(255), 16], [Property: User.FullName (string) Required MaxLength(255), 17], [Property: User.Password (string) Required MaxLength(255), 18], [Property: User.Phone (string) MaxLength(20), 19], [Property: User.RoleId (int) Required FK Index ValueGenerated.OnAdd, 20] }
            SELECT TOP(1) d.documentId, d.author, d.categoryId, d.condition, d.description, d.edition, d.imageUrl, d.ISBN, d.price, d.publicationYear, d.status, d.title, d.userId, c.categoryId, c.categoryName, u.userId, u.email, u.fullName, u.password, u.phone, u.roleId
            FROM document AS d
            INNER JOIN categories AS c ON d.categoryId == c.categoryId
            INNER JOIN users AS u ON d.userId == u.userId
            WHERE (d.documentId == @__id_0) && (d.status == N'Listed'), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Document entity;
            Category entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Document instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Document);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Document.DocumentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Document)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]: 
                            {
                                return 
                                {
                                    Document instance;
                                    instance = new Document();
                                    instance.<DocumentId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Author>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(2);
                                    instance.<Condition>k__BackingField = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Edition>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ImageUrl>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Isbn>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Price>k__BackingField = dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8);
                                    instance.<PublicationYear>k__BackingField = dataReader.IsDBNull(9) ? default(int?) : (int?)dataReader.GetInt32(9);
                                    instance.<Status>k__BackingField = dataReader.GetString(10);
                                    instance.<Title>k__BackingField = dataReader.GetString(11);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Document | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Document)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                Category instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(Category);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(13) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (Category)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(13);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            entity = 
            {
                MaterializationContext materializationContext3;
                IEntityType entityType3;
                User instance3;
                InternalEntityEntry entry3;
                bool hasNullKey3;
                materializationContext3 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance3 = default(User);
                entry3 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(15) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey3);
                !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                {
                    entityType3 = entry3.EntityType;
                    return instance3 = (User)entry3.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot3;
                    shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")];
                    instance3 = switch (entityType3)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(15);
                                    instance.<Email>k__BackingField = dataReader.GetString(16);
                                    instance.<FullName>k__BackingField = dataReader.GetString(17);
                                    instance.<Password>k__BackingField = dataReader.GetString(18);
                                    instance.<Phone>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(20);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext3.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType3, 
                        entity: instance3, 
                        snapshot: shadowSnapshot3);
                    return instance3;
                } : default(void);
                return instance3;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, Category>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.Category (Category) ToPrincipal Category Inverse: Documents | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("Category")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: Category.Documents (ICollection<Document>) Collection ToDependent Document Inverse: Category | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    namelessParameter{11}.<Category>k__BackingField = namelessParameter{12};
                    return [LIFTABLE Constant: ClrICollectionAccessor<Category, ICollection<Document>, Document> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{12}, 
                        value: namelessParameter{11}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.IncludeReference<Document, Document, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: Document.User (User) ToPrincipal User Inverse: Documents | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Document").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.Documents (ICollection<Document>) Collection ToDependent Document Inverse: User | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents")], 
                fixup: (namelessParameter{16}, namelessParameter{17}) => 
                {
                    namelessParameter{16}.<User>k__BackingField = namelessParameter{17};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, ICollection<Document>, Document> | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.User").FindNavigation("Documents").GetCollectionAccessor()].Add(
                        entity: namelessParameter{17}, 
                        value: namelessParameter{16}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-27 21:53:58.641 +07:00 [DBG] Creating DbConnection.
2025-04-27 21:53:58.658 +07:00 [DBG] Created DbConnection. (15ms).
2025-04-27 21:53:58.660 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:53:58.823 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:53:58.826 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 21:53:58.831 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-27 21:53:58.839 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-27 21:53:58.846 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:53:58.894 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:53:58.905 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:53:58.912 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 12ms reading results.
2025-04-27 21:53:58.915 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:53:58.919 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (4ms).
2025-04-27 21:53:58.925 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 21:53:58.928 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 21:53:58.930 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 21:53:58.931 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 21:53:58.932 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 21:53:58.933 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 21:53:58.934 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 21:53:58.965 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 1462.0661ms
2025-04-27 21:53:58.967 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:53:58.968 +07:00 [INF] HTTP GET /api/Documents/4 responded 404 in 1525.0993 ms
2025-04-27 21:53:58.970 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:53:58.974 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 21:53:58.977 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:53:58.980 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-27 21:53:58.981 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/4 - 404 null application/json; charset=utf-8 1563.6921ms
2025-04-27 21:54:54.378 +07:00 [DBG] Connection id "0HNC5JD1V78CF" received FIN.
2025-04-27 21:54:54.378 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/5 - null null
2025-04-27 21:54:54.382 +07:00 [DBG] Connection id "0HNC5JD1V78CF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 21:54:54.383 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-27 21:54:54.384 +07:00 [DBG] Connection id "0HNC5JD1V78CF" disconnecting.
2025-04-27 21:54:54.385 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-27 21:54:54.389 +07:00 [DBG] Connection id "0HNC5JD1V78CF" stopped.
2025-04-27 21:54:54.405 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:54.410 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:54:54.418 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:54.421 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:54:54.423 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:54:54.424 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:54:54.425 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:54:54.426 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:54:54.427 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:54:54.428 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:54:54.431 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:54:54.433 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 21:54:54.435 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 21:54:54.436 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:54.437 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:54.438 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 21:54:54.439 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:54.452 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 21:54:54.457 +07:00 [DBG] Creating DbConnection.
2025-04-27 21:54:54.458 +07:00 [DBG] Created DbConnection. (1ms).
2025-04-27 21:54:54.459 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:54.461 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:54.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 21:54:54.464 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 21:54:54.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-27 21:54:54.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:54:54.476 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:54:54.478 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:54.479 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-27 21:54:54.482 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:54.484 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 21:54:54.486 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 21:54:54.487 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 21:54:54.488 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 21:54:54.490 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 21:54:54.490 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 21:54:54.491 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 21:54:54.492 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 21:54:54.493 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 65.178ms
2025-04-27 21:54:54.495 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:54.496 +07:00 [INF] HTTP GET /api/Documents/5 responded 404 in 86.1223 ms
2025-04-27 21:54:54.499 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:54:54.500 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 21:54:54.501 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:54.503 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 21:54:54.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/5 - 404 null application/json; charset=utf-8 126.7251ms
2025-04-27 21:54:57.213 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/5 - null null
2025-04-27 21:54:57.217 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-27 21:54:57.218 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-27 21:54:57.220 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:57.222 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:54:57.224 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:57.226 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:54:57.230 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:54:57.232 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:54:57.235 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:54:57.238 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:54:57.240 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:54:57.242 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:54:57.249 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:54:57.251 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 21:54:57.253 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 21:54:57.254 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:57.256 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:57.257 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 21:54:57.259 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:57.310 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 21:54:57.315 +07:00 [DBG] Creating DbConnection.
2025-04-27 21:54:57.316 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 21:54:57.316 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:57.318 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:57.319 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 21:54:57.319 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 21:54:57.320 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 21:54:57.321 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:54:57.328 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:54:57.331 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:57.333 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-27 21:54:57.334 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:57.336 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 21:54:57.338 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 21:54:57.340 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 21:54:57.341 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 21:54:57.343 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 21:54:57.343 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 21:54:57.344 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 21:54:57.346 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 21:54:57.348 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 105.734ms
2025-04-27 21:54:57.349 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:57.350 +07:00 [INF] HTTP GET /api/Documents/5 responded 404 in 128.5420 ms
2025-04-27 21:54:57.352 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:54:57.354 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 21:54:57.356 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:57.357 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 21:54:57.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/5 - 404 null application/json; charset=utf-8 145.8112ms
2025-04-27 21:54:58.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/api/Documents/5 - null null
2025-04-27 21:54:58.114 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents/5'
2025-04-27 21:54:58.116 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)' with route pattern 'api/Documents/{id}' is valid for the request path '/api/Documents/5'
2025-04-27 21:54:58.119 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:58.120 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:54:58.120 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:58.122 +07:00 [INF] Route matched with {action = "GetDocumentById", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExchangeDocument.BusinessLayer.DTOs.DocumentDetailDto]] GetDocumentById(Int32) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:54:58.126 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:54:58.128 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:54:58.130 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:54:58.132 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:54:58.133 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:54:58.135 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:54:58.136 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:54:58.138 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-27 21:54:58.139 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-27 21:54:58.142 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:58.143 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:58.144 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-27 21:54:58.145 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-27 21:54:58.148 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 21:54:58.150 +07:00 [DBG] Creating DbConnection.
2025-04-27 21:54:58.151 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 21:54:58.151 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:58.153 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:58.155 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 21:54:58.156 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 21:54:58.157 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-27 21:54:58.158 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:54:58.166 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[documentId], [d].[author], [d].[categoryId], [d].[condition], [d].[description], [d].[edition], [d].[imageUrl], [d].[ISBN], [d].[price], [d].[publicationYear], [d].[status], [d].[title], [d].[userId], [c].[categoryId], [c].[categoryName], [u].[userId], [u].[email], [u].[fullName], [u].[password], [u].[phone], [u].[roleId]
FROM [document] AS [d]
INNER JOIN [categories] AS [c] ON [d].[categoryId] = [c].[categoryId]
INNER JOIN [users] AS [u] ON [d].[userId] = [u].[userId]
WHERE [d].[documentId] = @__id_0 AND [d].[status] = N'Listed'
2025-04-27 21:54:58.170 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:58.171 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-27 21:54:58.173 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:58.174 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-27 21:54:58.175 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 21:54:58.176 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-27 21:54:58.178 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-27 21:54:58.179 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 21:54:58.180 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 21:54:58.181 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 21:54:58.182 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 21:54:58.184 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) in 48.8493ms
2025-04-27 21:54:58.185 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)'
2025-04-27 21:54:58.186 +07:00 [INF] HTTP GET /api/Documents/5 responded 404 in 66.2651 ms
2025-04-27 21:54:58.188 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:54:58.189 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 21:54:58.190 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:54:58.191 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 21:54:58.192 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/api/Documents/5 - 404 null application/json; charset=utf-8 80.8351ms
2025-04-27 21:55:17.124 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 233
2025-04-27 21:55:17.129 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 21:55:17.130 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 21:55:17.133 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:55:17.136 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:55:17.137 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:55:17.142 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:55:17.150 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:55:17.154 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:55:17.155 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:55:17.156 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:55:17.157 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:55:17.159 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:55:17.160 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:55:17.164 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:55:17.166 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 21:55:17.168 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 21:55:17.185 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:00000007": started reading request body.
2025-04-27 21:55:17.186 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:00000007": done reading request body.
2025-04-27 21:55:17.202 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 21:55:17.204 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:55:17.205 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:55:17.206 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:55:17.216 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:55:17.219 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-27 21:55:17.222 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-27 21:55:17.223 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 21:55:17.226 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 21:55:17.227 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-27 21:55:17.230 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-27 21:55:17.231 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-27 21:55:17.250 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 90.9686ms
2025-04-27 21:55:17.253 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:55:17.254 +07:00 [INF] HTTP POST /api/Documents responded 400 in 118.1387 ms
2025-04-27 21:55:17.255 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:55:17.257 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 132.3175ms
2025-04-27 21:57:03.400 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 237
2025-04-27 21:57:03.402 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 21:57:03.403 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 21:57:03.406 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:03.408 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:57:03.410 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:03.412 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:57:03.415 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:57:03.417 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:57:03.420 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:57:03.423 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:57:03.425 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:57:03.426 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:57:03.428 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:57:03.431 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:57:03.433 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 21:57:03.435 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 21:57:03.436 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:00000008": started reading request body.
2025-04-27 21:57:03.437 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:00000008": done reading request body.
2025-04-27 21:57:03.439 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 21:57:03.440 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:03.441 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:03.442 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:57:03.443 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:03.444 +07:00 [DBG] The request has model state errors, returning an error response.
2025-04-27 21:57:03.445 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-27 21:57:03.446 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 21:57:03.449 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 21:57:03.450 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-27 21:57:03.452 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-27 21:57:03.453 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-27 21:57:03.454 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 28.4317ms
2025-04-27 21:57:03.456 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:03.456 +07:00 [INF] HTTP POST /api/Documents responded 400 in 48.5949 ms
2025-04-27 21:57:03.458 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:57:03.459 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/problem+json; charset=utf-8 58.7249ms
2025-04-27 21:57:50.706 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 359
2025-04-27 21:57:50.710 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 21:57:50.711 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 21:57:50.713 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:50.714 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:57:50.717 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:50.718 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:57:50.720 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:57:50.722 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:57:50.725 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:57:50.728 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:57:50.729 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:57:50.733 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:57:50.735 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:57:50.737 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:57:50.739 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 21:57:50.741 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 21:57:50.743 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:00000009": started reading request body.
2025-04-27 21:57:50.745 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:00000009": done reading request body.
2025-04-27 21:57:50.746 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 21:57:50.747 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:50.748 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:50.749 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:57:50.750 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:50.754 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 21:57:50.768 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-27 21:57:50.776 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-27 21:57:50.787 +07:00 [DBG] Creating DbConnection.
2025-04-27 21:57:50.788 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 21:57:50.788 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:50.789 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:50.791 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 21:57:50.792 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 21:57:50.793 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-27 21:57:50.794 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 21:57:50.798 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 21:57:50.800 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:50.801 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 1ms reading results.
2025-04-27 21:57:50.802 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:50.803 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (0ms).
2025-04-27 21:57:50.805 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 21:57:50.806 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 21:57:50.807 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 21:57:50.808 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 21:57:50.809 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 21:57:50.811 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-27 21:57:50.812 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 79.4197ms
2025-04-27 21:57:50.813 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:50.814 +07:00 [INF] HTTP POST /api/Documents responded 400 in 100.2646 ms
2025-04-27 21:57:50.816 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:57:50.817 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 21:57:50.819 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:50.820 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 21:57:50.822 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 400 null application/json; charset=utf-8 115.2159ms
2025-04-27 21:57:57.994 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 350
2025-04-27 21:57:57.998 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 21:57:58.000 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 21:57:58.001 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:58.003 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 21:57:58.004 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:58.005 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 21:57:58.008 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 21:57:58.009 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 21:57:58.012 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 21:57:58.016 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 21:57:58.018 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 21:57:58.020 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:57:58.022 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 21:57:58.024 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:57:58.027 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 21:57:58.029 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 21:57:58.032 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:0000000A": started reading request body.
2025-04-27 21:57:58.034 +07:00 [DBG] Connection id "0HNC5JD1V78CE", Request id "0HNC5JD1V78CE:0000000A": done reading request body.
2025-04-27 21:57:58.035 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 21:57:58.037 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:58.038 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:58.041 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 21:57:58.043 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 21:57:58.046 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 21:57:58.049 +07:00 [DBG] Creating DbConnection.
2025-04-27 21:57:58.050 +07:00 [DBG] Created DbConnection. (0ms).
2025-04-27 21:57:58.051 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.053 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.055 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 21:57:58.056 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 21:57:58.058 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-27 21:57:58.060 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 21:57:58.063 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 21:57:58.097 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 21:57:58.111 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.112 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 46ms reading results.
2025-04-27 21:57:58.114 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.115 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 21:57:58.135 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 21:57:58.171 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 21:57:58.180 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 21:57:58.184 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-27 21:57:58.187 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-27 21:57:58.203 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-27 21:57:58.253 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.254 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.258 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 21:57:58.260 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-27 21:57:58.263 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-27 21:57:58.264 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-27 21:57:58.275 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-27 21:57:58.287 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.288 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 10ms reading results.
2025-04-27 21:57:58.291 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.292 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 21:57:58.316 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d3a4e5c8-1d76-4a1b-8865-b33dbb2aa6ff
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d3a4e5c8-1d76-4a1b-8865-b33dbb2aa6ff
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-27 21:57:58.336 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 315.5611ms
2025-04-27 21:57:58.337 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 21:57:58.339 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__document__userId__47DBAE45". The conflict occurred in database "exchangedocument", table "dbo.users", column 'userId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d3a4e5c8-1d76-4a1b-8865-b33dbb2aa6ff
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ExchangeDocument.DataAccessLayer.Repositories.DocumentRepository.AddAsync(Document document) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\DataAccessLayer\Repositories\DocumentRepository.cs:line 21
   at ExchangeDocument.BusinessLayer.Services.DocumentService.AddDocumentAsync(DocumentCreateDto documentDto, Int32 userId) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\BusinessLayer\Services\DocumentService.cs:line 49
   at ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument(DocumentCreateDto documentDto) in D:\My_PBL3\ExchangeDocument\ExchangeDocument\PresentationLayer\Controllers\DocumentsController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-27 21:57:58.370 +07:00 [ERR] HTTP POST /api/Documents responded 500 in 367.6813 ms
2025-04-27 21:57:58.373 +07:00 [DBG] Connection id "0HNC5JD1V78CE" completed keep alive response.
2025-04-27 21:57:58.374 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 21:57:58.375 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 21:57:58.376 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-27 21:57:58.377 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 500 null text/plain; charset=utf-8 383.2414ms
2025-04-27 21:58:23.006 +07:00 [INF] Application is shutting down...
2025-04-27 21:58:23.007 +07:00 [DBG] Hosting stopping
2025-04-27 21:58:23.014 +07:00 [DBG] Connection id "0HNC5JD1V78CE" disconnecting.
2025-04-27 21:58:23.015 +07:00 [DBG] Connection id "0HNC5JD1V78CE" stopped.
2025-04-27 21:58:23.016 +07:00 [DBG] Connection id "0HNC5JD1V78CE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 21:58:23.020 +07:00 [DBG] Hosting stopped
2025-04-27 21:59:48.767 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-27 21:59:48.848 +07:00 [DBG] Hosting starting
2025-04-27 21:59:48.888 +07:00 [INF] Now listening on: http://localhost:5120
2025-04-27 21:59:48.890 +07:00 [DBG] Loaded hosting startup assembly ExchangeDocument
2025-04-27 21:59:48.893 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-27 21:59:48.894 +07:00 [INF] Hosting environment: Development
2025-04-27 21:59:48.895 +07:00 [INF] Content root path: D:\My_PBL3\ExchangeDocument\ExchangeDocument
2025-04-27 21:59:48.896 +07:00 [DBG] Hosting started
2025-04-27 21:59:53.346 +07:00 [DBG] Connection id "0HNC5JGLADREU" accepted.
2025-04-27 21:59:53.349 +07:00 [DBG] Connection id "0HNC5JGLADREU" started.
2025-04-27 21:59:53.350 +07:00 [DBG] Connection id "0HNC5JGLADREV" accepted.
2025-04-27 21:59:53.352 +07:00 [DBG] Connection id "0HNC5JGLADREV" started.
2025-04-27 21:59:53.378 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/index.html - null null
2025-04-27 21:59:53.387 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-27 21:59:53.400 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-27 21:59:53.402 +07:00 [DBG] Request did not match any endpoints
2025-04-27 21:59:53.471 +07:00 [INF] HTTP GET /swagger/index.html responded 200 in 64.2766 ms
2025-04-27 21:59:53.479 +07:00 [DBG] Connection id "0HNC5JGLADREU" completed keep alive response.
2025-04-27 21:59:53.482 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/index.html - 200 null text/html;charset=utf-8 106.5764ms
2025-04-27 21:59:53.886 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - null null
2025-04-27 21:59:53.893 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-27 21:59:53.894 +07:00 [DBG] Request did not match any endpoints
2025-04-27 21:59:54.014 +07:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 118.3699 ms
2025-04-27 21:59:54.016 +07:00 [DBG] Connection id "0HNC5JGLADREU" completed keep alive response.
2025-04-27 21:59:54.017 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5120/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 131.3704ms
2025-04-27 22:00:12.236 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5120/api/Documents - application/json 350
2025-04-27 22:00:12.242 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Documents'
2025-04-27 22:00:12.248 +07:00 [DBG] Endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)' with route pattern 'api/Documents' is valid for the request path '/api/Documents'
2025-04-27 22:00:12.252 +07:00 [DBG] Request matched endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:00:12.261 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-27 22:00:12.262 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-27 22:00:12.264 +07:00 [INF] Executing endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:00:12.284 +07:00 [INF] Route matched with {action = "AddDocument", controller = "Documents"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDocument(ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto) on controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument).
2025-04-27 22:00:12.292 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-27 22:00:12.296 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-27 22:00:12.298 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-27 22:00:12.299 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-27 22:00:12.300 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-27 22:00:12.302 +07:00 [DBG] Executing controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:00:12.361 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-27 22:00:12.378 +07:00 [DBG] Executed controller factory for controller ExchangeDocument.PresentationLayer.Controllers.DocumentsController (ExchangeDocument)
2025-04-27 22:00:12.381 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:00:12.384 +07:00 [DBG] Attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' using the name '' in request data ...
2025-04-27 22:00:12.386 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-27 22:00:12.412 +07:00 [DBG] Connection id "0HNC5JGLADREU", Request id "0HNC5JGLADREU:00000003": started reading request body.
2025-04-27 22:00:12.415 +07:00 [DBG] Connection id "0HNC5JGLADREU", Request id "0HNC5JGLADREU:00000003": done reading request body.
2025-04-27 22:00:12.431 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'
2025-04-27 22:00:12.434 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:00:12.435 +07:00 [DBG] Done attempting to bind parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:00:12.436 +07:00 [DBG] Attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto' ...
2025-04-27 22:00:12.445 +07:00 [DBG] Done attempting to validate the bound parameter 'documentDto' of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentCreateDto'.
2025-04-27 22:00:12.842 +07:00 [DBG] Entity Framework Core 9.0.4 initialized 'ExchangeDocumentContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-27 22:00:12.889 +07:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(e => EF.Property<int>(e, "CategoryId") == __p_0)'
2025-04-27 22:00:13.069 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.CategoryId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.CategoryName (string) Required Index MaxLength(255), 1] }
            SELECT TOP(1) c.categoryId, c.categoryName
            FROM categories AS c
            WHERE c.categoryId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.CategoryId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<CategoryId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CategoryName>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ExchangeDocument.DataAccessLayer.Entities.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: ExchangeDocument.DataAccessLayer.Data.ExchangeDocumentContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-27 22:00:13.105 +07:00 [DBG] Creating DbConnection.
2025-04-27 22:00:13.119 +07:00 [DBG] Created DbConnection. (12ms).
2025-04-27 22:00:13.124 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.254 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.259 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:00:13.266 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-27 22:00:13.274 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-04-27 22:00:13.281 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 22:00:13.314 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[categoryId], [c].[categoryName]
FROM [categories] AS [c]
WHERE [c].[categoryId] = @__p_0
2025-04-27 22:00:13.343 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:00:13.358 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.369 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 48ms reading results.
2025-04-27 22:00:13.373 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.380 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (6ms).
2025-04-27 22:00:13.400 +07:00 [DBG] 'ExchangeDocumentContext' generated a temporary value for the property 'Document.DocumentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:00:13.443 +07:00 [DBG] The navigation 'Document.Category' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:00:13.452 +07:00 [DBG] Context 'ExchangeDocumentContext' started tracking 'Document' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:00:13.456 +07:00 [DBG] SaveChanges starting for 'ExchangeDocumentContext'.
2025-04-27 22:00:13.460 +07:00 [DBG] DetectChanges starting for 'ExchangeDocumentContext'.
2025-04-27 22:00:13.474 +07:00 [DBG] DetectChanges completed for 'ExchangeDocumentContext'.
2025-04-27 22:00:13.525 +07:00 [DBG] Opening connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.528 +07:00 [DBG] Opened connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.530 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-27 22:00:13.531 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-27 22:00:13.533 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-27 22:00:13.534 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-27 22:00:13.542 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (Size = 20), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [document] ([author], [categoryId], [condition], [description], [edition], [imageUrl], [ISBN], [price], [publicationYear], [title], [userId])
OUTPUT INSERTED.[documentId], INSERTED.[status]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-04-27 22:00:13.551 +07:00 [DBG] The foreign key property 'Document.DocumentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-27 22:00:13.556 +07:00 [DBG] Closing data reader to 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.558 +07:00 [DBG] A data reader for 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' is being disposed after spending 13ms reading results.
2025-04-27 22:00:13.560 +07:00 [DBG] Closing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.561 +07:00 [DBG] Closed connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER' (1ms).
2025-04-27 22:00:13.569 +07:00 [DBG] An entity of type 'Document' tracked by 'ExchangeDocumentContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-27 22:00:13.573 +07:00 [DBG] SaveChanges completed for 'ExchangeDocumentContext' with 1 entities written to the database.
2025-04-27 22:00:13.580 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-27 22:00:13.583 +07:00 [DBG] No information found on request to perform content negotiation.
2025-04-27 22:00:13.584 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-27 22:00:13.584 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-27 22:00:13.585 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-27 22:00:13.587 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'ExchangeDocument.BusinessLayer.DTOs.DocumentDto'.
2025-04-27 22:00:13.602 +07:00 [DBG] Found the endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] for address (id=[8],action=[GetDocumentById],controller=[Documents])
2025-04-27 22:00:13.606 +07:00 [DBG] Successfully processed template api/Documents/{id} for ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument) resulting in /api/Documents/8 and 
2025-04-27 22:00:13.610 +07:00 [DBG] Link generation succeeded for endpoints ["ExchangeDocument.PresentationLayer.Controllers.DocumentsController.GetDocumentById (ExchangeDocument)"] with result /api/Documents/8
2025-04-27 22:00:13.633 +07:00 [INF] Executed action ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument) in 1329.3604ms
2025-04-27 22:00:13.635 +07:00 [INF] Executed endpoint 'ExchangeDocument.PresentationLayer.Controllers.DocumentsController.AddDocument (ExchangeDocument)'
2025-04-27 22:00:13.637 +07:00 [INF] HTTP POST /api/Documents responded 201 in 1378.3521 ms
2025-04-27 22:00:13.640 +07:00 [DBG] Connection id "0HNC5JGLADREU" completed keep alive response.
2025-04-27 22:00:13.643 +07:00 [DBG] 'ExchangeDocumentContext' disposed.
2025-04-27 22:00:13.646 +07:00 [DBG] Disposing connection to database 'exchangedocument' on server 'DESKTOP-6HCA7KG\KHOA_SQLSERVER'.
2025-04-27 22:00:13.650 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-27 22:00:13.651 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5120/api/Documents - 201 null application/json; charset=utf-8 1415.3255ms
2025-04-27 22:02:04.837 +07:00 [DBG] Connection id "0HNC5JGLADREV" disconnecting.
2025-04-27 22:02:04.841 +07:00 [DBG] Connection id "0HNC5JGLADREV" stopped.
2025-04-27 22:02:04.843 +07:00 [DBG] Connection id "0HNC5JGLADREV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 22:02:24.924 +07:00 [DBG] Connection id "0HNC5JGLADREU" disconnecting.
2025-04-27 22:02:24.931 +07:00 [DBG] Connection id "0HNC5JGLADREU" stopped.
2025-04-27 22:02:24.934 +07:00 [DBG] Connection id "0HNC5JGLADREU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-27 22:42:27.289 +07:00 [INF] Application is shutting down...
2025-04-27 22:42:27.290 +07:00 [DBG] Hosting stopping
2025-04-27 22:42:27.300 +07:00 [DBG] Hosting stopped
